


# Move 2024 新语法速查与示例





## 1. vector 的 `[]` 索引语法

Move 2024 支持用 `v[i]` 这种下标方式访问 vector 元素。底层会自动调用 `vector::borrow` 或 `vector::borrow_mut`。

**示例：**
```move
let mut v = vector[1, 2, 3];
let x = v[0];        // 等价于 *vector::borrow(&v, 0)
v[1] = 10;           // 等价于 *vector::borrow_mut(&mut v, 1) = 10;
```



---

## 2. object.fun 的方法语法

Move 2024 支持方法调用语法，比如 `object.fun()`，等价于 `fun(&object)` 或 `fun(&mut object)`。  
你可以直接用 `v.push_back(x)` 代替 `vector::push_back(&mut v, x)`。

**示例：**
```move
let mut v = vector[];
v.push_back(42);      // 等价于 vector::push_back(&mut v, 42)

let value = c.value(); // 如果 c 是 Coin，等价于 coin::value(&c)
```

---

## 3. 其他 2024 新语法推荐

### 3.1 struct 的位置字段（Positional Fields）

```move
public struct Pair(u64, u64) has copy, drop, store;

public fun sum(p: &Pair): u64 {
  p.0 + p.1
}
```

### 3.2 `public(package)` 取代 `friend`

```move
public(package) fun only_for_package() { ... }
```

**参考文档：**  
- [Move 2024 Migration Guide](https://docs.sui.io/guides/developer/advanced/move-2024-migration)


#### vector 相关 reference 文档

- [vector module reference (官方源码)](https://github.com/MystenLabs/sui/blob/181e54168de00041dbf0eec91a66c21a4926dd05/external-crates/move/crates/move-stdlib/sources/vector.move)






