# Web3 Tycoon Solana è¿ç§»æ¶æ„ç ”ç©¶

> **æ–‡æ¡£æ—¥æœŸ**: 2026-01-08
> **è®¨è®ºèƒŒæ™¯**: æ¢è®¨ Web3 Tycoon æ¸¸æˆä» Sui è¿ç§»åˆ° Solana çš„æŠ€æœ¯æ¶æ„æ–¹æ¡ˆ

---

## èƒŒæ™¯

å½“å‰é¡¹ç›®åŸºäº Sui åŒºå—é“¾ï¼Œä½¿ç”¨ Move è¯­è¨€å®ç°æ ¸å¿ƒæ¸¸æˆé€»è¾‘ã€‚æœ¬æ–‡æ¡£è®¨è®ºå¦‚ä½•å°†æ¸¸æˆè¿ç§»åˆ° Solana é“¾ä¸Šçš„æ¶æ„æ–¹æ¡ˆã€‚

**ç›®æ ‡**ï¼šçº¯é“¾ä¸Šæ¶æ„ï¼ˆæ–¹æ¡ˆAï¼‰ï¼Œä¸ Sui ç‰ˆæœ¬åŠŸèƒ½å¯¹ç­‰ï¼Œé¢å‘ crypto-native ç”¨æˆ·ã€‚

---

## ã€‡ã€æ ¸å¿ƒé—®é¢˜ï¼šSolana å…¨é“¾ä¸Šæ¯” Sui éš¾å—ï¼Ÿ

### ç­”æ¡ˆï¼šæ˜¯çš„ï¼Œæ˜æ˜¾æ›´éš¾ã€‚ä¸»è¦åŸå› ï¼š

### 1. éšæœºæ•° â€”â€” æœ€å¤§çš„ç—›ç‚¹

| ç‰¹æ€§ | Sui | Solana |
|-----|-----|--------|
| **åŸç”Ÿæ”¯æŒ** | âœ… `sui::random` æ¨¡å— | âŒ æ— åŸç”Ÿæ”¯æŒ |
| **ä½¿ç”¨æ–¹å¼** | ä¸€è¡Œä»£ç  | éœ€è¦é›†æˆç¬¬ä¸‰æ–¹ VRF |
| **å»¶è¿Ÿ** | 0ï¼ˆåŒäº¤æ˜“å†…ï¼‰ | 2-4ç§’ï¼ˆç­‰å¾…é¢„è¨€æœºï¼‰ |
| **é¢å¤–æˆæœ¬** | 0 | ~0.002-0.01 SOL/æ¬¡ |
| **äº¤æ˜“æ•°é‡** | 1 | 2ï¼ˆè¯·æ±‚+å›è°ƒï¼‰ |

**Sui çš„éšæœºæ•°ï¼ˆæå…¶ç®€å•ï¼‰**ï¼š
```move
// Sui: ä¸€è¡Œä»£ç æå®š
let dice = random::generate_u8_in_range(r, 1, 7);
```

**Solana çš„éšæœºæ•°ï¼ˆå¤æ‚æµç¨‹ï¼‰**ï¼š
```
äº¤æ˜“1: request_randomness() â†’ æ”¯ä»˜è´¹ç”¨ â†’ ç­‰å¾…é¢„è¨€æœº
                                    â†“
                              [2-4ç§’å»¶è¿Ÿ]
                                    â†“
äº¤æ˜“2: consume_randomness() â† é¢„è¨€æœºå›è°ƒ â† VRFè¯æ˜éªŒè¯
```

è¿™æ„å‘³ç€ï¼š
- **æ·éª°å­ä¸èƒ½å³æ—¶å®Œæˆ**
- éœ€è¦è®¾è®¡å¼‚æ­¥çŠ¶æ€æœº
- ç”¨æˆ·ä½“éªŒå˜æˆï¼šç‚¹å‡» â†’ ç­‰å¾… â†’ å†ç‚¹å‡»ç¡®è®¤

### 2. äº¤æ˜“å¤§å°é™åˆ¶

| ç‰¹æ€§ | Sui | Solana |
|-----|-----|--------|
| **äº¤æ˜“å¤§å°** | ~128KB | ~1232 å­—èŠ‚ |
| **å½±å“** | å¯ä¼ å¤§æ•°ç»„ | è·¯å¾„æ•°æ®å¯èƒ½è£…ä¸ä¸‹ |

**å®é™…å½±å“**ï¼š
```rust
// å½“å‰ Move ä»£ç ï¼šè·¯å¾„ä½œä¸ºå‚æ•°ä¼ å…¥
entry fun roll_and_step(
    path: vector<u16>,  // å¯èƒ½æœ‰ 20+ ä¸ªå…ƒç´ 
    ...
)

// Solanaï¼š1232å­—èŠ‚é™åˆ¶
// 20ä¸ªu16 = 40å­—èŠ‚ï¼Œçœ‹èµ·æ¥OK
// ä½†åŠ ä¸Šå…¶ä»–å‚æ•°ã€è´¦æˆ·åˆ—è¡¨ã€ç­¾å...å¾ˆç´§å¼ 
```

### 3. è´¦æˆ·æ¨¡å‹ vs å¯¹è±¡æ¨¡å‹

**Sui å¯¹è±¡æ¨¡å‹ï¼ˆç›´è§‚ï¼‰**ï¼š
```move
// å¯¹è±¡è‡ªå¸¦ IDï¼Œå¯ä»¥åµŒå¥—ï¼Œå¯ä»¥è½¬ç§»
public struct Game has key {
    id: UID,
    players: vector<Player>,  // ç›´æ¥åµŒå¥—
    buildings: vector<Building>,
}
```

**Solana è´¦æˆ·æ¨¡å‹ï¼ˆç¹çï¼‰**ï¼š
```rust
// éœ€è¦é¢„å…ˆåˆ›å»ºè´¦æˆ·ï¼ŒæŒ‡å®šå¤§å°
#[account(
    init,
    payer = payer,
    space = 8 + GameState::INIT_SPACE,  // å¿…é¡»é¢„ä¼°å¤§å°
    seeds = [b"game", game_id.as_ref()],
    bump
)]
pub game_state: Account<'info, GameState>,

// åŠ¨æ€æ•°ç»„ï¼Ÿéœ€è¦é‡æ–°åˆ†é…è´¦æˆ·ç©ºé—´
// æˆ–è€…æ‹†åˆ†æˆå¤šä¸ªè´¦æˆ·
```

### 4. å¹¶å‘å’ŒçŠ¶æ€ç®¡ç†

**Sui**ï¼š
- Shared Object è‡ªåŠ¨å¤„ç†å¹¶å‘
- Move çš„çº¿æ€§ç±»å‹ç³»ç»Ÿé˜²æ­¢èµ„æºå¤åˆ¶

**Solana**ï¼š
- å†™å…¥åŒä¸€è´¦æˆ·éœ€è¦åºåˆ—åŒ–ï¼ˆå¯èƒ½å¤±è´¥é‡è¯•ï¼‰
- æ²¡æœ‰ç¼–è¯‘æ—¶èµ„æºå®‰å…¨ä¿è¯
- éœ€è¦æ‰‹åŠ¨ç®¡ç†è´¦æˆ·é”

### 5. å¼€å‘ä½“éªŒå¯¹æ¯”

| æ–¹é¢ | Sui (Move) | Solana (Rust/Anchor) |
|-----|-----------|---------------------|
| **å­¦ä¹ æ›²çº¿** | ä¸­ç­‰ | é™¡å³­ |
| **ç±»å‹å®‰å…¨** | èµ„æºå®‰å…¨ + çº¿æ€§ç±»å‹ | æ ‡å‡† Rust |
| **é”™è¯¯æç¤º** | æ¸…æ™° | å¤æ‚ï¼ˆæ¶‰åŠPDAæ¨å¯¼ç­‰ï¼‰|
| **æµ‹è¯•** | `sui move test` | `anchor test`ï¼ˆéœ€è¦æœ¬åœ°èŠ‚ç‚¹ï¼‰|
| **éƒ¨ç½²** | ç®€å• | éœ€è¦å¤„ç†ç§Ÿé‡‘ã€ç©ºé—´ |

---

## ä¸€ã€Sui vs Solana æ ¸å¿ƒå·®å¼‚

| ç»´åº¦ | Sui | Solana |
|-----|-----|--------|
| **ç¼–ç¨‹è¯­è¨€** | Move | Rust (Anchoræ¡†æ¶) |
| **æ•°æ®æ¨¡å‹** | Object-based (å¯¹è±¡èƒ½åŠ›) | Account-based (è´¦æˆ·æ¨¡å‹) |
| **å¹¶å‘æ¨¡å‹** | Shared Object è‡ªåŠ¨å¹¶å‘ | éœ€è¦æ˜¾å¼è´¦æˆ·é”å®š |
| **å­˜å‚¨** | Object å†…åµŒå­˜å‚¨ | PDA + ç§Ÿé‡‘æœºåˆ¶ |
| **äº¤æ˜“å¤§å°** | è¾ƒå¤§ (~128KB) | å—é™ (~1232 å­—èŠ‚) |
| **Gas æ¨¡å‹** | è®¡ç®—+å­˜å‚¨ | è®¡ç®—å•å…ƒ(CU) + ç§Ÿé‡‘ |
| **éšæœºæ•°** | åŸç”Ÿ Random æ¨¡å— | éœ€è¦ VRF æˆ–é“¾ä¸‹é¢„è¨€æœº |
| **äº‹ä»¶** | åŸç”Ÿ Move Events | Program Logs |

---

## äºŒã€æ¶æ„æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆ Aï¼šçº¯é“¾ä¸Šæ¶æ„ (Full On-Chain)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Solana Program                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Game Program (Rust/Anchor)                            â”‚
â”‚  â”œâ”€ create_game()                                       â”‚
â”‚  â”œâ”€ join_game()                                         â”‚
â”‚  â”œâ”€ roll_and_step()  â† æ ¸å¿ƒé€»è¾‘                         â”‚
â”‚  â”œâ”€ use_card()                                          â”‚
â”‚  â”œâ”€ buy_building()                                      â”‚
â”‚  â””â”€ end_turn()                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Accounts (PDA)                                         â”‚
â”‚  â”œâ”€ GameState       [game_id]                           â”‚
â”‚  â”œâ”€ PlayerState     [game_id, player_pubkey]            â”‚
â”‚  â”œâ”€ MapData         [map_template_id]                   â”‚
â”‚  â””â”€ GlobalConfig    [program_id]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cocos Creator     â”‚
â”‚   Client            â”‚
â”‚   (TypeScript)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼˜ç‚¹**ï¼š
- å®Œå…¨å»ä¸­å¿ƒåŒ–ï¼Œæ— éœ€ä¿¡ä»»æœåŠ¡å™¨
- æ¸¸æˆçŠ¶æ€å®Œå…¨å¯éªŒè¯
- ä¸å½“å‰ Sui æ¶æ„æœ€ç›¸ä¼¼

**ç¼ºç‚¹**ï¼š
- Solana äº¤æ˜“å¤§å°é™åˆ¶ï¼ˆ~1232å­—èŠ‚ï¼‰å¯èƒ½ä¸å¤Ÿå¤æ‚è·¯å¾„
- éšæœºæ•°éœ€è¦é¢å¤–å¤„ç†ï¼ˆSwitchboard VRFï¼‰
- è®¡ç®—æˆæœ¬è¾ƒé«˜
- å¤šäººå¹¶å‘åŒä¸€æ¸¸æˆéœ€è¦ä»”ç»†è®¾è®¡

**é€‚ç”¨åœºæ™¯**ï¼šæ¸¸æˆé€»è¾‘ç®€å•ã€å•å±€ç©å®¶å°‘

---

### æ–¹æ¡ˆ Bï¼šæ··åˆæ¶æ„ (Hybrid - æ¨è)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é“¾ä¸Šå±‚ (On-Chain)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Asset Program (æ ¸å¿ƒèµ„äº§)                               â”‚
â”‚  â”œâ”€ åœ°äº§ NFT (Property NFT)                            â”‚
â”‚  â”œâ”€ å¡ç‰Œ NFT (Card NFT)                                â”‚
â”‚  â””â”€ æ¸¸æˆä»£å¸ (Game Token)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Settlement Program (ç»“ç®—å±‚)                            â”‚
â”‚  â”œâ”€ start_game()      â†’ é”å®šå…¥åœºè´¹                      â”‚
â”‚  â”œâ”€ submit_result()   â†’ æäº¤æ¸¸æˆç»“æœ                    â”‚
â”‚  â”œâ”€ claim_rewards()   â†’ é¢†å–å¥–åŠ±                        â”‚
â”‚  â””â”€ dispute()         â†’ äº‰è®®ä»²è£                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ ç­¾åéªŒè¯
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é“¾ä¸‹å±‚ (Off-Chain)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Game Server (Node.js/Rust)                            â”‚
â”‚  â”œâ”€ æ¸¸æˆæˆ¿é—´ç®¡ç†                                        â”‚
â”‚  â”œâ”€ å›åˆé€»è¾‘æ‰§è¡Œ                                        â”‚
â”‚  â”œâ”€ çŠ¶æ€åŒæ­¥ (WebSocket)                               â”‚
â”‚  â”œâ”€ éšæœºæ•°ç”Ÿæˆ (commit-reveal æˆ– VRF)                  â”‚
â”‚  â””â”€ ç”Ÿæˆå¯éªŒè¯çš„æ¸¸æˆæ—¥å¿—                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cocos Creator     â”‚
â”‚   Client            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼˜ç‚¹**ï¼š
- ä½å»¶è¿Ÿï¼Œå®æ—¶æ¸¸æˆä½“éªŒ
- æ— äº¤æ˜“å¤§å°é™åˆ¶
- çµæ´»çš„éšæœºæ•°æ–¹æ¡ˆ
- é“¾ä¸Šåªå¤„ç†èµ„äº§å’Œç»“ç®—ï¼Œæˆæœ¬ä½

**ç¼ºç‚¹**ï¼š
- éœ€è¦è¿è¥æœåŠ¡å™¨
- å¼•å…¥ä¸€å®šç¨‹åº¦çš„ä¿¡ä»»å‡è®¾
- éœ€è¦è®¾è®¡é˜²ä½œå¼Šæœºåˆ¶

**é€‚ç”¨åœºæ™¯**ï¼šå¤æ‚æ¸¸æˆé€»è¾‘ã€å®æ—¶å¤šäººå¯¹æˆ˜

---

### æ–¹æ¡ˆ Cï¼šRollup/Session Key æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Solana L1                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Registry Program                                       â”‚
â”‚  â”œâ”€ ç©å®¶èµ„äº§æ‰˜ç®¡                                        â”‚
â”‚  â”œâ”€ Session Key æ³¨å†Œ                                    â”‚
â”‚  â””â”€ çŠ¶æ€æ ¹æäº¤                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ çŠ¶æ€æäº¤
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Game Rollup / SVM                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç‹¬ç«‹çš„æ¸¸æˆæ‰§è¡Œç¯å¢ƒ                                      â”‚
â”‚  â”œâ”€ å®Œæ•´æ¸¸æˆé€»è¾‘ï¼ˆç±»ä¼¼ Sui Moveï¼‰                       â”‚
â”‚  â”œâ”€ å³æ—¶äº¤æ˜“ç¡®è®¤                                        â”‚
â”‚  â”œâ”€ ä½/é›¶ gas                                          â”‚
â”‚  â””â”€ å®šæœŸçŠ¶æ€æ ¹æäº¤åˆ° L1                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼˜ç‚¹**ï¼š
- æœ€ä½³ç”¨æˆ·ä½“éªŒï¼ˆå³æ—¶ç¡®è®¤ã€é›¶gasï¼‰
- ä¿æŒå®Œå…¨é“¾ä¸Šå¯éªŒè¯
- å¯æ‰©å±•æ€§å¼º

**ç¼ºç‚¹**ï¼š
- æŠ€æœ¯å¤æ‚åº¦æœ€é«˜
- ç”Ÿæ€è¿˜åœ¨å‘å±•ä¸­ï¼ˆMagicBlockã€Sonic SVMç­‰ï¼‰
- éœ€è¦é¢å¤–çš„åŸºç¡€è®¾æ–½

**é€‚ç”¨åœºæ™¯**ï¼šé•¿æœŸå‘å±•ã€è¿½æ±‚æè‡´ä½“éªŒ

---

## ä¸‰ã€æ–¹æ¡ˆ B è¯¦ç»†è®¾è®¡ï¼ˆæ¨èï¼‰

### 3.1 é“¾ä¸Š Program è®¾è®¡

```rust
// === Asset Program (SPL Token / Metaplex) ===

// æ¸¸æˆä»£å¸
pub struct GameToken {
    // ä½¿ç”¨ SPL Token æ ‡å‡†
}

// åœ°äº§ NFT (Metaplex Core)
pub struct PropertyNFT {
    pub map_id: Pubkey,
    pub building_id: u16,
    pub level: u8,
    pub owner: Pubkey,
}

// === Settlement Program (Anchor) ===

#[account]
pub struct GameSession {
    pub game_id: [u8; 32],
    pub players: Vec<Pubkey>,      // æœ€å¤š4äºº
    pub stakes: Vec<u64>,          // æ¯äººå…¥åœºè´¹
    pub status: GameStatus,        // Ready/Active/Settled/Disputed
    pub server_pubkey: Pubkey,     // æˆæƒæœåŠ¡å™¨
    pub result_hash: Option<[u8; 32]>,  // æ¸¸æˆç»“æœå“ˆå¸Œ
    pub created_at: i64,
    pub settled_at: Option<i64>,
}

#[derive(AnchorSerialize, AnchorDeserialize)]
pub enum GameStatus {
    Ready,
    Active,
    Settled,
    Disputed,
}
```

### 3.2 é“¾ä¸‹æœåŠ¡å™¨è®¾è®¡

```typescript
// æ¸¸æˆçŠ¶æ€ï¼ˆä¸ Sui Move ç»“æ„å¯¹åº”ï¼‰
interface GameState {
  gameId: string;
  status: 'ready' | 'active' | 'ended';
  round: number;
  turn: number;
  activePlayerIndex: number;

  players: Player[];
  tiles: Tile[];
  buildings: Building[];
  npcs: NpcInstance[];

  pendingDecision: PendingDecision | null;
}

// æ¸¸æˆé€»è¾‘æœåŠ¡
class GameService {
  // æ ¸å¿ƒé€»è¾‘ 1:1 ç§»æ¤è‡ª Move
  rollAndStep(gameId: string, playerId: string, path: number[], diceCount: number): GameEvent;
  useCard(gameId: string, playerId: string, cardKind: number, params: number[]): GameEvent;
  buyBuilding(gameId: string, playerId: string): GameEvent;

  // ç”Ÿæˆå¯éªŒè¯çš„æ¸¸æˆæ—¥å¿—
  getVerifiableLog(): SignedGameLog;
}

// WebSocket å®æ—¶åŒæ­¥
class GameRoom {
  broadcast(event: GameEvent): void;
  handlePlayerAction(playerId: string, action: Action): void;
}
```

### 3.3 é˜²ä½œå¼Šæœºåˆ¶

```
1. Commit-Reveal éšæœºæ•°
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Server  â”‚      â”‚ Player  â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚                â”‚
        â”‚ commit(hash)   â”‚
        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
        â”‚                â”‚
        â”‚ reveal(seed)   â”‚
        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
        â”‚                â”‚
   final_random = hash(server_seed + player_seed)

2. å¯éªŒè¯æ¸¸æˆæ—¥å¿—
   - æ¯ä¸ªåŠ¨ä½œç­¾å
   - Merkle Tree å­˜å‚¨æ‰€æœ‰åŠ¨ä½œ
   - æœ€ç»ˆçŠ¶æ€æ ¹æäº¤é“¾ä¸Š

3. ç»æµæƒ©ç½š
   - ç©å®¶/æœåŠ¡å™¨è´¨æŠ¼
   - ä½œå¼Šè¢«è¯æ˜åˆ™æ²¡æ”¶è´¨æŠ¼
```

---

## å››ã€è´¦æˆ·æ¨¡å‹è®¾è®¡ï¼ˆæ–¹æ¡ˆA/Bé€šç”¨ï¼‰

### 4.1 PDA æ´¾ç”Ÿ

```rust
// å…¨å±€é…ç½®
seeds = [b"config"]

// æ¸¸æˆä¼šè¯
seeds = [b"game", game_id.as_ref()]

// ç©å®¶åœ¨æ¸¸æˆä¸­çš„çŠ¶æ€
seeds = [b"player", game_id.as_ref(), player_pubkey.as_ref()]

// åœ°å›¾æ¨¡æ¿
seeds = [b"map", map_id.as_ref()]

// å»ºç­‘çŠ¶æ€ï¼ˆå¦‚æœéœ€è¦ç‹¬ç«‹è´¦æˆ·ï¼‰
seeds = [b"building", game_id.as_ref(), &building_id.to_le_bytes()]
```

### 4.2 è´¦æˆ·å¤§å°è§„åˆ’

```
GameState è´¦æˆ· (~2KB):
â”œâ”€ game_id: 32 bytes
â”œâ”€ status: 1 byte
â”œâ”€ round: 2 bytes
â”œâ”€ turn: 1 byte
â”œâ”€ active_idx: 1 byte
â”œâ”€ players[4]: 4 Ã— 200 bytes = 800 bytes
â”œâ”€ buildings[100]: 100 Ã— 5 bytes = 500 bytes
â”œâ”€ npcs[50]: 50 Ã— 8 bytes = 400 bytes
â””â”€ misc: ~200 bytes

MapTemplate è´¦æˆ· (~10KB):
â”œâ”€ tiles[500]: 500 Ã— 16 bytes = 8KB
â””â”€ buildings_static[100]: 100 Ã— 20 bytes = 2KB

â†’ å•ä¸ªæ¸¸æˆçº¦éœ€ 12KBï¼Œè¿œä½äº 10MB é™åˆ¶
```

---

## äº”ã€Solana éšæœºæ•°æ–¹æ¡ˆæ·±åº¦åˆ†æ

### ä¸ºä»€ä¹ˆ Solana æ²¡æœ‰åŸç”Ÿéšæœºæ•°ï¼Ÿ

Solana çš„è®¾è®¡å“²å­¦æ˜¯"ç¡®å®šæ€§æ‰§è¡Œ"â€”â€”ç›¸åŒè¾“å…¥å¿…é¡»äº§ç”Ÿç›¸åŒè¾“å‡ºã€‚è¿™æ˜¯ä¸ºäº†ï¼š
- éªŒè¯è€…å¯ä»¥å¹¶è¡ŒéªŒè¯äº¤æ˜“
- æ”¯æŒä¹è§‚å¹¶å‘æ§åˆ¶
- å†å²äº¤æ˜“å¯é‡æ”¾éªŒè¯

è€Œ"éšæœº"å¤©ç„¶æ˜¯ä¸ç¡®å®šçš„ï¼Œæ‰€ä»¥éœ€è¦å¤–éƒ¨æ¥æºã€‚

### æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | å»¶è¿Ÿ | æˆæœ¬/æ¬¡ | å¯éªŒè¯ | äº¤æ˜“æ•° | å¤æ‚åº¦ | æ¨èåº¦ |
|-----|-----|--------|-------|-------|-------|-------|
| **Switchboard VRF** | 2-4ç§’ | ~0.002 SOL | âœ… | 2 | ä¸­ | â­â­â­â­ |
| **Pyth Entropy** | 1-2ç§’ | ~0.001 SOL | âœ… | 2 | ä¸­ | â­â­â­â­ |
| **Orao VRF** | 2-3ç§’ | ~0.002 SOL | âœ… | 2 | ä¸­ | â­â­â­ |
| **Commit-Reveal** | éœ€ç­‰å¯¹æ‰‹ | ~0 | âœ… | 2-3 | ä½ | â­â­â­ |
| **Slot Hash** | 0 | 0 | âŒ | 1 | ä½ | â­ (ä¸å®‰å…¨) |

### æ–¹æ¡ˆ 1: Switchboard VRFï¼ˆæœ€æˆç†Ÿï¼‰

```rust
// 1. åˆ›å»º VRF è´¦æˆ·ï¼ˆä¸€æ¬¡æ€§ï¼‰
// 2. è¯·æ±‚éšæœºæ•°
pub fn request_randomness(ctx: Context<RequestRandomness>) -> Result<()> {
    let vrf = &ctx.accounts.vrf;
    let switchboard_program = &ctx.accounts.switchboard_program;

    // è¯·æ±‚ VRFï¼Œæ”¯ä»˜è´¹ç”¨
    VrfRequestRandomness {
        vrf: vrf.to_account_info(),
        // ... å…¶ä»–è´¦æˆ·
    }.invoke()?;

    // è®¾ç½®æ¸¸æˆçŠ¶æ€ä¸º"ç­‰å¾…éšæœºæ•°"
    ctx.accounts.game.status = GameStatus::WaitingRandomness;
    Ok(())
}

// 3. å›è°ƒï¼ˆç”± Switchboard è°ƒç”¨ï¼‰
pub fn consume_randomness(ctx: Context<ConsumeRandomness>) -> Result<()> {
    let vrf = &ctx.accounts.vrf;
    let randomness = vrf.get_result()?;  // è·å–éšæœºæ•°

    // ç”¨éšæœºæ•°æ‰§è¡Œæ¸¸æˆé€»è¾‘
    let dice1 = (randomness[0] % 6) + 1;
    let dice2 = (randomness[1] % 6) + 1;

    execute_move(&mut ctx.accounts.game, dice1 + dice2)?;
    Ok(())
}
```

**ç”¨æˆ·ä½“éªŒæµç¨‹**ï¼š
```
ç”¨æˆ·ç‚¹å‡»"æ·éª°å­"
    â†’ é’±åŒ…ç­¾åäº¤æ˜“1ï¼ˆè¯·æ±‚VRFï¼‰
    â†’ UIæ˜¾ç¤º"æ­£åœ¨æ·éª°å­..."
    â†’ [ç­‰å¾…2-4ç§’]
    â†’ Switchboardå›è°ƒ
    â†’ UIè‡ªåŠ¨åˆ·æ–°æ˜¾ç¤ºç»“æœ
```

### æ–¹æ¡ˆ 2: Pyth Entropyï¼ˆè¾ƒæ–°ï¼Œå¯èƒ½æ›´å¿«ï¼‰

```rust
use pyth_entropy_sdk::*;

pub fn roll_dice(ctx: Context<RollDice>) -> Result<()> {
    // è¯·æ±‚ç†µ
    let entropy_request = EntropyRequest::new(
        &ctx.accounts.entropy_program,
        &ctx.accounts.entropy_account,
    )?;

    // ... ç±»ä¼¼æµç¨‹
}
```

### æ–¹æ¡ˆ 3: Commit-Revealï¼ˆè‡ªå»ºï¼Œé€‚åˆå¤šäººæ¸¸æˆï¼‰

```
é˜¶æ®µ1: Commitï¼ˆæ‰€æœ‰ç©å®¶æäº¤å“ˆå¸Œï¼‰
  ç©å®¶A: commit(hash(secretA))
  ç©å®¶B: commit(hash(secretB))

é˜¶æ®µ2: Revealï¼ˆæ‰€æœ‰ç©å®¶æ­ç¤ºï¼‰
  ç©å®¶A: reveal(secretA)
  ç©å®¶B: reveal(secretB)

æœ€ç»ˆéšæœºæ•° = hash(secretA + secretB)
```

**ä¼˜ç‚¹**ï¼šé›¶æˆæœ¬ã€å®Œå…¨å»ä¸­å¿ƒåŒ–
**ç¼ºç‚¹**ï¼šéœ€è¦æ‰€æœ‰ç©å®¶é…åˆã€ç©å®¶å¯èƒ½æ‹’ç»reveal

### æ–¹æ¡ˆ 4: Slot Hashï¼ˆâš ï¸ ä¸æ¨èç”¨äºé«˜ä»·å€¼åœºæ™¯ï¼‰

```rust
use solana_program::sysvar::slot_hashes;

pub fn get_pseudo_random(ctx: Context<GetRandom>) -> Result<u8> {
    let slot_hashes = &ctx.accounts.slot_hashes;
    let data = slot_hashes.try_borrow_data()?;

    // æœ€è¿‘çš„ slot hash ä½œä¸º"éšæœº"æº
    let recent_hash = &data[8..40];
    let dice = (recent_hash[0] % 6) + 1;
    Ok(dice)
}
```

**âš ï¸ é£é™©**ï¼šéªŒè¯è€…å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ“çºµ slot hashï¼Œä¸é€‚åˆæ¶‰åŠçœŸé‡‘ç™½é“¶çš„åœºæ™¯ã€‚

### æ¨èæ–¹æ¡ˆï¼šSwitchboard VRF + çŠ¶æ€æœºè®¾è®¡

```rust
#[derive(AnchorSerialize, AnchorDeserialize, Clone, PartialEq)]
pub enum TurnPhase {
    WaitingForRoll,      // ç­‰å¾…ç©å®¶å‘èµ·æ·éª°
    WaitingForVRF,       // å·²è¯·æ±‚VRFï¼Œç­‰å¾…å›è°ƒ
    WaitingForMove,      // å·²è·å¾—éª°å­å€¼ï¼Œç­‰å¾…é€‰æ‹©è·¯å¾„
    WaitingForDecision,  // åœåœ¨åœ°äº§ï¼Œç­‰å¾…è´­ä¹°/å‡çº§å†³ç­–
}

#[account]
pub struct GameState {
    pub turn_phase: TurnPhase,
    pub pending_dice: Option<[u8; 2]>,  // VRF å›è°ƒåå¡«å……
    // ...
}
```

**ä¸ Sui çš„ç”¨æˆ·ä½“éªŒå·®å¼‚**ï¼š

| æ“ä½œ | Sui | Solana (VRF) |
|-----|-----|-------------|
| æ·éª°å­ | 1æ¬¡ç‚¹å‡»ï¼Œå³æ—¶ç»“æœ | 1æ¬¡ç‚¹å‡»ï¼Œç­‰å¾…2-4ç§’ |
| äº¤æ˜“æ•° | 1 | 2 |
| è´¹ç”¨ | ~0.001 SUI | ~0.005 SOL (å«VRF) |

---

### æ²¡æœ‰åƒ Sui ä¸€æ ·ç®€å•çš„æ–¹æ¡ˆå—ï¼Ÿ

**ç®€çŸ­å›ç­”ï¼šæ²¡æœ‰ã€‚**

è¿™æ˜¯ Sui ç›¸å¯¹ Solana åœ¨æ¸¸æˆå¼€å‘ä¸Šçš„**æ ¸å¿ƒä¼˜åŠ¿**ã€‚Sui çš„éšæœºæ•°æ¨¡å—æ˜¯ä¸“é—¨ä¸ºæ¸¸æˆè®¾è®¡çš„ï¼š

```move
// Sui çš„ Random æ¨¡å—å®ç°åŸç†ï¼š
// 1. éªŒè¯è€…åœ¨æ¯ä¸ª epoch å¼€å§‹æ—¶é€šè¿‡é˜ˆå€¼ BLS ç­¾åç”Ÿæˆéšæœºç§å­
// 2. äº¤æ˜“æ‰§è¡Œæ—¶ï¼ŒåŸºäºç§å­ + äº¤æ˜“å“ˆå¸Œæ´¾ç”Ÿéšæœºæ•°
// 3. å¯¹å¼€å‘è€…å®Œå…¨é€æ˜ï¼Œä¸€è¡Œä»£ç æå®š
```

Solana çš„è®¾è®¡ä¼˜å…ˆçº§æ˜¯é«˜ååé‡å’Œä½å»¶è¿Ÿçš„é‡‘èäº¤æ˜“ï¼Œä¸æ˜¯æ¸¸æˆã€‚

---

## äº”-Bã€ä½æˆæœ¬éšæœºæ•°æ–¹æ¡ˆåˆ†æ

**é—®é¢˜**ï¼šVRF è´¹ç”¨ ~0.002 SOL/æ¬¡ï¼Œä¸€å±€æ¸¸æˆ 30-50 æ¬¡ â‰ˆ $10-20ï¼Œ**æ— æ³•æ¥å—**ã€‚

### æ–¹æ¡ˆå¯¹æ¯”ï¼ˆä½æˆæœ¬ä¼˜å…ˆï¼‰

| æ–¹æ¡ˆ | æˆæœ¬/æ¬¡ | å®‰å…¨æ€§ | å»¶è¿Ÿ | å¯è¡Œæ€§ |
|-----|--------|-------|-----|-------|
| Commit-Reveal (ç©å®¶é—´) | ~0 | é«˜ | éœ€ç­‰ç©å®¶ | â­â­â­â­ |
| VRFæ‰¹é‡é¢„ç”Ÿæˆ | ~0.0001 SOL | ä¸­ | æ¸¸æˆå¼€å§‹æ—¶ | â­â­â­ |
| Slot Hash | 0 | ä½âš ï¸ | 0 | â­â­ |
| é“¾ä¸‹ç­¾åéªŒè¯ | 0 | éœ€ä¿¡ä»» | 0 | â­â­â­ |

---

### æ–¹æ¡ˆ 1: Commit-Revealï¼ˆç©å®¶é—´ï¼‰â­ æ¨è

**åŸç†**ï¼šå¤šä¸ªç©å®¶å…±åŒè´¡çŒ®ç†µï¼Œä»»ä½•ä¸€æ–¹æ— æ³•å•ç‹¬é¢„æµ‹ç»“æœ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å›åˆå¼€å§‹æ—¶                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. Commit é˜¶æ®µï¼ˆæ‰€æœ‰ç©å®¶å¹¶è¡Œæäº¤ï¼‰                       â”‚
â”‚     ç©å®¶A: commit(hash(secret_A))                       â”‚
â”‚     ç©å®¶B: commit(hash(secret_B))                       â”‚
â”‚     ç©å®¶C: commit(hash(secret_C))                       â”‚
â”‚     [ç­‰å¾…æ‰€æœ‰äººæäº¤ï¼Œè¶…æ—¶ = é»˜è®¤å€¼]                       â”‚
â”‚                                                         â”‚
â”‚  2. Reveal + Execute é˜¶æ®µï¼ˆå½“å‰å›åˆç©å®¶æ‰§è¡Œï¼‰             â”‚
â”‚     å½“å‰ç©å®¶: reveal(secret_A) + execute_turn()         â”‚
â”‚     éšæœºæ•° = hash(secret_A + secret_B + secret_C        â”‚
â”‚              + game_id + round_number)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Solana å®ç°**ï¼š

```rust
#[account]
pub struct GameState {
    // ... å…¶ä»–å­—æ®µ
    pub round: u16,
    pub commitments: [Option<[u8; 32]>; 4],  // æœ€å¤š4äºº
    pub reveals: [Option<[u8; 32]>; 4],
    pub commit_deadline: i64,  // Unix timestamp
}

// ç©å®¶æäº¤ commitment
pub fn commit_entropy(
    ctx: Context<CommitEntropy>,
    commitment: [u8; 32],  // hash(secret)
) -> Result<()> {
    let game = &mut ctx.accounts.game;
    let player_idx = get_player_index(&game, &ctx.accounts.player.key())?;

    game.commitments[player_idx] = Some(commitment);
    Ok(())
}

// å½“å‰å›åˆç©å®¶ reveal å¹¶æ‰§è¡Œ
pub fn reveal_and_roll(
    ctx: Context<RevealAndRoll>,
    secret: [u8; 32],
    path: Vec<u16>,
) -> Result<()> {
    let game = &mut ctx.accounts.game;

    // éªŒè¯ reveal åŒ¹é… commitment
    let commitment = hash(&secret);
    require!(game.commitments[player_idx] == Some(commitment), Error::InvalidReveal);

    // åˆå¹¶æ‰€æœ‰ secrets ç”Ÿæˆéšæœºæ•°
    let mut entropy_source = Vec::new();
    for i in 0..game.player_count {
        if let Some(revealed) = &game.reveals[i] {
            entropy_source.extend_from_slice(revealed);
        } else {
            // æœª reveal çš„ç©å®¶ä½¿ç”¨é»˜è®¤å€¼ï¼ˆæƒ©ç½šæœºåˆ¶ï¼‰
            entropy_source.extend_from_slice(&DEFAULT_ENTROPY);
        }
    }
    entropy_source.extend_from_slice(&game.id.to_bytes());
    entropy_source.extend_from_slice(&game.round.to_le_bytes());

    let final_hash = hash(&entropy_source);
    let dice1 = (final_hash[0] % 6) + 1;
    let dice2 = (final_hash[1] % 6) + 1;

    execute_move(game, dice1 + dice2, &path)?;
    Ok(())
}
```

**æˆæœ¬**ï¼š
- æ¯å›åˆ 2 ä¸ªäº¤æ˜“/äººï¼ˆcommit + reveal/executeï¼‰
- ä»…åŸºç¡€ Solana äº¤æ˜“è´¹ ~0.000005 SOL
- **ä¸€å±€æ¸¸æˆæ€»è´¹ç”¨ < $0.01**

**ç¼ºç‚¹**ï¼š
- éœ€è¦æ‰€æœ‰ç©å®¶æ´»è·ƒ
- éœ€è¦è¶…æ—¶æœºåˆ¶å¤„ç†ä¸å“åº”çš„ç©å®¶
- ç•¥å¢åŠ å›åˆæ—¶é—´

---

### æ–¹æ¡ˆ 2: VRF æ‰¹é‡é¢„ç”Ÿæˆ

**åŸç†**ï¼šæ¸¸æˆå¼€å§‹æ—¶ä¸€æ¬¡æ€§è¯·æ±‚å¤§é‡éšæœºæ•°ï¼Œåç»­ä½¿ç”¨é¢„ç”Ÿæˆçš„

```rust
#[account]
pub struct GameState {
    // é¢„ç”Ÿæˆçš„éšæœºæ•°æ± ï¼ˆæ¸¸æˆå¼€å§‹æ—¶å¡«å……ï¼‰
    pub random_pool: [u8; 256],  // 256å­—èŠ‚ = è¶³å¤Ÿ100+æ¬¡ä½¿ç”¨
    pub random_index: u8,        // å½“å‰ä½¿ç”¨åˆ°å“ªä¸ªä½ç½®
}

pub fn start_game_with_vrf(ctx: Context<StartGame>) -> Result<()> {
    // ä¸€æ¬¡æ€§è¯·æ±‚ VRFï¼Œå¡«å…… random_pool
    // æˆæœ¬ï¼š0.002 SOL / å±€
    // æ‘Šè–„åï¼š0.002 / 50 = 0.00004 SOL/æ¬¡
}

pub fn roll_dice(ctx: Context<RollDice>) -> Result<()> {
    let game = &mut ctx.accounts.game;
    let idx = game.random_index as usize;

    let dice1 = (game.random_pool[idx] % 6) + 1;
    let dice2 = (game.random_pool[idx + 1] % 6) + 1;

    game.random_index += 2;
    // ...
}
```

**âš ï¸ å®‰å…¨é—®é¢˜**ï¼š
- éšæœºæ•°æ± åœ¨é“¾ä¸Šå…¬å¼€å¯è§ï¼
- ç©å®¶å¯ä»¥é¢„æµ‹æœªæ¥çš„éª°å­å€¼
- **ä¸é€‚åˆå¯¹æŠ—æ€§æ¸¸æˆ**

**é€‚ç”¨åœºæ™¯**ï¼š
- å•äººæ¸¸æˆ / PvE
- éå¯¹æŠ—æ€§å¤šäººï¼ˆåˆä½œæ¨¡å¼ï¼‰

---

### æ–¹æ¡ˆ 3: Slot Hashï¼ˆä½å®‰å…¨æ€§ï¼‰

**åŸç†**ï¼šä½¿ç”¨ Solana æœ€è¿‘ slot çš„å“ˆå¸Œä½œä¸ºç†µæº

```rust
pub fn roll_dice(ctx: Context<RollDice>) -> Result<()> {
    let clock = Clock::get()?;
    let slot_hashes = &ctx.accounts.slot_hashes;

    // è·å–æœ€è¿‘çš„ slot hash
    let recent_slot_hash = get_recent_slot_hash(slot_hashes)?;

    // æ··åˆæ›´å¤šç†µ
    let entropy = hash(&[
        &recent_slot_hash[..],
        &ctx.accounts.game.key().to_bytes(),
        &clock.unix_timestamp.to_le_bytes(),
        &ctx.accounts.player.key().to_bytes(),
    ].concat());

    let dice1 = (entropy[0] % 6) + 1;
    let dice2 = (entropy[1] % 6) + 1;
    // ...
}
```

**âš ï¸ é£é™©åˆ†æ**ï¼š
- éªŒè¯è€…**ç†è®ºä¸Š**å¯ä»¥æ“çºµ slot hash
- ä½†æ“çºµæˆæœ¬å¾ˆé«˜ï¼ˆéœ€è¦æ§åˆ¶å¤šä¸ªéªŒè¯è€…ï¼‰
- å¯¹äº**ä½ä»·å€¼æ¸¸æˆ**ï¼Œæ”»å‡»æ”¶ç›Š < æ”»å‡»æˆæœ¬

**é€‚ç”¨åœºæ™¯**ï¼š
- çº¯å¨±ä¹æ€§æ¸¸æˆï¼ˆæ— çœŸé‡‘ç™½é“¶ï¼‰
- å•å±€ä»·å€¼å¾ˆä½çš„æ¸¸æˆ
- MVP / åŸå‹éªŒè¯é˜¶æ®µ

---

### æ–¹æ¡ˆ 4: é“¾ä¸‹ç­¾åéªŒè¯ï¼ˆåŠå»ä¸­å¿ƒåŒ–ï¼‰

**åŸç†**ï¼šå¯ä¿¡æœåŠ¡å™¨ç”Ÿæˆéšæœºæ•° + ç­¾åï¼Œé“¾ä¸ŠéªŒè¯ç­¾å

```
å®¢æˆ·ç«¯ â†’ è¯·æ±‚éšæœºæ•° â†’ æœåŠ¡å™¨
                       â†“
              ç”Ÿæˆéšæœºæ•° + Ed25519ç­¾å
                       â†“
å®¢æˆ·ç«¯ â† è¿”å› (random, signature) â† æœåŠ¡å™¨
   â†“
æäº¤é“¾ä¸Šäº¤æ˜“ï¼Œåˆçº¦éªŒè¯ç­¾å
```

```rust
pub fn roll_dice_with_server_random(
    ctx: Context<RollDice>,
    server_random: [u8; 32],
    signature: [u8; 64],
    message: Vec<u8>,  // game_id + round + player
) -> Result<()> {
    // éªŒè¯æœåŠ¡å™¨ç­¾å
    let server_pubkey = &ctx.accounts.game.server_pubkey;
    require!(
        ed25519_verify(&signature, &message, server_pubkey),
        Error::InvalidSignature
    );

    let dice1 = (server_random[0] % 6) + 1;
    let dice2 = (server_random[1] % 6) + 1;
    // ...
}
```

**ä¼˜ç‚¹**ï¼š
- é›¶é¢å¤–æˆæœ¬
- å³æ—¶å“åº”
- æœåŠ¡å™¨æ— æ³•äº‹åç¯¡æ”¹ï¼ˆç­¾ååœ¨é“¾ä¸ŠéªŒè¯ï¼‰

**ç¼ºç‚¹**ï¼š
- æœåŠ¡å™¨å¯ä»¥é€‰æ‹©æ€§ä¸å“åº”
- æœåŠ¡å™¨å¯ä»¥é’ˆå¯¹ç‰¹å®šè¯·æ±‚ä½œå¼Š
- éœ€è¦è¿è¥æœåŠ¡å™¨

---

### ç»¼åˆæ¨è

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ | ç†ç”± |
|-----|---------|-----|
| **å¯¹æŠ—æ€§å¤šäººæ¸¸æˆ** | Commit-Reveal | å®‰å…¨ã€é›¶æˆæœ¬ã€å…¬å¹³ |
| **å•äºº/PvEæ¸¸æˆ** | Slot Hash æˆ– VRFé¢„ç”Ÿæˆ | ç®€å•ã€ä½æˆæœ¬ |
| **æœ‰è¿è¥æ–¹çš„æ¸¸æˆ** | é“¾ä¸‹ç­¾åéªŒè¯ | æœ€ä½³ä½“éªŒã€å¯å®¡è®¡ |
| **é«˜ä»·å€¼å¯¹æˆ˜** | VRFï¼ˆæ¥å—æˆæœ¬ï¼‰ | æœ€é«˜å®‰å…¨æ€§ |

**å¯¹äº Web3 Tycoonï¼ˆå¤šäººå¯¹æˆ˜å¤§å¯Œç¿ï¼‰**ï¼š

**æ¨è Commit-Reveal æ–¹æ¡ˆ**ï¼š
1. ç¬¦åˆ"å¯¹æŠ—æ€§å¤šäºº"åœºæ™¯
2. é›¶é¢å¤–æˆæœ¬
3. å®Œå…¨å»ä¸­å¿ƒåŒ–
4. å¯æ¥å—çš„å»¶è¿Ÿï¼ˆç­‰å¾…å…¶ä»–ç©å®¶commitï¼‰

**å›åˆæµç¨‹å˜ä¸º**ï¼š
```
æ—§æµç¨‹ï¼ˆSuiï¼‰ï¼š
  ç©å®¶ç‚¹å‡»æ·éª° â†’ å³æ—¶ç»“æœ

æ–°æµç¨‹ï¼ˆSolana + Commit-Revealï¼‰ï¼š
  å›åˆå¼€å§‹ â†’ æ‰€æœ‰ç©å®¶æäº¤commitmentï¼ˆå¯åå°è‡ªåŠ¨ï¼‰
  å½“å‰ç©å®¶ç‚¹å‡»æ·éª° â†’ reveal + æ‰§è¡Œ â†’ ç»“æœ
```

---

## äº”-Cã€ç°æœ‰ Solana æ¸¸æˆçš„å®é™…æ¶æ„

### è¡Œä¸šç°çŠ¶ï¼šæ··åˆæ¶æ„æ˜¯ä¸»æµ

**å…³é”®å‘ç°**ï¼šå‡ ä¹æ²¡æœ‰å¤æ‚çš„ Solana æ¸¸æˆé‡‡ç”¨"çº¯é“¾ä¸Š"æ¶æ„ï¼Œä¸»æµæ¨¡å¼æ˜¯ï¼š

```
é“¾ä¸Šï¼šèµ„äº§æ‰€æœ‰æƒ + ç»“ç®—
é“¾ä¸‹ï¼šæ¸¸æˆé€»è¾‘ + å®æ—¶äº¤äº’
```

---

### æ¶æ„åˆ†å±‚å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Layer 3: æ¸¸æˆå®¢æˆ·ç«¯                       â”‚
â”‚                 (Unity/Unreal/Web Browser)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Layer 2: æ¸¸æˆæ‰§è¡Œå±‚                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ–¹æ¡ˆA: ä¸­å¿ƒåŒ–æœåŠ¡å™¨ï¼ˆå¤§å¤šæ•°æ¸¸æˆï¼‰                            â”‚
â”‚  æ–¹æ¡ˆB: MagicBlock Ephemeral Rollupsï¼ˆæ–°å…´ï¼‰                 â”‚
â”‚  æ–¹æ¡ˆC: Sonic SVMï¼ˆæ¸¸æˆä¸“ç”¨L2ï¼‰                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Layer 1: Solana ä¸»ç½‘                      â”‚
â”‚                  (èµ„äº§ã€æ‰€æœ‰æƒã€æœ€ç»ˆç»“ç®—)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### æ¡ˆä¾‹åˆ†æ

#### 1. Star Atlas SAGE â€” å…¨é“¾ä¸Šç­–ç•¥æ¸¸æˆ

**æ¶æ„**ï¼š**å…¨é“¾ä¸Š**ï¼ˆå°‘æ•°æ´¾ï¼ŒæŠ€æœ¯éš¾åº¦æé«˜ï¼‰

```
ç‰¹ç‚¹ï¼š
- æ‰€æœ‰æ¸¸æˆé€»è¾‘å’ŒçŠ¶æ€å­˜å‚¨åœ¨ Solana é“¾ä¸Š
- æµè§ˆå™¨ç­–ç•¥æ¸¸æˆï¼ˆéå®æ—¶åŠ¨ä½œï¼‰
- è‡ªç ” Star Frame æ¡†æ¶å¤„ç†å¤æ‚çŠ¶æ€
- å›åˆåˆ¶/ç­–ç•¥ç±»ï¼Œå¯¹å»¶è¿Ÿä¸æ•æ„Ÿ
```

**ä¸ºä»€ä¹ˆèƒ½å…¨é“¾ä¸Š**ï¼š
- ç­–ç•¥æ¸¸æˆï¼Œä¸éœ€è¦æ¯«ç§’çº§å“åº”
- å·¨é¢èèµ„ï¼ˆ$5äº¿+ï¼‰ï¼Œè‡ªç ”åŸºç¡€è®¾æ–½
- æ¥å—è¾ƒé«˜çš„ gas æˆæœ¬
- ä¸“é—¨çš„å·¥ç¨‹å›¢é˜Ÿä¼˜åŒ–

**å‚è€ƒä»·å€¼**ï¼š
- è¯æ˜å…¨é“¾ä¸Šå¯è¡Œï¼Œä½†æˆæœ¬æé«˜
- ä»–ä»¬å¼€æºäº† [Star Frame](https://decrypt.co/199924/star-atlas-open-sources-game-development-tools-on-solana) æ¡†æ¶

---

#### 2. MagicBlock Ephemeral Rollups â€” æ–°å…´æ–¹æ¡ˆ

**æ¶æ„**ï¼š**ä¸´æ—¶ Rollup**ï¼ˆæŒ‰éœ€æ‰©å±•ï¼‰

```
æ ¸å¿ƒæ¦‚å¿µï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¸¸æˆå¼€å§‹                                           â”‚
â”‚    â†“                                                â”‚
â”‚  delegate(accounts) â†’ è´¦æˆ·ä¸´æ—¶å§”æ‰˜ç»™ Ephemeral      â”‚
â”‚    â†“                                                â”‚
â”‚  [æ¸¸æˆè¿›è¡Œä¸­ - 10-50ms å»¶è¿Ÿï¼Œæ—  gas]                â”‚
â”‚    â†“                                                â”‚
â”‚  undelegate() â†’ çŠ¶æ€å†™å› Solana ä¸»ç½‘                â”‚
â”‚    â†“                                                â”‚
â”‚  æ¸¸æˆç»“æŸ                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‰¹ç‚¹**ï¼š
- å»¶è¿Ÿï¼š10-50msï¼ˆvs ä¸»ç½‘ 400msï¼‰
- æ¸¸æˆä¸­æ—  gas è´¹ç”¨
- ç»“æŸåçŠ¶æ€åŸå­æ€§å†™å›ä¸»ç½‘
- æ— æ¡¥æ¥ã€æ— ç¢ç‰‡åŒ–

**é€‚ç”¨åœºæ™¯**ï¼š
- å®æ—¶å¯¹æˆ˜æ¸¸æˆ
- é«˜é¢‘äº¤äº’ï¼ˆå¦‚ [Supersize.gg](https://www.magicblock.xyz/)ï¼‰

**å¯¹æˆ‘ä»¬çš„å¯å‘**ï¼š
- **è¿™å¯èƒ½æ˜¯æœ€é€‚åˆå¤§å¯Œç¿çš„æ–¹æ¡ˆï¼**
- æ¸¸æˆæœŸé—´å… gas
- ç»“æŸæ—¶ç»“ç®—åˆ°ä¸»ç½‘

---

#### 3. Sonic SVM â€” æ¸¸æˆä¸“ç”¨ L2

**æ¶æ„**ï¼š**ç‹¬ç«‹ SVM é“¾**

```
Solana ä¸»ç½‘
    â†‘â†“ è·¨é“¾æ¡¥
Sonic SVM (æ¸¸æˆä¸“ç”¨é“¾)
    - ç‹¬ç«‹å…±è¯†
    - æ¸¸æˆä¼˜åŒ–
    - ä½è´¹ç”¨
```

**ç‰¹ç‚¹**ï¼š
- ç‹¬ç«‹çš„æ¸¸æˆé“¾
- æœ‰è‡ªå·±çš„éªŒè¯è€…
- éœ€è¦èµ„äº§æ¡¥æ¥

**å‚è€ƒ**ï¼š[sonic.game](http://sonic.game/)

---

#### 4. GameShiftï¼ˆGoogle Cloudï¼‰â€” ç®€åŒ–é›†æˆ

**æ¶æ„**ï¼š**API æŠ½è±¡å±‚**

```
æ¸¸æˆæœåŠ¡å™¨
    â†“ API è°ƒç”¨
GameShift (Google Cloud)
    â†“ å¤„ç†é“¾ä¸Šæ“ä½œ
Solana ä¸»ç½‘
```

**ç‰¹ç‚¹**ï¼š
- æ— éœ€å†™æ™ºèƒ½åˆçº¦
- API ç®¡ç† NFTã€é’±åŒ…ã€æ”¯ä»˜
- é€‚åˆ Web2 æ¸¸æˆå¿«é€Ÿæ¥å…¥

**é€‚ç”¨åœºæ™¯**ï¼š
- åªéœ€è¦èµ„äº§ä¸Šé“¾çš„æ¸¸æˆ
- Web2 æ¸¸æˆæƒ³åŠ  NFT åŠŸèƒ½

---

#### 5. Honeycomb Protocol â€” æ¸¸æˆå¼€å‘å¥—ä»¶

**æ¶æ„**ï¼š**é“¾ä¸‹æ‰§è¡Œ + é“¾ä¸ŠéªŒè¯**

```
æ¸¸æˆå®¢æˆ·ç«¯ â†â†’ Honeycomb Edge Client (é“¾ä¸‹)
                    â†“
              Honeycomb Protocol (é“¾ä¸Š)
                    â†“
                Solana ä¸»ç½‘
```

**ç‰¹ç‚¹**ï¼š
- é¢„å»ºåŠŸèƒ½ï¼ˆæˆå°±ã€èµ„æºã€è®¤è¯ï¼‰
- å‹ç¼©æŠ€æœ¯é™ä½å­˜å‚¨æˆæœ¬
- æŠ½è±¡å¤æ‚æ€§

---

### æ¶æ„é€‰æ‹©å†³ç­–æ ‘

```
ä½ çš„æ¸¸æˆæ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿ
    â”‚
    â”œâ”€â†’ å®æ—¶åŠ¨ä½œ/é«˜é¢‘äº¤äº’
    â”‚       â””â”€â†’ MagicBlock Ephemeral Rollups
    â”‚           æˆ– Sonic SVM
    â”‚
    â”œâ”€â†’ ç­–ç•¥/å›åˆåˆ¶ï¼ˆå¯æ¥å—å»¶è¿Ÿï¼‰
    â”‚       â”‚
    â”‚       â”œâ”€â†’ é¢„ç®—å……è¶³ + å›¢é˜Ÿå¼º
    â”‚       â”‚       â””â”€â†’ å…¨é“¾ä¸Šï¼ˆStar Atlas æ¨¡å¼ï¼‰
    â”‚       â”‚
    â”‚       â””â”€â†’ ä¸€èˆ¬å›¢é˜Ÿ
    â”‚               â””â”€â†’ æ··åˆæ¶æ„
    â”‚                   (é“¾ä¸‹é€»è¾‘ + é“¾ä¸Šèµ„äº§)
    â”‚
    â””â”€â†’ åªéœ€è¦ NFT/èµ„äº§åŠŸèƒ½
            â””â”€â†’ GameShift API
```

---

### å¯¹ Web3 Tycoon çš„å»ºè®®

**å¤§å¯Œç¿æ˜¯å›åˆåˆ¶ç­–ç•¥æ¸¸æˆ**ï¼Œæœ‰å‡ ä¸ªé€‰é¡¹ï¼š

| æ–¹æ¡ˆ | å¤æ‚åº¦ | æˆæœ¬ | å»ä¸­å¿ƒåŒ– | æ¨èåº¦ |
|-----|-------|-----|---------|-------|
| **MagicBlock ER** | ä¸­ | ä½ï¼ˆæ¸¸æˆä¸­å…gasï¼‰ | é«˜ | â­â­â­â­â­ |
| å…¨é“¾ä¸Š+Commit-Reveal | é«˜ | ä½ | æœ€é«˜ | â­â­â­â­ |
| æ··åˆï¼ˆæœåŠ¡å™¨+é“¾ä¸Šç»“ç®—ï¼‰ | ä½ | ä¸­ | ä¸­ | â­â­â­ |
| Sonic SVM | ä¸­ | ä½ | ä¸­ | â­â­â­ |

**æœ€ä½³æ¨èï¼šMagicBlock Ephemeral Rollups**

ç†ç”±ï¼š
1. æ¸¸æˆæœŸé—´ 10-50ms å»¶è¿Ÿï¼Œä½“éªŒå¥½
2. æ¸¸æˆæœŸé—´æ—  gasï¼ˆè§£å†³äº† VRF æˆæœ¬é—®é¢˜ï¼ï¼‰
3. ç»“æŸåçŠ¶æ€åŸå­æ€§å†™å›ä¸»ç½‘
4. ä¿æŒå®Œå…¨é“¾ä¸Šå¯éªŒè¯
5. æœ‰æˆç†Ÿçš„ [Bolt æ¡†æ¶](https://docs.magicblock.gg/pages/get-started/introduction/ephemeral-rollup)

**éšæœºæ•°åœ¨ Ephemeral Rollup ä¸­**ï¼š
- å¯ä»¥åœ¨ ER å†…ä½¿ç”¨ç®€å•çš„éšæœºæ–¹æ¡ˆï¼ˆæ— éœ€ VRFï¼‰
- å› ä¸º ER æ˜¯ä¸´æ—¶çš„ã€å•ä¸€æ’åºå™¨
- æœ€ç»ˆçŠ¶æ€å†™å›ä¸»ç½‘æ—¶æ˜¯å¯éªŒè¯çš„

---

---

## äº”-Dã€ä½¿ç”¨ Ephemeral Rollups / ZK çš„å®é™…æ¸¸æˆæ¡ˆä¾‹

### MagicBlock Ephemeral Rollups æ¡ˆä¾‹

| é¡¹ç›® | ç±»å‹ | æè¿° |
|-----|------|-----|
| **[Supersize.gg](https://www.magicblock.xyz/blog/supersize)** | å®æ—¶å¤šäººPvP | agar.io é£æ ¼ï¼Œæ¯30mså‘é€äº¤æ˜“ï¼Œ50msç¡®è®¤ |
| **Blob Battle** | é“¾ä¸Šå¯¹æˆ˜ | Slimecoin çš„å…¨é“¾ä¸Šæ¸¸æˆ |
| **XO** | ç¤¾äº¤åŒ¹é… | è¿ç§»åˆ° Solanaï¼Œä½¿ç”¨ ER é™ä½å»¶è¿Ÿ |
| **Flash Trade** | DeFi | å®æ—¶è¡ç”Ÿå“äº¤æ˜“ |
| **dTelecom** | é€šä¿¡ | å»ä¸­å¿ƒåŒ–è¯­éŸ³è§†é¢‘ |

**Supersize çš„æŠ€æœ¯æ•°æ®**ï¼š
> "We're sending transactions every 30 milliseconds. They're landing every 50 millisecondsâ€¦ Our servers are MagicBlock." â€“ Lewis, Supersize.gg

---

### Sui dungeon é¡¹ç›® â€” ZK è¯æ˜æ–¹æ¡ˆ

**é¡¹ç›®åœ°å€**ï¼š[github.com/0xwonj/dungeon](https://github.com/0xwonj/dungeon)

**æ¶æ„**ï¼š**é“¾ä¸‹æ‰§è¡Œ + ZK è¯æ˜ + é“¾ä¸ŠéªŒè¯**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸ Ephemeral Rollups å®Œå…¨ä¸åŒçš„æ–¹æ¡ˆï¼                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  å®¢æˆ·ç«¯æœ¬åœ°                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚  game-coreï¼ˆç¡®å®šæ€§çŠ¶æ€æœºï¼‰        â”‚                        â”‚
â”‚  â”‚  - çº¯ Rustï¼Œæ—  I/O               â”‚                        â”‚
â”‚  â”‚  - å¯åœ¨ ZK VM ä¸­æ‰§è¡Œ             â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚              â†“                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚  ZK è¯æ˜ç”Ÿæˆ                     â”‚                        â”‚
â”‚  â”‚  - SP1 / RISC0 / Arkworks       â”‚                        â”‚
â”‚  â”‚  - è¯æ˜"æˆ‘ç¡®å®æŒ‰è§„åˆ™ç©äº†"         â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚              â†“                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚  Sui åŒºå—é“¾                      â”‚                        â”‚
â”‚  â”‚  - å­˜å‚¨æ¸¸æˆä¼šè¯å¯¹è±¡               â”‚                        â”‚
â”‚  â”‚  - éªŒè¯ ZK è¯æ˜ï¼ˆGroth16ï¼‰        â”‚                        â”‚
â”‚  â”‚  - æŒ‘æˆ˜æœŸ + äº‰è®®è§£å†³              â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚              â†“                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚  Walrus å»ä¸­å¿ƒåŒ–å­˜å‚¨             â”‚                        â”‚
â”‚  â”‚  - å­˜å‚¨å®Œæ•´çš„ action æ—¥å¿—         â”‚                        â”‚
â”‚  â”‚  - ä»»ä½•äººå¯é‡æ”¾éªŒè¯               â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒç†å¿µ**ï¼š
> "ä¸€ä¸ªç¡®å®šæ€§çš„ä¸–ç•Œï¼Œæ¯ä¸€æ­¥éƒ½å¯ä»¥è¢«è¯æ˜æœ‰æ•ˆï¼Œä½†å¹¶éæ‰€æœ‰çœŸç›¸éƒ½æ˜¯å¯è§çš„"

**é€‚ç”¨åœºæ™¯**ï¼š
- å•äººæ¸¸æˆï¼ˆroguelikeã€RPGï¼‰
- éœ€è¦éšè—ä¿¡æ¯çš„æ¸¸æˆï¼ˆå¦‚è¿·é›¾ã€æš—é›·ï¼‰
- å¼‚æ­¥æ¸¸æˆï¼ˆä¸éœ€è¦å®æ—¶äº¤äº’ï¼‰

**å½“å‰é™åˆ¶**ï¼š
- SP1 5.2 çš„ Groth16 éªŒè¯å¯†é’¥ä¸ Sui çš„ groth16 æ¨¡å—ä¸å…¼å®¹
- ZK è¯æ˜ç”Ÿæˆè¾ƒæ…¢ï¼ˆç§’çº§åˆ°åˆ†é’Ÿçº§ï¼‰

---

### ä¸¤ç§æ–¹æ¡ˆå¯¹æ¯”

| ç»´åº¦ | Ephemeral Rollups | ZK Proof |
|-----|-------------------|----------|
| **ä»£è¡¨é¡¹ç›®** | Supersize (Solana) | Dungeon (Sui) |
| **æ‰§è¡Œä½ç½®** | ä¸´æ—¶ Rollup èŠ‚ç‚¹ | å®¢æˆ·ç«¯æœ¬åœ° |
| **å»¶è¿Ÿ** | 10-50ms | è¯æ˜ç”Ÿæˆç§’çº§+ |
| **å®æ—¶æ€§** | âœ… ä¼˜ç§€ | âŒ ä¸é€‚åˆ |
| **éšç§** | âŒ çŠ¶æ€å…¬å¼€ | âœ… å¯éšè—ä¿¡æ¯ |
| **æˆæœ¬** | æ¸¸æˆä¸­å… gas | é“¾ä¸ŠéªŒè¯ gas |
| **é€‚ç”¨æ¸¸æˆ** | å®æ—¶PvPã€å¤šäºº | å•äººã€å¼‚æ­¥ã€ç­–ç•¥ |
| **å»ä¸­å¿ƒåŒ–** | ä¸­ï¼ˆæ’åºå™¨ï¼‰ | é«˜ï¼ˆæ— éœ€ä¿¡ä»»æ‰§è¡Œè€…ï¼‰|
| **å¤æ‚åº¦** | ä¸­ | é«˜ï¼ˆZKç”µè·¯ï¼‰|

---

### å¯¹ Web3 Tycoonï¼ˆå¤§å¯Œç¿ï¼‰çš„é€‚ç”¨æ€§åˆ†æ

**å¤§å¯Œç¿ç‰¹ç‚¹**ï¼š
- å›åˆåˆ¶ï¼ˆéå®æ—¶ï¼‰
- å¤šäººå¯¹æˆ˜
- éœ€è¦éšæœºæ•°ï¼ˆéª°å­ï¼‰
- çŠ¶æ€å…¬å¼€ï¼ˆæ— éœ€éšè—ï¼‰

| æ–¹æ¡ˆ | é€‚ç”¨æ€§ | ç†ç”± |
|-----|-------|-----|
| **Ephemeral Rollups** | â­â­â­â­â­ | å¤šäººã€ä½æˆæœ¬ã€å®æ—¶åŒæ­¥ |
| **ZK Proof** | â­â­ | å¤šäººéœ€è¦æ¯äººç”Ÿæˆè¯æ˜ï¼Œå»¶è¿Ÿé«˜ |
| **çº¯é“¾ä¸Š + Commit-Reveal** | â­â­â­â­ | å¯è¡Œä½†å¤æ‚ |

**ç»“è®º**ï¼š
- **Ephemeral Rollups æ›´é€‚åˆå¤§å¯Œç¿**ï¼ˆå¤šäººå®æ—¶åŒæ­¥ï¼‰
- ZK Proof æ›´é€‚åˆ **å•äººæ¸¸æˆ** æˆ– **å¼‚æ­¥ç­–ç•¥æ¸¸æˆ**

---

## äº”-Eã€æŠ€æœ¯æ·±å…¥ï¼šEphemeral Rollups vs ZK Proof

### Sui ä¸Šæ˜¯å¦æœ‰ç±»ä¼¼ Ephemeral Rollups çš„æ–¹æ¡ˆï¼Ÿ

**ç®€çŸ­å›ç­”ï¼šç›®å‰æ²¡æœ‰ç›´æ¥ç­‰ä»·ç‰©ï¼Œä½† Sui å¯èƒ½ä¸éœ€è¦ã€‚**

**åŸå› **ï¼š
1. **Sui åŸç”Ÿå°±å¾ˆå¿«**ï¼š400ms æœ€ç»ˆç¡®è®¤ï¼ˆMysticeti å…±è¯†ï¼‰
2. **Sui åŸç”Ÿéšæœºæ•°**ï¼šä¸éœ€è¦å¤–éƒ¨ VRF
3. **Sui gas ä¾¿å®œ**ï¼šå¹³å‡ $0.011/äº¤æ˜“ï¼ˆæ¯” Solana ä¾¿å®œ 600%ï¼‰
4. **Sui å¹¶è¡Œå¤„ç†**ï¼šå¯¹è±¡æ¨¡å‹å¤©ç„¶æ”¯æŒå¹¶å‘

**Sui çš„ç›¸å…³æŠ€æœ¯**ï¼š

| æŠ€æœ¯ | æè¿° | çŠ¶æ€ |
|-----|------|-----|
| **ZK Tunnels** | é“¾ä¸‹æ‰§è¡Œ + é“¾ä¸ŠéªŒè¯ï¼Œå¯å¤„ç†å®æ—¶æ¸¸æˆ | ç ”å‘ä¸­ |
| **Mysticeti V2** | æ›´å¿«çš„å…±è¯†ï¼Œç›®æ ‡æ˜¯æ›´ä½å»¶è¿Ÿ | 2025 ä¸Šçº¿ |
| **Remora** | æ°´å¹³æ‰©å±•ï¼Œå¤šæœºå™¨åˆ†æ‹…è´Ÿè½½ | å¼€å‘ä¸­ |
| **Groth16** | åŸç”Ÿ ZK è¯æ˜éªŒè¯ | âœ… å·²æ”¯æŒ |
| **Space and Time** | ZK æ•°æ®æŸ¥è¯¢ï¼Œé“¾ä¸‹æ´»åŠ¨å¯éªŒè¯ä¸Šé“¾ | âœ… å·²é›†æˆ |

**å…³é”®æ´å¯Ÿ**ï¼š
> Sui çš„è®¾è®¡å“²å­¦æ˜¯"åŸç”Ÿè§£å†³é—®é¢˜"ï¼Œè€Œä¸æ˜¯"åŠ ä¸€å±‚è§£å†³é—®é¢˜"ã€‚
> è¿™ä¸ Solana éœ€è¦ Ephemeral Rollups æ¥å¼¥è¡¥å»¶è¿Ÿ/æˆæœ¬é—®é¢˜ä¸åŒã€‚

---

### æ·±å…¥è®²è§£ï¼šEphemeral Rollups

#### æ˜¯ä»€ä¹ˆï¼Ÿ

**ä¸´æ—¶æ€§æ‰§è¡Œç¯å¢ƒ**â€”â€”åƒæ¸¸æˆæˆ¿é—´ä¸€æ ·ï¼Œéœ€è¦æ—¶åˆ›å»ºï¼Œç»“æŸåæ¶ˆå¤±ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚   ä¼ ç»Ÿ L2 Rollupï¼ˆå¦‚ Arbitrumï¼‰                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  æ°¸ä¹…å­˜åœ¨                                                â”‚   â”‚
â”‚   â”‚  æœ‰è‡ªå·±çš„ä»£å¸                                            â”‚   â”‚
â”‚   â”‚  éœ€è¦æ¡¥æ¥èµ„äº§                                            â”‚   â”‚
â”‚   â”‚  ææ¬¾éœ€è¦ç­‰å¾…æœŸï¼ˆ7å¤©ï¼‰                                    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚   vs                                                            â”‚
â”‚                                                                 â”‚
â”‚   Ephemeral Rollups                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  ä¸´æ—¶å­˜åœ¨ï¼ˆæŒ‰éœ€åˆ›å»ºï¼Œç”¨å®Œæ¶ˆå¤±ï¼‰                            â”‚   â”‚
â”‚   â”‚  æ— æ–°ä»£å¸                                                â”‚   â”‚
â”‚   â”‚  æ— éœ€æ¡¥æ¥ï¼ˆç›´æ¥å§”æ‰˜è´¦æˆ·ï¼‰                                  â”‚   â”‚
â”‚   â”‚  å³æ—¶ç»“ç®—å›ä¸»ç½‘                                          â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ ¸å¿ƒåŸç†

**åŸºäº Solana è´¦æˆ·æ¨¡å‹çš„å§”æ‰˜æœºåˆ¶**ï¼š

```
æ­¥éª¤ 1: å§”æ‰˜ï¼ˆDelegateï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚   Solana ä¸»ç½‘                    Ephemeral Rollup               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚   â”‚ GameState   â”‚â”€â”€â”€â”€ å§”æ‰˜ â”€â”€â”€â”€â†’â”‚ GameState   â”‚                 â”‚
â”‚   â”‚ (locked)    â”‚               â”‚ (å¯ä¿®æ”¹)     â”‚                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                 â”‚
â”‚   è´¦æˆ·è¢«"é”å®š"ï¼Œä¸»ç½‘ä¸èƒ½ä¿®æ”¹       ER è·å¾—ä¸´æ—¶ä¿®æ”¹æƒ               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤ 2: é«˜é€Ÿæ‰§è¡Œ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚   Ephemeral Rollup å†…éƒ¨                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                         â”‚   â”‚
â”‚   â”‚   âš¡ 10-50ms å»¶è¿Ÿï¼ˆæ— å…±è¯†å¼€é”€ï¼‰                           â”‚   â”‚
â”‚   â”‚   ğŸ’° æ—  gas è´¹ç”¨                                        â”‚   â”‚
â”‚   â”‚   ğŸ® å¯è‡ªå®šä¹‰æ—¶é’Ÿã€ç‰©ç†å¼•æ“                               â”‚   â”‚
â”‚   â”‚   ğŸ“¦ æ‰€æœ‰äº¤æ˜“è®°å½•ä¿ç•™                                    â”‚   â”‚
â”‚   â”‚                                                         â”‚   â”‚
â”‚   â”‚   ç©å®¶A: roll_dice() â”€â”€â†’ 50ms â”€â”€â†’ ç»“æœ                   â”‚   â”‚
â”‚   â”‚   ç©å®¶B: buy_property() â”€â”€â†’ 50ms â”€â”€â†’ ç»“æœ               â”‚   â”‚
â”‚   â”‚   ...                                                   â”‚   â”‚
â”‚   â”‚                                                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­¥éª¤ 3: è§£é™¤å§”æ‰˜ï¼ˆUndelegateï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚   Ephemeral Rollup                Solana ä¸»ç½‘                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚   â”‚ GameState   â”‚â”€â”€â”€â”€ å†™å› â”€â”€â”€â”€â†’â”‚ GameState   â”‚                 â”‚
â”‚   â”‚ (æœ€ç»ˆçŠ¶æ€)   â”‚               â”‚ (æ›´æ–°)       â”‚                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â†“                                                       â”‚
â”‚   Rollup æ¶ˆå¤±                   ä¸»ç½‘çŠ¶æ€æ›´æ–°å®Œæˆ                  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å®‰å…¨æ¨¡å‹

**æ··åˆ Optimistic + ZK**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  1. é»˜è®¤ä¿¡ä»»ï¼ˆOptimisticï¼‰                                       â”‚
â”‚     - æ’åºå™¨ï¼ˆSequencerï¼‰æŒ‰è§„åˆ™æ‰§è¡Œ                              â”‚
â”‚     - å¦‚æœæ²¡äººæŒ‘æˆ˜ï¼ŒçŠ¶æ€ç›´æ¥ç”Ÿæ•ˆ                                  â”‚
â”‚                                                                 â”‚
â”‚  2. å¯æŒ‘æˆ˜ï¼ˆFraud Proofï¼‰                                        â”‚
â”‚     - ä»»ä½•äººå¯ä»¥æäº¤æ¬ºè¯ˆè¯æ˜                                     â”‚
â”‚     - å¦‚æœæ’åºå™¨ä½œå¼Šï¼ŒçŠ¶æ€å›æ»š                                    â”‚
â”‚                                                                 â”‚
â”‚  3. å¯†ç å­¦ä¿è¯                                                   â”‚
â”‚     - è´¦æˆ·å§”æ‰˜æœ‰ç­¾åéªŒè¯                                         â”‚
â”‚     - çŠ¶æ€è½¬æ¢æœ‰ Merkle è¯æ˜                                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ä»£ç ç¤ºä¾‹ï¼ˆBOLT æ¡†æ¶ï¼‰

```rust
// å®šä¹‰æ¸¸æˆç»„ä»¶ï¼ˆECS æ¨¡å¼ï¼‰
#[component]
pub struct Position {
    pub x: i64,
    pub y: i64,
}

#[component]
pub struct Player {
    pub cash: u64,
    pub in_jail: bool,
}

// å®šä¹‰ç³»ç»Ÿï¼ˆæ¸¸æˆé€»è¾‘ï¼‰
#[system]
pub mod move_player {
    pub fn execute(ctx: Context<MovePlayer>, dice: u8) -> Result<()> {
        let position = &mut ctx.accounts.position;
        position.x = (position.x + dice as i64) % 40;  // 40 æ ¼æ£‹ç›˜
        Ok(())
    }
}

// å§”æ‰˜åˆ° Ephemeral Rollup
pub fn start_game_session(ctx: Context<StartSession>) -> Result<()> {
    // å§”æ‰˜ GameState è´¦æˆ·åˆ° ER
    delegate_account(
        &ctx.accounts.game_state,
        &ctx.accounts.delegation_program,
    )?;
    Ok(())
}

// ç»“æŸæ—¶è§£é™¤å§”æ‰˜
pub fn end_game_session(ctx: Context<EndSession>) -> Result<()> {
    undelegate_account(
        &ctx.accounts.game_state,
        &ctx.accounts.delegation_program,
    )?;
    // çŠ¶æ€è‡ªåŠ¨å†™å› Solana ä¸»ç½‘
    Ok(())
}
```

#### å­¦æœ¯è®ºæ–‡

[ã€ŠEphemeral Rollups are All You Needã€‹](https://arxiv.org/abs/2311.02650) - Gabriele Picco & Andrea Fortugno (2023)

æå‡ºäº†ä½¿ç”¨ SVM + ECS æ¨¡å¼å®ç°æ¨¡å—åŒ–å…¨é“¾ä¸Šæ¸¸æˆçš„ç³»ç»Ÿæ–¹æ³•ã€‚

---

### æ·±å…¥è®²è§£ï¼šZK Proof æ¸¸æˆæ¶æ„

#### æ˜¯ä»€ä¹ˆï¼Ÿ

**é›¶çŸ¥è¯†è¯æ˜**â€”â€”è¯æ˜"æˆ‘åšäº†æŸäº‹"è€Œä¸é€éœ²"å…·ä½“æ€ä¹ˆåšçš„"ã€‚

åœ¨æ¸¸æˆä¸­ï¼šè¯æ˜"æˆ‘æŒ‰è§„åˆ™ç©äº†"è€Œä¸éœ€è¦é“¾ä¸Šæ‰§è¡Œæ¯ä¸€æ­¥ã€‚

#### æ ¸å¿ƒåŸç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  ä¼ ç»Ÿé“¾ä¸Šæ¸¸æˆ                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ¯ä¸ªæ“ä½œ = ä¸€ä¸ªé“¾ä¸Šäº¤æ˜“                                  â”‚   â”‚
â”‚  â”‚  move(1) â†’ tx1 â†’ ç­‰å¾…ç¡®è®¤                                â”‚   â”‚
â”‚  â”‚  move(2) â†’ tx2 â†’ ç­‰å¾…ç¡®è®¤                                â”‚   â”‚
â”‚  â”‚  move(3) â†’ tx3 â†’ ç­‰å¾…ç¡®è®¤                                â”‚   â”‚
â”‚  â”‚  ...                                                     â”‚   â”‚
â”‚  â”‚  æˆæœ¬ï¼šN ä¸ªæ“ä½œ = N æ¬¡ gas                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  vs                                                             â”‚
â”‚                                                                 â”‚
â”‚  ZK Proof æ¸¸æˆ                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æœ¬åœ°æ‰§è¡Œ 1000 ä¸ªæ“ä½œ                                     â”‚   â”‚
â”‚  â”‚  ç”Ÿæˆä¸€ä¸ª ZK è¯æ˜ï¼ˆ"æˆ‘ç¡®å®æŒ‰è§„åˆ™æ‰§è¡Œäº†è¿™ 1000 æ­¥"ï¼‰         â”‚   â”‚
â”‚  â”‚  æäº¤è¯æ˜åˆ°é“¾ä¸ŠéªŒè¯                                       â”‚   â”‚
â”‚  â”‚  æˆæœ¬ï¼š1 æ¬¡ gasï¼ˆæ— è®ºå¤šå°‘æ“ä½œï¼‰                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ZK è¯æ˜ç±»å‹

| ç±»å‹ | è¯æ˜å¤§å° | éªŒè¯é€Ÿåº¦ | ç”Ÿæˆé€Ÿåº¦ | é€‚ç”¨åœºæ™¯ |
|-----|---------|---------|---------|---------|
| **Groth16** | ~200å­—èŠ‚ | æœ€å¿« | æ…¢ï¼ˆéœ€ç”µè·¯ï¼‰ | å›ºå®šé€»è¾‘ |
| **PLONK** | ~500å­—èŠ‚ | å¿« | ä¸­ç­‰ | é€šç”¨ |
| **STARK** | ~50KB | ä¸­ | å¿« | å¤§è§„æ¨¡è®¡ç®— |
| **zkVM (SP1/RISC0)** | å¯å˜ | ä¸­ | æ…¢ | ä»»æ„ç¨‹åº |

#### éšæœºæ•°åœ¨ ZK ä¸­å¦‚ä½•å¤„ç†ï¼Ÿ

**é—®é¢˜**ï¼šZK è¯æ˜éœ€è¦ç¡®å®šæ€§ï¼Œä½†æ¸¸æˆéœ€è¦éšæœºæ•°

**è§£å†³æ–¹æ¡ˆï¼šCommit-Reveal + ZK**

```
1. æ¸¸æˆå¼€å§‹å‰ï¼š
   - é“¾ä¸Šç”Ÿæˆ/æäº¤ä¸€ä¸ªéšæœºç§å­ seed
   - seed å¯¹ç©å®¶ä¸å¯è§ï¼ˆå“ˆå¸Œæ‰¿è¯ºï¼‰

2. æ¸¸æˆè¿›è¡Œä¸­ï¼ˆæœ¬åœ°ï¼‰ï¼š
   - ç©å®¶çš„ç¬¬ N æ­¥éœ€è¦éšæœºæ•°
   - random_N = hash(seed + N + action_history)
   - è¿™æ˜¯ç¡®å®šæ€§çš„ï¼ç»™å®šç›¸åŒè¾“å…¥ï¼Œäº§ç”Ÿç›¸åŒè¾“å‡º

3. ç”Ÿæˆè¯æ˜ï¼š
   - è¯æ˜"æˆ‘ç”¨æ­£ç¡®çš„éšæœºæ•°æ‰§è¡Œäº†æ¸¸æˆ"
   - ä¸éœ€è¦è¯æ˜éšæœºæ•°æ˜¯æ€ä¹ˆæ¥çš„ï¼ˆseed æ˜¯å…¬å¼€è¾“å…¥ï¼‰

4. éªŒè¯ï¼š
   - é“¾ä¸ŠéªŒè¯è¯æ˜
   - seed è¢« revealï¼Œä»»ä½•äººå¯ä»¥é‡æ”¾éªŒè¯
```

#### ZK æ¸¸æˆçš„ç‹¬ç‰¹èƒ½åŠ›ï¼šéšè—ä¿¡æ¯

**è¿™æ˜¯ ZK ç›¸æ¯” Ephemeral Rollups çš„ç‹¬ç‰¹ä¼˜åŠ¿ï¼**

```
åœºæ™¯ï¼šæ‰‘å…‹æ¸¸æˆ

ä¼ ç»Ÿé“¾ä¸Š/ERï¼š
  - æ‰€æœ‰çŠ¶æ€å…¬å¼€
  - æ— æ³•éšè—æ‰‹ç‰Œ
  - ä¸é€‚åˆä¿¡æ¯ä¸å¯¹ç§°æ¸¸æˆ

ZK æ–¹æ¡ˆï¼š
  - ç©å®¶æœ¬åœ°æŒæœ‰æ‰‹ç‰Œï¼ˆç§æœ‰è¾“å…¥ï¼‰
  - ç”Ÿæˆè¯æ˜ï¼š"æˆ‘çš„å‡ºç‰Œç¬¦åˆè§„åˆ™"
  - ä¸é€éœ²æ‰‹ç‰Œå…·ä½“æ˜¯ä»€ä¹ˆ
  - æ¸¸æˆç»“æŸæ—¶ reveal æ‰‹ç‰Œ + éªŒè¯

è¿™å«åš "Private State" æˆ– "Committed Execution"
```

#### Sui ä¸Šçš„ ZK æ”¯æŒ

```move
// Sui åŸç”Ÿ Groth16 éªŒè¯
module game::zk_verifier {
    use sui::groth16;

    public fun verify_game_proof(
        vk: &groth16::PreparedVerifyingKey,
        proof: vector<u8>,
        public_inputs: vector<u8>
    ): bool {
        let proof_points = groth16::proof_points_from_bytes(proof);
        let inputs = groth16::public_proof_inputs_from_bytes(public_inputs);
        groth16::verify_groth16_proof(
            &groth16::bn254(),  // æ¤­åœ†æ›²çº¿
            vk,
            &inputs,
            &proof_points
        )
    }
}
```

---

### é€‰æ‹©æŒ‡å—

```
ä½ çš„æ¸¸æˆéœ€è¦...

å®æ—¶å¤šäººå¯¹æˆ˜ï¼Ÿ
    â”‚
    â”œâ”€â†’ æ˜¯ â†’ Ephemeral Rollups
    â”‚         (10-50ms å»¶è¿Ÿï¼Œå… gas)
    â”‚
    â””â”€â†’ å¦ â†’ ç»§ç»­ â†“

éœ€è¦éšè—ä¿¡æ¯ï¼Ÿï¼ˆæ‰‹ç‰Œã€è¿·é›¾ã€æš—é›·ï¼‰
    â”‚
    â”œâ”€â†’ æ˜¯ â†’ ZK Proof
    â”‚         (æ”¯æŒ Private State)
    â”‚
    â””â”€â†’ å¦ â†’ ç»§ç»­ â†“

å¯ä»¥æ¥å—å•äºº/å¼‚æ­¥ï¼Ÿ
    â”‚
    â”œâ”€â†’ æ˜¯ â†’ ZK Proof
    â”‚         (æœ¬åœ°æ‰§è¡Œï¼Œæ‰¹é‡éªŒè¯)
    â”‚
    â””â”€â†’ å¦ â†’ ç»§ç»­ â†“

Sui ä¸Šå¼€å‘ï¼Ÿ
    â”‚
    â”œâ”€â†’ æ˜¯ â†’ ç›´æ¥ç”¨ Sui åŸç”Ÿ
    â”‚         (400ms å¤Ÿç”¨ï¼Œgas ä¾¿å®œ)
    â”‚
    â””â”€â†’ å¦ (Solana) â†’ Ephemeral Rollups
                       æˆ– Commit-Reveal
```

---

## äº”-Fã€Dungeon é¡¹ç›®æ·±åº¦æ¶æ„åˆ†æ

**é¡¹ç›®åœ°å€**ï¼š[github.com/0xwonj/dungeon](https://github.com/0xwonj/dungeon)

### é¡¹ç›®å®šä½

> "ä¸€ä¸ªç¡®å®šæ€§çš„ä¸–ç•Œï¼Œæ¯ä¸€æ­¥éƒ½å¯ä»¥è¢«è¯æ˜æœ‰æ•ˆï¼Œä½†å¹¶éæ‰€æœ‰çœŸç›¸éƒ½æ˜¯å¯è§çš„"

**ç±»å‹**ï¼šå¯éªŒè¯çš„å•äºº Roguelike RPG
**ç›®çš„**ï¼šæ¢ç´¢ ZK åœ¨æ¸¸æˆä¸­çš„åº”ç”¨ï¼Œå®ç°å¯éªŒè¯çš„æ¸¸æˆæˆå°±

---

### ZK è¯æ˜ç³»ç»Ÿè¯¦è§£

#### ä¸‰ç§è¯æ˜æ¨¡å¼

```
æ¨¡å¼ 1: Stubï¼ˆå¼€å‘æ¨¡å¼ï¼‰âš¡
  cargo build                     # æ—  ZK ä¾èµ–ï¼Œå¿«é€Ÿç¼–è¯‘
  è¯æ˜ç”Ÿæˆï¼šè·³è¿‡
  ç”¨é€”ï¼šå¿«é€Ÿè¿­ä»£å¼€å‘

æ¨¡å¼ 2: zkVMï¼ˆå½“å‰é˜¶æ®µï¼‰ğŸ”§
  æ”¯æŒåç«¯ï¼šSP1ï¼ˆæ¨èï¼‰ã€RISC0

  å·¥ä½œåŸç†ï¼š
  1. åœ¨ zkVM ä¸­æ‰§è¡Œå®Œæ•´çš„ game-core
  2. zkVM è‡ªåŠ¨è®°å½•æ‰§è¡Œè½¨è¿¹
  3. åŸºäºè½¨è¿¹ç”Ÿæˆè¯æ˜

  ä¼˜ç‚¹ï¼šç®€å•ï¼Œå¤ç”¨ç°æœ‰æ¸¸æˆé€»è¾‘
  ç¼ºç‚¹ï¼šè¯æ˜ç”Ÿæˆæ…¢ï¼ˆ5-60ç§’ï¼‰ï¼Œè¯æ˜å¤§ï¼ˆ~200KBï¼‰

æ¨¡å¼ 3: Custom Circuitï¼ˆæœªæ¥é˜¶æ®µï¼‰ğŸš€
  æ‰‹å·¥ç¼–å†™ ZK ç”µè·¯ + Merkle Witness

  ä¼˜ç‚¹ï¼šè¯æ˜å¿«ï¼ˆ10-100msï¼‰ï¼Œè¯æ˜å°ï¼ˆ~10KBï¼‰
  ç¼ºç‚¹ï¼šéœ€è¦ç”µè·¯ä¸“å®¶ï¼Œå¼€å‘å‘¨æœŸæ•°æœˆ
```

#### è¯æ˜å†…å®¹

```
å…¬å¼€è¾“å…¥ï¼ˆPublic Inputsï¼‰â€”â€” é“¾ä¸Šå¯è§
  initial_state_hash    // æ¸¸æˆå¼€å§‹æ—¶çš„çŠ¶æ€å“ˆå¸Œ
  final_state_hash      // æ¸¸æˆç»“æŸæ—¶çš„çŠ¶æ€å“ˆå¸Œ
  actions_root          // æ‰€æœ‰æ“ä½œçš„ Merkle Root  â† å…³é”®ï¼
  rng_seed              // ä½¿ç”¨çš„éšæœºæ•°ç§å­

ç§æœ‰è¾“å…¥ï¼ˆPrivate Inputsï¼‰â€”â€” ä¸ä¸Šé“¾
  complete_action_log   // å®Œæ•´çš„æ“ä½œåºåˆ—
  intermediate_states   // ä¸­é—´çŠ¶æ€

è¯æ˜çš„å«ä¹‰ï¼š
"å­˜åœ¨ä¸€ä¸ªåˆæ³•çš„æ“ä½œåºåˆ—ï¼Œä½¿å¾—ï¼š
 1. ä» initial_state ç»è¿‡è¿™äº›æ“ä½œåˆ°è¾¾ final_state
 2. æ‰€æœ‰æ“ä½œéƒ½ç¬¦åˆæ¸¸æˆè§„åˆ™
 3. æ“ä½œåºåˆ—çš„ Merkle Root = actions_root"
```

---

### æ ¸å¿ƒå®‰å…¨æœºåˆ¶ï¼šactions_root

**ä¸ºä»€ä¹ˆ actions_root æ˜¯å…³é”®ï¼Ÿ**

æ²¡æœ‰ actions_root çš„æ”»å‡»åœºæ™¯ï¼š
- ä½œå¼Šè€…ä¿®æ”¹æœ¬åœ° AI ä»£ç ï¼Œè®©æ€ªç‰©ä¸æ”»å‡»
- ç”¨ä¿®æ”¹ç‰ˆè½»æ¾é€šå…³
- ç”Ÿæˆ ZK è¯æ˜ï¼ˆçŠ¶æ€è½¬æ¢æœ‰æ•ˆï¼‰
- ä¼ªé€ ä¸€ä»½"çœ‹èµ·æ¥æ­£å¸¸"çš„ action_log

æœ‰ actions_root çš„é˜²å¾¡ï¼š
- actions_root = MerkleRoot(æ‰€æœ‰æ“ä½œï¼ŒåŒ…æ‹¬ AI å†³ç­–)
- ä»»ä½•äººå¯ä»¥ä¸‹è½½ action_log é‡æ”¾éªŒè¯
- å¦‚æœé‡æ”¾ç»“æœä¸åŒ¹é… â†’ ä½œå¼Šè¢«å‘ç°

---

## äº”-Gã€Sui ä¸Šçš„ ZK æ–¹æ¡ˆå…¨æ™¯

### Sui åŸç”Ÿ ZK èƒ½åŠ›

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|-----|------|-----|
| **Groth16 éªŒè¯** | âœ… å·²ä¸Šçº¿ | `sui::groth16` æ¨¡å—ï¼Œæ”¯æŒ BN254/BLS12-381 |
| **zkLogin** | âœ… å·²ä¸Šçº¿ | ç”¨ Google/Apple ç™»å½•ï¼ŒZK éšè—èº«ä»½ |
| **zkSend** | âœ… å·²ä¸Šçº¿ | éšç§è½¬è´¦ |
| **åŸç”Ÿéšç§äº¤æ˜“** | ğŸ”œ 2026 | å¯ç¼–ç¨‹éšç§å±‚ï¼Œé€‰æ‹©æ€§æŠ«éœ² |

### zkVM æ–¹æ¡ˆå¯¹æ¯”

| ç»´åº¦ | SP1 (Succinct) | RISC0 |
|-----|---------------|-------|
| **æˆç†Ÿåº¦** | âœ… ç”Ÿäº§å°±ç»ª | âœ… ç”Ÿäº§å°±ç»ª |
| **å®¡è®¡** | Veridise, Cantina, KALOS | å¤šå®¶å®¡è®¡ |
| **ç”¨æˆ·** | Polygon, Celestia, Avail | å¹¿æ³›ç”Ÿæ€ |
| **é€Ÿåº¦** | å®£ç§°æ›´å¿« | å®£ç§°æ›´ä¾¿å®œ |
| **Sui æ”¯æŒ** | âœ… Soundness Labs é€‚é… | éœ€è¦è½¬æ¢ |

---

## å…­ã€ä¸ç°æœ‰ Move ä»£ç çš„æ˜ å°„

| Sui Move | Solana Rust | è¯´æ˜ |
|---------|-------------|-----|
| `public struct Game has key` | `#[account] pub struct GameState` | è´¦æˆ·ç»“æ„ |
| `Seat` capability | Signer éªŒè¯ | ç©å®¶èº«ä»½ |
| `AdminCap` | Program åˆå§‹åŒ–è€… | ç®¡ç†å‘˜æƒé™ |
| `transfer::share_object()` | PDA å…¬å…±è®¿é—® | å…±äº«çŠ¶æ€ |
| `event::emit()` | `emit!()` å® æˆ– msg!() | äº‹ä»¶æ—¥å¿— |
| `vector<T>` | `Vec<T>` | åŠ¨æ€æ•°ç»„ |
| `table::Table` | HashMap æˆ–å¤šè´¦æˆ· | é”®å€¼å­˜å‚¨ |
| `Random` æ¨¡å— | VRF / commit-reveal | éšæœºæ•° |

### å¯ç›´æ¥å¤ç”¨çš„é€»è¾‘

```rust
// ç§Ÿé‡‘è®¡ç®— - å‡ ä¹ 1:1 ç¿»è¯‘
pub fn calculate_toll(
    building: &Building,
    building_static: &BuildingStatic,
    rent_multipliers: &[u64],
    temple_multipliers: &[u64],
) -> u64 {
    let base_toll = building_static.base_toll;
    let level = building.level;

    // å°åœ°äº§
    if building_static.size == SIZE_1X1 {
        let base_multiplier = rent_multipliers[level as usize];
        let chain_multiplier = 100 + (chain_length - 1) * 20;
        let temple_multiplier = temple_multipliers.get(temple_count - 1).unwrap_or(&100);

        ((base_toll as u128)
            * (base_multiplier as u128)
            * (chain_multiplier as u128)
            * (*temple_multiplier as u128)
            / 1_000_000) as u64
    } else {
        // å¤§åœ°äº§å›ºå®šè¡¨
        large_building_costs[level as usize]
    }
}
```

---

## ä¸ƒã€å¼€å‘è·¯çº¿å›¾å»ºè®®

### Phase 1ï¼šåŸºç¡€æ¶æ„
- [ ] è®¾ç½® Anchor é¡¹ç›®ç»“æ„
- [ ] å®ç° GameToken (SPL Token)
- [ ] å®ç°åŸºç¡€ Settlement Program
- [ ] å®¢æˆ·ç«¯ Solana é’±åŒ…é›†æˆ

### Phase 2ï¼šæ ¸å¿ƒé€»è¾‘
- [ ] ç¿»è¯‘ game.move â†’ Rust
- [ ] ç¿»è¯‘ cards.move â†’ Rust
- [ ] å®ç°éšæœºæ•°æ–¹æ¡ˆ
- [ ] å®ç°åœ°å›¾æ¨¡æ¿åŠ è½½

### Phase 3ï¼šé“¾ä¸‹æœåŠ¡å™¨
- [ ] WebSocket æˆ¿é—´ç®¡ç†
- [ ] æ¸¸æˆçŠ¶æ€åŒæ­¥
- [ ] å¯éªŒè¯æ—¥å¿—ç”Ÿæˆ

### Phase 4ï¼šé›†æˆæµ‹è¯•
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•
- [ ] å®¢æˆ·ç«¯é›†æˆ
- [ ] Devnet éƒ¨ç½²

---

## å…«ã€å¾…è®¨è®ºé—®é¢˜

1. **æ¶æ„é€‰æ‹©**ï¼šå€¾å‘äºå“ªç§æ¶æ„ï¼Ÿ
   - A) çº¯é“¾ä¸Š
   - B) æ··åˆæ¶æ„ï¼ˆæ¨èï¼‰
   - C) Rollup/Session Key

2. **èµ„äº§è®¾è®¡**ï¼š
   - åœ°äº§æ˜¯å¦éœ€è¦ NFT åŒ–ï¼Ÿ
   - æ¸¸æˆä»£å¸æ˜¯å¦éœ€è¦ç‹¬ç«‹ Tokenï¼Ÿ

3. **å¤šäººæ¨¡å¼**ï¼š
   - æ˜¯å¦éœ€è¦æ”¯æŒå¼‚æ­¥å¯¹æˆ˜ï¼Ÿ
   - æˆ¿é—´åŒ¹é…æœºåˆ¶ï¼Ÿ

4. **éšæœºæ•°**ï¼š
   - å¯æ¥å—çš„å»¶è¿Ÿï¼Ÿ
   - æ˜¯å¦éœ€è¦å®Œå…¨å¯éªŒè¯ï¼Ÿ

5. **ç»æµæ¨¡å‹**ï¼š
   - å…¥åœºè´¹ / å¥–æ± è®¾è®¡ï¼Ÿ
   - æœåŠ¡å™¨è¿è¥æ¿€åŠ±ï¼Ÿ

---

## ä¹ã€å‚è€ƒé¡¹ç›®

- **Star Atlas (SAGE)**: æ··åˆæ¶æ„çš„å¤§å‹é“¾æ¸¸
- **Aurory**: Solana ä¸Šçš„å›åˆåˆ¶æ¸¸æˆ
- **Genopets**: Move-to-Earn + æ¸¸æˆèµ„äº§
- **MagicBlock Engine**: Solana æ¸¸æˆå¼•æ“
- **Clockwork**: è‡ªåŠ¨åŒ–è§¦å‘å™¨ï¼ˆå¯ç”¨äºå›åˆæ¨è¿›ï¼‰

---

## åã€MagicBlock Ephemeral Rollups æ·±åº¦è§£æ

### 10.1 æ ¸å¿ƒæ¦‚å¿µ

**ä¸€å¥è¯å®šä¹‰**ï¼šæŒ‰éœ€åˆ›å»ºçš„ä¸´æ—¶æ‰§è¡Œç¯å¢ƒï¼Œæ¸¸æˆç»“æŸåæ¶ˆå¤±ï¼ŒçŠ¶æ€å†™å›ä¸»ç½‘ã€‚

```
ç±»æ¯”ï¼šç½‘å§å¼€é»‘

ä¼ ç»Ÿ L2 Rollup = ä¹°ä¸€å°æ°¸ä¹…æœåŠ¡å™¨
- éœ€è¦ä¸€ç›´è¿è¡Œ
- éœ€è¦ç»´æŠ¤
- éœ€è¦è‡ªå·±çš„ä»£å¸
- èµ„äº§è¦æ¡¥æ¥è¿‡å»

Ephemeral Rollups = å»ç½‘å§å¼€ä¸€å±€
- å¼€å±€æ—¶åˆ›å»º"æˆ¿é—´"
- æ¸¸æˆä¸­é«˜é€Ÿæ‰§è¡Œ
- ç»“æŸåæˆ¿é—´æ¶ˆå¤±
- æˆ˜ç»©ï¼ˆçŠ¶æ€ï¼‰è‡ªåŠ¨ä¿å­˜åˆ°ä½ çš„è´¦æˆ·
```

### 10.2 ä¸ºä»€ä¹ˆéœ€è¦ Ephemeral Rollupsï¼Ÿ

**Solana çš„é—®é¢˜**ï¼š

| é—®é¢˜ | å½±å“ | Ephemeral Rollups è§£å†³æ–¹æ¡ˆ |
|-----|------|--------------------------|
| 400ms å‡ºå—æ—¶é—´ | å®æ—¶æ¸¸æˆå¡é¡¿ | 10-50ms å“åº” |
| æ¯ç¬”äº¤æ˜“æ”¶è´¹ | ä¸€å±€æ¸¸æˆ50æ¬¡æ“ä½œ=$1+ | æ¸¸æˆä¸­ 0 gas |
| VRF éšæœºæ•°è´µ | æ·éª°å­è¦ $0.5 | å†…éƒ¨éšæœºå…è´¹ |
| äº¤æ˜“å¯èƒ½å¤±è´¥ | çŠ¶æ€ä¸ä¸€è‡´ | å•ä¸€æ’åºå™¨ä¿è¯æˆåŠŸ |
| å…¨ç½‘å…±è¯† | æµªè´¹èµ„æº | åªæœ‰å‚ä¸è€…å…³å¿ƒ |

**æ ¸å¿ƒæ´å¯Ÿ**ï¼š
> ä¸€å±€å¤§å¯Œç¿æ¸¸æˆï¼Œå…¨ä¸–ç•Œåªæœ‰4ä¸ªç©å®¶å…³å¿ƒã€‚
> ä¸ºä»€ä¹ˆè¦è®©å…¨ç½‘éªŒè¯è€…éƒ½å‚ä¸å…±è¯†ï¼Ÿ

### 10.3 å§”æ‰˜æœºåˆ¶

**å…³é”®æ¦‚å¿µï¼šå§”æ‰˜ â‰  è½¬ç§»**

```
ä¼ ç»Ÿè·¨é“¾æ¡¥ï¼ˆè½¬ç§»ï¼‰ï¼š
  Chain A â†’ æ¡¥ â†’ Chain B
  - èµ„äº§åœ¨ A é“¾æ¶ˆå¤±
  - åœ¨ B é“¾é‡æ–°åˆ›å»º
  - éœ€è¦ä¿¡ä»»æ¡¥
  - ææ¬¾æœ‰ç­‰å¾…æœŸï¼ˆ7å¤©+ï¼‰

Ephemeral Rollupsï¼ˆå§”æ‰˜ï¼‰ï¼š
  Solana L1 â†’ å§”æ‰˜ â†’ ER
  - èµ„äº§å§‹ç»ˆåœ¨ Solana ä¸Š
  - ER åªè·å¾—"ä¸´æ—¶ä¿®æ”¹æƒ"
  - æ— éœ€æ¡¥ï¼Œæ— éœ€ä¿¡ä»»
  - å³æ—¶ç»“ç®—ï¼ˆæ¸¸æˆç»“æŸç«‹å³ç”Ÿæ•ˆï¼‰
```

### 10.4 å®‰å…¨ä¿è¯

1. **è´¦æˆ·æ‰€æœ‰æƒä¿è¯**
   - å§”æ‰˜éœ€è¦è´¦æˆ·æ‰€æœ‰è€…ç­¾å
   - åªæœ‰æ‰€æœ‰è€…èƒ½å‘èµ·å§”æ‰˜/è§£é™¤å§”æ‰˜
   - ER ä¸èƒ½å·èµ°ä½ çš„èµ„äº§

2. **çŠ¶æ€ä¸€è‡´æ€§ä¿è¯**
   - å§”æ‰˜æ—¶è®°å½•åˆå§‹çŠ¶æ€å“ˆå¸Œ
   - è§£é™¤å§”æ‰˜æ—¶æäº¤æœ€ç»ˆçŠ¶æ€ + Merkle è¯æ˜
   - ä¸»ç½‘éªŒè¯çŠ¶æ€è½¬æ¢æœ‰æ•ˆ

3. **è¶…æ—¶ä¿æŠ¤**
   - å§”æ‰˜æœ‰æœ€å¤§æ—¶é—´é™åˆ¶
   - è¶…æ—¶åè´¦æˆ·è‡ªåŠ¨è§£é”
   - é˜²æ­¢ ER æ°¸ä¹…é”å®šèµ„äº§

**æœ€åæƒ…å†µ**ï¼šæ’åºå™¨å®•æœºæˆ–ä½œæ¶
- åæœï¼šæ¸¸æˆä¸­æ–­ï¼ŒçŠ¶æ€å›æ»šåˆ°å§”æ‰˜å‰
- ä½ ä¸ä¼šä¸¢å¤±èµ„äº§ï¼Œåªæ˜¯è¿™å±€æ¸¸æˆä½œåºŸ

### 10.5 BOLT æ¡†æ¶

MagicBlock æä¾›äº† **BOLT** æ¡†æ¶ï¼ŒåŸºäº ECS (Entity-Component-System) æ¨¡å¼ã€‚

### 10.6 æ¸¸æˆç”Ÿå‘½å‘¨æœŸ

```
Phase 1: æ¸¸æˆåˆ›å»ºï¼ˆSolana ä¸»ç½‘ï¼‰
  - åˆ›å»º GameLobby è´¦æˆ·
  - ç©å®¶åŠ å…¥ï¼ˆè´¨æŠ¼å…¥åœºè´¹ï¼‰
  - é“¾ä¸Šäº¤æ˜“ï¼š~3-5 ç¬”ï¼Œè´¹ç”¨ï¼š~0.01 SOL

Phase 2: è¿›å…¥ Ephemeral Rollup
  - æ‰€æœ‰æ¸¸æˆè´¦æˆ·å§”æ‰˜åˆ° ER
  - ER åˆå§‹åŒ–æ¸¸æˆä¸–ç•Œ
  - é“¾ä¸Šäº¤æ˜“ï¼š1 ç¬”ï¼Œè´¹ç”¨ï¼š~0.005 SOL

Phase 3: æ¸¸æˆè¿›è¡Œï¼ˆEphemeral Rollup å†…ï¼‰
  - æ¯ä¸ªæ“ä½œ 50ms å“åº”
  - 0 gas è´¹ç”¨
  - éšæœºæ•°å…è´¹ä¸”å³æ—¶
  - WebSocket å®æ—¶åŒæ­¥åˆ°å®¢æˆ·ç«¯

Phase 4: æ¸¸æˆç»“æŸï¼ˆå›åˆ° Solana ä¸»ç½‘ï¼‰
  - è§£é™¤æ‰€æœ‰è´¦æˆ·å§”æ‰˜
  - æœ€ç»ˆçŠ¶æ€åŸå­æ€§å†™å› Solana
  - ç»“ç®—å¥–é‡‘

æ€»è´¹ç”¨å¯¹æ¯”ï¼š
  çº¯ Solana ä¸»ç½‘ï¼š~$25ï¼ˆå« VRFï¼‰
  Ephemeral Rollupsï¼š~$0.02
  èŠ‚çœï¼š99.9%+
```

### 10.7 éšæœºæ•°ä¼˜åŠ¿

**ER å†…å¯ä»¥æœ‰"å…è´¹"éšæœºæ•°**ï¼š
1. å•ä¸€æ’åºå™¨ï¼Œä¸éœ€è¦å¤šæ–¹å…±è¯†
2. æˆ‘ä»¬å·²ç»ä¿¡ä»»æ’åºå™¨æ‰§è¡Œäº¤æ˜“
3. å¦‚æœæ’åºå™¨ä½œå¼Šï¼Œæ¸¸æˆç»“æœæ— æ•ˆ

**æ·éª°å­æµç¨‹å¯¹æ¯”**ï¼š
- Solana + VRFï¼šç‚¹å‡» â†’ è¯·æ±‚VRF â†’ ç­‰å¾…2-4ç§’ â†’ å›è°ƒ â†’ æ˜¾ç¤ºç»“æœï¼Œè´¹ç”¨ ~$0.50
- Ephemeral Rollupsï¼šç‚¹å‡» â†’ roll_dice() â†’ 50ms â†’ æ˜¾ç¤ºç»“æœï¼Œè´¹ç”¨ $0

### 10.8 ä¸ Sui åŸç”Ÿæ–¹æ¡ˆå¯¹æ¯”

| ç»´åº¦ | Solana + ER | Sui Native |
|-----|------------|------------|
| å»¶è¿Ÿ | 50ms (ERå†…) | 400ms |
| Gas è´¹ç”¨ | ~$0 (ERå†…) | ~$0.01/tx |
| éšæœºæ•° | å…è´¹ (ERå†…) | å…è´¹ (åŸç”Ÿ) |
| å¤æ‚åº¦ | é«˜ (éœ€è¦ ER é›†æˆ) | ä½ (åŸç”Ÿæ”¯æŒ) |
| ç”Ÿæ€ | æ–°å…´ | æˆç†Ÿ |
| å¼€å‘ä½“éªŒ | Anchor + BOLT | Move |
| ä¸»ç½‘äº¤äº’ | å¼€å§‹/ç»“æŸæ—¶ | æ¯æ¬¡æ“ä½œ |

**ç»“è®º**ï¼š
- å¦‚æœä½ å·²ç»åœ¨ Sui ä¸Šæœ‰å¯ç”¨ç‰ˆæœ¬ â†’ Sui åŸç”Ÿæ–¹æ¡ˆå·²ç»è¶³å¤Ÿå¥½
- å¦‚æœä½ æƒ³åš Solana ç‰ˆæœ¬ â†’ Ephemeral Rollups æ˜¯ç›®å‰æœ€å¥½çš„æ–¹æ¡ˆ

### 10.9 å®é™…æ¡ˆä¾‹ï¼šSupersize

**Supersize** æ˜¯ MagicBlock æœ€çŸ¥åçš„æ¡ˆä¾‹ï¼Œä¸€ä¸ª agar.io é£æ ¼çš„å…¨é“¾ä¸Šæ¸¸æˆï¼š

- **ç±»å‹**ï¼šå®æ—¶å¤šäºº PvP
- **é“¾**ï¼šSolana + Ephemeral Rollups
- **äº¤æ˜“é¢‘ç‡**ï¼šæ¯ 30ms å‘é€ä¸€ç¬”äº¤æ˜“
- **ç¡®è®¤å»¶è¿Ÿ**ï¼š50ms
- **åŒæ—¶åœ¨çº¿**ï¼š100+ ç©å®¶

> "We're sending transactions every 30 milliseconds. They're landing every 50 millisecondsâ€¦ Our servers are MagicBlock." â€“ Lewis, Supersize.gg

### 10.10 å¼€å§‹ä½¿ç”¨ MagicBlock

```bash
# 1. å®‰è£… BOLT CLI
npm install -g @magicblock-labs/bolt-cli

# 2. åˆ›å»ºæ–°é¡¹ç›®
bolt init my-tycoon-game
cd my-tycoon-game

# 3. å®šä¹‰ Components
bolt component position
bolt component player-wallet
bolt component property

# 4. å®šä¹‰ Systems
bolt system roll-dice
bolt system buy-property
bolt system pay-rent

# 5. æ„å»º
bolt build

# 6. æµ‹è¯•ï¼ˆæœ¬åœ° ERï¼‰
bolt test

# 7. éƒ¨ç½²åˆ° MagicBlock devnet
bolt deploy --network devnet
```

**èµ„æº**ï¼š
- [MagicBlock å®˜ç½‘](https://www.magicblock.xyz/)
- [BOLT æ¡†æ¶æ–‡æ¡£](https://docs.magicblock.xyz/)
- [GitHub: magicblock-labs/bolt](https://github.com/magicblock-labs/bolt)
- [Ephemeral Rollups è®ºæ–‡](https://arxiv.org/abs/2311.02650)
- [Supersize æ¡ˆä¾‹ç ”ç©¶](https://www.magicblock.xyz/blog/supersize)

---

## åä¸€ã€æ€»ç»“

åŸºäºå½“å‰é¡¹ç›®çš„å¤æ‚åº¦ï¼ˆå›åˆåˆ¶å¤§å¯Œç¿ã€å¤šäººå¯¹æˆ˜ã€å¤æ‚çš„åœ°äº§ç³»ç»Ÿï¼‰ï¼Œ**æ¨èé‡‡ç”¨æ–¹æ¡ˆ Bï¼ˆæ··åˆæ¶æ„ï¼‰**ï¼š

1. **é“¾ä¸Š**ï¼šèµ„äº§ï¼ˆNFT/Tokenï¼‰+ ç»“ç®—ï¼ˆå…¥åœº/é¢†å¥–ï¼‰
2. **é“¾ä¸‹**ï¼šæ¸¸æˆé€»è¾‘æ‰§è¡Œ + å®æ—¶åŒæ­¥
3. **é˜²ä½œå¼Š**ï¼šcommit-reveal éšæœºæ•° + å¯éªŒè¯æ—¥å¿—

å¦‚æœé€‰æ‹© Solanaï¼Œ**MagicBlock Ephemeral Rollups** æ˜¯ç›®å‰æœ€é€‚åˆçš„æŠ€æœ¯æ–¹æ¡ˆï¼Œèƒ½å¤Ÿï¼š
- è§£å†³ VRF æˆæœ¬é—®é¢˜ï¼ˆæ¸¸æˆå†…å…è´¹éšæœºï¼‰
- æä¾›æä½å»¶è¿Ÿï¼ˆ50ms vs 400msï¼‰
- ä¿æŒé“¾ä¸Šå¯éªŒè¯æ€§
- æ¸¸æˆç»“æŸåçŠ¶æ€è‡ªåŠ¨å†™å›ä¸»ç½‘

è¿™ç§æ¶æ„èƒ½åœ¨ä¿æŒåŒºå—é“¾æ ¸å¿ƒä»·å€¼ï¼ˆèµ„äº§æ‰€æœ‰æƒã€å¯éªŒè¯ç»“ç®—ï¼‰çš„åŒæ—¶ï¼Œæä¾›æœ€ä½³çš„æ¸¸æˆä½“éªŒã€‚

---

## å‚è€ƒèµ„æº

### æŠ€æœ¯æ–‡æ¡£
- [Dungeon GitHub](https://github.com/0xwonj/dungeon)
- [MagicBlock Ephemeral Rollups](https://www.magicblock.xyz/)
- [Ephemeral Rollups è®ºæ–‡](https://arxiv.org/abs/2311.02650)
- [MagicBlock Guide to ERs](https://www.magicblock.xyz/blog/a-guide-to-ephemeral-rollups)
- [Supersize on MagicBlock](https://www.magicblock.xyz/blog/supersize)
- [MagicBlock BOLT Framework](https://github.com/magicblock-labs/bolt)
- [Sui Groth16 Documentation](https://docs.sui.io/guides/developer/cryptography/groth16)
- [Sui + Space and Time ZK Integration](https://decrypt.co/204654/sui-taps-space-time-bringing-zero-knowledge-tools-web3-games)

### æ¸¸æˆé¡¹ç›®
- [zkHoldem (ZK Poker)](https://zkholdem.xyz/)
- [zkShuffle Documentation](https://docs.manta.network/docs/zkShuffle/Overview)
- [Supersize.gg](https://supersize.gg/) - MagicBlock å®˜æ–¹æ¸¸æˆæ¡ˆä¾‹

### MagicBlock èèµ„ä¿¡æ¯
- **2024å¹´9æœˆ**: $3M Pre-Seed è½®ï¼ˆPlaceholder VC é¢†æŠ•ï¼‰
- **2024å¹´12æœˆ**: BOLT æ¡†æ¶å¼€æº
- **2025å¹´4æœˆ**: $7.5M Seed è½®ï¼ˆLightspeed Faction é¢†æŠ•ï¼‰
- **æ€»èèµ„**: $10.5M
