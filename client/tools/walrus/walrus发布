[安装walrus]
https://docs.wal.app/usage/setup.html?utm_source=chatgpt.com

# Run a first-time install using the latest Mainnet version.
curl -sSf https://install.wal.app | sh

[下载config文件]
curl https://docs.wal.app/setup/client_config.yaml -o ~/.config/walrus/client_config.yaml




[安装site-builder]
https://docs.wal.app/walrus-sites/tutorial-install.html

在该目录安装site-builder

主网：
SYSTEM=macos-arm64
curl https://storage.googleapis.com/mysten-walrus-binaries/site-builder-mainnet-latest-$SYSTEM -o site-builder
chmod +x site-builder

./site-builder --version

[下载config文件]
# mkdir -p ~/.config/walrus
curl https://raw.githubusercontent.com/MystenLabs/walrus-sites/refs/heads/mainnet/sites-config.yaml -o ~/.config/walrus/sites-config.yaml
# curl https://raw.githubusercontent.com/MystenLabs/walrus-sites/refs/heads/mainnet/sites-config.yaml -o .sites-config.yaml



[预估费用]
# walrus store ./your-file --epochs 5 --dry-run //不能用于文件夹


[准备部署文件]

# 使用自动化脚本复制文件（排除 assets 以节省存储成本）
./prepare-deploy.sh

# 或手动复制
# cd ../../tycoon_cocos && cocos build web-walrus
# cd -
# rsync -av --exclude='assets' ../../tycoon_cocos/build/web-walrus/ ./web-walrus/


[发布/更新]
# # 第一次部署（准备好文件后执行） # walrus主网一个epoch 14天， testnet 一个epoch 1天
./site-builder deploy web-walrus --epochs 5

# ./site-builder publish ../../tycoon_cocos/build/web-walrus --epochs 5


# # 全量更新（推荐）
./site-builder deploy web-walrus

# # # 第一次部署
# ./site-builder --config ~/.config/walrus/sites-config.yaml deploy ../../tycoon_cocos/build/web-walrus --epochs 5 

# # # 全量更新（推荐）
# ./site-builder --config ~/.config/walrus/sites-config.yaml deploy ../../tycoon_cocos/build/web-walrus


没测过
# # 或手动指定更新（等价但不自动创建）
# site-builder update ./build/web-desktop --object-id 0xabc123...

# # 或仅更新某个文件
# site-builder update-resource --object-id 0xabc123... --path index.html

# 想做一次完全重置、生成新 object
# site-builder publish ./build/web-desktop