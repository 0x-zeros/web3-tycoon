System.register([],function(e){"use strict";return{execute:function(){e({DEPRECATED_getWallets:function(){if(ts)return ts;if(ts=getWallets(),"undefined"==typeof window)return ts;const e=window.navigator.wallets||[];if(!Array.isArray(e))return console.error("window.navigator.wallets is not an array"),ts;const{register:t}=ts,push=(...e)=>e.forEach(e=>guard$1(()=>e({register:t})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push})})}catch(e){return console.error("window.navigator.wallets could not be set"),ts}return push(...e),ts},DEPRECATED_registerWallet:function(e){var t;registerWallet(e);try{((t=window.navigator).wallets||(t.wallets=[])).push(({register:t})=>t(e))}catch(e){console.error("window.navigator.wallets could not be pushed\n",e)}},arraysEqual,bytesEqual:function(e,t){return arraysEqual(e,t)},coinWithBalance:function({type:e=ui,balance:t,useGasCoin:n=!0}){let r=null;return i=>{if(r)return r;i.addIntentResolver(ci,resolveCoinBalance);const s="gas"===e?e:normalizeStructTag(e);return r=i.add(Be.Intent({name:ci,inputs:{},data:{type:s===ui&&n?"gas":s,balance:BigInt(t)}})),r}},concatBytes:function(e,...t){const n=t.reduce((e,t)=>e+t.length,e.length),r=new Uint8Array(n);r.set(e,0);for(const e of t)r.set(e,r.length);return r},deriveDynamicFieldID,deriveObjectID:function(e,t,n){const r="string"==typeof t?t:TypeTagSerializer.tagToString(t);return deriveDynamicFieldID(e,`0x2::derived_object::DerivedObjectKey<${r}>`,n)},formatAddress:function(e){if(e.length<=6)return e;const t=e.startsWith("0x")?2:0;return`0x${e.slice(t,t+4)}${Yt}${e.slice(-4)}`},formatDigest:function(e){return`${e.slice(0,10)}${Yt}`},fromBase64,fromHex,getFaucetHost:function(e){switch(e){case"testnet":return"https://faucet.testnet.sui.io";case"devnet":return"https://faucet.devnet.sui.io";case"localnet":return"http://127.0.0.1:9123";default:throw new Error(`Unknown network: ${e}`)}},getFaucetRequestStatus:async function(e){const t=await faucetRequest({host:e.host,path:`/v1/status/${e.taskId}`,headers:e.headers,method:"GET"});if(t.error)throw new Error(`Faucet request failed: ${t.error}`);return t},getFullnodeUrl:function(e){switch(e){case"mainnet":return"https://fullnode.mainnet.sui.io:443";case"testnet":return"https://fullnode.testnet.sui.io:443";case"devnet":return"https://fullnode.devnet.sui.io:443";case"localnet":return"http://127.0.0.1:9000";default:throw new Error(`Unknown network: ${e}`)}},getPureBcsSchema,getWallets,guard:function(e){try{e()}catch(e){console.error(e)}},isArgument:function(e){return is(le,e)},isSuiChain:function(e){return Ss.includes(e)},isSuiClient:function(e){return"object"==typeof e&&null!==e&&!0===e[mr]},isTransaction,isValidSuiAddress,isValidSuiNSName,isValidSuiObjectId,isValidTransactionDigest,isWalletStandardError:function(e,t){const n=e instanceof Error&&"WalletStandardError"===e.name;if(n)return void 0===t||e.context.__code===t;return!1},isWalletWithRequiredFeatureSet:function(e,t=[]){return[...ms,...t].every(t=>t in e.features)},normalizeStructTag,normalizeSuiAddress,normalizeSuiNSName,normalizeSuiObjectId,normalizedTypeToMoveTypeSignature,parseStructTag,pick:function(e,...t){const n={};for(const r of t)n[r]=e[r];return n},pureBcsSchemaFromTypeName,registerWallet,requestSuiFromFaucetV0:async function(e){const t=await faucetRequest({host:e.host,path:"/gas",body:{FixedAmountRequest:{recipient:e.recipient}},headers:e.headers,method:"POST"});if(t.error)throw new Error(`Faucet request failed: ${t.error}`);return t},requestSuiFromFaucetV1:async function(e){const t=await faucetRequest({host:e.host,path:"/v1/gas",body:{FixedAmountRequest:{recipient:e.recipient}},headers:e.headers,method:"POST"});if(t.error)throw new Error(`Faucet request failed: ${t.error}`);return t},requestSuiFromFaucetV2:async function(e){const t=await faucetRequest({host:e.host,path:"/v2/gas",body:{FixedAmountRequest:{recipient:e.recipient}},headers:e.headers,method:"POST"});if("Success"!==t.status)throw new Error(`Faucet request failed: ${t.status.Failure.internal}`);return t},safeCaptureStackTrace:function(...e){"captureStackTrace"in Error&&"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(...e)},signAndExecuteTransaction:async function(e,t){if(e.features["sui:signAndExecuteTransaction"])return e.features["sui:signAndExecuteTransaction"].signAndExecuteTransaction(t);if(!e.features["sui:signAndExecuteTransactionBlock"])throw new Error(`Provided wallet (${e.name}) does not support the signAndExecuteTransaction feature.`);const{signAndExecuteTransactionBlock:n}=e.features["sui:signAndExecuteTransactionBlock"],r=fr.from(await t.transaction.toJSON()),{digest:i,rawEffects:s,rawTransaction:a}=await n({account:t.account,chain:t.chain,transactionBlock:r,options:{showRawEffects:!0,showRawInput:!0}}),[{txSignatures:[o],intentMessage:{value:c}}]=Bt.SenderSignedData.parse(fromBase64(a)),u=Bt.TransactionData.serialize(c).toBase64();return{digest:i,signature:o,bytes:u,effects:toBase64(new Uint8Array(s))}},signTransaction:async function(e,t){if(e.features["sui:signTransaction"])return e.features["sui:signTransaction"].signTransaction(t);if(!e.features["sui:signTransactionBlock"])throw new Error(`Provided wallet (${e.name}) does not support the signTransaction feature.`);const{signTransactionBlock:n}=e.features["sui:signTransactionBlock"],r=fr.from(await t.transaction.toJSON()),{transactionBlockBytes:i,signature:s}=await n({transactionBlock:r,account:t.account,chain:t.chain});return{bytes:i,signature:s}},toBase64,toHex});var t,n={},r={};var i,s,a={};function requireIeee754(){return i||(i=1,a.read=function(e,t,n,r,i){var s,a,o=8*i-r-1,c=(1<<o)-1,u=c>>1,l=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,s=h&(1<<-l)-1,h>>=-l,l+=o;l>0;s=256*s+e[t+d],d+=f,l-=8);for(a=s&(1<<-l)-1,s>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===s)s=1-u;else{if(s===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),s-=u}return(h?-1:1)*a*Math.pow(2,s-r)},a.write=function(e,t,n,r,i,s){var a,o,c,u=8*s-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=l?(o=0,a=l):a+d>=1?(o=(t*c-1)*Math.pow(2,i),a+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&o,h+=p,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;e[n+h]=255&a,h+=p,a/=256,u-=8);e[n+h-p]|=128*g}),a}var o=(s||(s=1,function(e){const n=function(){if(t)return r;t=1,r.byteLength=function(e){var t=getLens(e),n=t[0],r=t[1];return 3*(n+r)/4-r},r.toByteArray=function(e){var t,r,s=getLens(e),a=s[0],o=s[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,o)),u=0,l=o>0?a-4:a;for(r=0;r<l;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===o&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===o&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},r.fromByteArray=function(t){for(var n,r=t.length,i=r%3,s=[],a=16383,o=0,c=r-i;o<c;o+=a)s.push(encodeChunk(t,o,o+a>c?c:o+a));return 1===i?(n=t[r-1],s.push(e[n>>2]+e[n<<4&63]+"==")):2===i&&(n=(t[r-2]<<8)+t[r-1],s.push(e[n>>10]+e[n>>4&63]+e[n<<2&63]+"=")),s.join("")};for(var e=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)e[a]=s[a],n[s.charCodeAt(a)]=a;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function tripletToBase64(t){return e[t>>18&63]+e[t>>12&63]+e[t>>6&63]+e[63&t]}function encodeChunk(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(tripletToBase64(r));return i.join("")}return n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63,r}(),i=requireIeee754(),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=Buffer,e.SlowBuffer=function(e){return+e!=e&&(e=0),Buffer.alloc(+e)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function createBuffer(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,Buffer.prototype),t}function Buffer(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(e)}return from(e,t,n)}function from(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!Buffer.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|byteLength(e,t);let r=createBuffer(n);const i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(isInstance(e,Uint8Array)){const t=new Uint8Array(e);return fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength)}return fromArrayLike(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer))return fromArrayBuffer(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(isInstance(e,SharedArrayBuffer)||e&&isInstance(e.buffer,SharedArrayBuffer)))return fromArrayBuffer(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return Buffer.from(r,t,n);const i=function(e){if(Buffer.isBuffer(e)){const t=0|checked(e.length),n=createBuffer(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||numberIsNaN(e.length)?createBuffer(0):fromArrayLike(e):"Buffer"===e.type&&Array.isArray(e.data)?fromArrayLike(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Buffer.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function allocUnsafe(e){return assertSize(e),createBuffer(e<0?0:0|checked(e))}function fromArrayLike(e){const t=e.length<0?0:0|checked(e.length),n=createBuffer(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function fromArrayBuffer(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,Buffer.prototype),r}function checked(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(i)return r?-1:utf8ToBytes(e).length;t=(""+t).toLowerCase(),i=!0}}function slowToString(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return asciiSlice(this,t,n);case"latin1":case"binary":return latin1Slice(this,t,n);case"base64":return base64Slice(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function swap(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function bidirectionalIndexOf(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),numberIsNaN(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Buffer.from(t,r)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,r,i){let s,a=1,o=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,o/=2,c/=2,n/=2}function read(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(s=n;s<o;s++)if(read(e,s)===read(t,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===c)return r*a}else-1!==r&&(s-=s-r),r=-1}else for(n+c>o&&(n=o-c),s=n;s>=0;s--){let n=!0;for(let r=0;r<c;r++)if(read(e,s+r)!==read(t,r)){n=!1;break}if(n)return s}return-1}function hexWrite(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const s=t.length;let a;for(r>s/2&&(r=s/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if(numberIsNaN(r))return a;e[n+a]=r}return a}function utf8Write(e,t,n,r){return blitBuffer(utf8ToBytes(t,e.length-n),e,n,r)}function asciiWrite(e,t,n,r){return blitBuffer(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function base64Write(e,t,n,r){return blitBuffer(base64ToBytes(t),e,n,r)}function ucs2Write(e,t,n,r){return blitBuffer(function(e,t){let n,r,i;const s=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,s.push(i),s.push(r);return s}(t,e.length-n),e,n,r)}function base64Slice(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function utf8Slice(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let s=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,o,c;switch(a){case 1:t<128&&(s=t);break;case 2:n=e[i+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(s=c));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:n=e[i+1],r=e[i+2],o=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&o)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&o,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return function(e){const t=e.length;if(t<=o)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=o));return n}(r)}e.kMaxLength=a,Buffer.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(e,t,n){return from(e,t,n)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(e,t,n){return function(e,t,n){return assertSize(e),e<=0?createBuffer(e):void 0!==t?"string"==typeof n?createBuffer(e).fill(t,n):createBuffer(e).fill(t):createBuffer(e)}(e,t,n)},Buffer.allocUnsafe=function(e){return allocUnsafe(e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(e)},Buffer.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Buffer.prototype},Buffer.compare=function(e,t){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),isInstance(t,Uint8Array)&&(t=Buffer.from(t,t.offset,t.byteLength)),!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=Buffer.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(isInstance(t,Uint8Array))i+t.length>r.length?(Buffer.isBuffer(t)||(t=Buffer.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!Buffer.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},s&&(Buffer.prototype[s]=Buffer.prototype.inspect),Buffer.prototype.compare=function(e,t,n,r,i){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),!Buffer.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let s=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0);const o=Math.min(s,a),c=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<o;++e)if(c[e]!==u[e]){s=c[e],a=u[e];break}return s<a?-1:a<s?1:0},Buffer.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Buffer.prototype.indexOf=function(e,t,n){return bidirectionalIndexOf(this,e,t,n,!0)},Buffer.prototype.lastIndexOf=function(e,t,n){return bidirectionalIndexOf(this,e,t,n,!1)},Buffer.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return hexWrite(this,e,t,n);case"utf8":case"utf-8":return utf8Write(this,e,t,n);case"ascii":case"latin1":case"binary":return asciiWrite(this,e,t,n);case"base64":return base64Write(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const o=4096;function asciiSlice(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function latin1Slice(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function hexSlice(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=l[e[r]];return i}function utf16leSlice(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function checkOffset(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,n,r,i,s){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function wrtBigUInt64LE(e,t,n,r,i){checkIntBI(t,r,i,e,n,7);let s=Number(t&BigInt(4294967295));e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function wrtBigUInt64BE(e,t,n,r,i){checkIntBI(t,r,i,e,n,7);let s=Number(t&BigInt(4294967295));e[n+7]=s,s>>=8,e[n+6]=s,s>>=8,e[n+5]=s,s>>=8,e[n+4]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function checkIEEE754(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,r,s){return t=+t,n>>>=0,s||checkIEEE754(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function writeDouble(e,t,n,r,s){return t=+t,n>>>=0,s||checkIEEE754(e,0,n,8),i.write(e,t,n,r,52,8),n+8}Buffer.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,Buffer.prototype),r},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);let r=this[e],i=1,s=0;for(;++s<t&&(i*=256);)r+=this[e+s]*i;return r},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function(e,t){return e>>>=0,t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readBigUInt64LE=defineBigIntMethod(function(e){validateNumber(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||boundsError(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))}),Buffer.prototype.readBigUInt64BE=defineBigIntMethod(function(e){validateNumber(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||boundsError(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),Buffer.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);let r=this[e],i=1,s=0;for(;++s<t&&(i*=256);)r+=this[e+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},Buffer.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);let r=t,i=1,s=this[e+--r];for(;r>0&&(i*=256);)s+=this[e+--r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},Buffer.prototype.readInt8=function(e,t){return e>>>=0,t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,t){e>>>=0,t||checkOffset(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt16BE=function(e,t){e>>>=0,t||checkOffset(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt32LE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readBigInt64LE=defineBigIntMethod(function(e){validateNumber(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||boundsError(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),Buffer.prototype.readBigInt64BE=defineBigIntMethod(function(e){validateNumber(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||boundsError(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)}),Buffer.prototype.readFloatLE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),i.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),i.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,t){return e>>>=0,t||checkOffset(e,8,this.length),i.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,t){return e>>>=0,t||checkOffset(e,8,this.length),i.read(this,e,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);let i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);let i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,1,255,0),this[t]=255&e,t+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeBigUInt64LE=defineBigIntMethod(function(e,t=0){return wrtBigUInt64LE(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeBigUInt64BE=defineBigIntMethod(function(e,t=0){return wrtBigUInt64BE(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);checkInt(this,e,t,n,r-1,-r)}let i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s|0)-a&255;return t+n},Buffer.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);checkInt(this,e,t,n,r-1,-r)}let i=n-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s|0)-a&255;return t+n},Buffer.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Buffer.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeBigInt64LE=defineBigIntMethod(function(e,t=0){return wrtBigUInt64LE(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer.prototype.writeBigInt64BE=defineBigIntMethod(function(e,t=0){return wrtBigUInt64BE(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer.prototype.writeFloatLE=function(e,t,n){return writeFloat(this,e,t,!0,n)},Buffer.prototype.writeFloatBE=function(e,t,n){return writeFloat(this,e,t,!1,n)},Buffer.prototype.writeDoubleLE=function(e,t,n){return writeDouble(this,e,t,!0,n)},Buffer.prototype.writeDoubleBE=function(e,t,n){return writeDouble(this,e,t,!1,n)},Buffer.prototype.copy=function(e,t,n,r){if(!Buffer.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},Buffer.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Buffer.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const s=Buffer.isBuffer(e)?e:Buffer.from(e,r),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this};const c={};function E(e,t,n){c[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function addNumericalSeparator(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function checkIntBI(e,t,n,r,i,s){if(e>n||e<t){const n="bigint"==typeof t?"n":"";let r;throw r=0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`,new c.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){validateNumber(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||boundsError(t,e.length-(n+1))}(r,i,s)}function validateNumber(e,t){if("number"!=typeof e)throw new c.ERR_INVALID_ARG_TYPE(t,"number",e)}function boundsError(e,t,n){if(Math.floor(e)!==e)throw validateNumber(e,n),new c.ERR_OUT_OF_RANGE("offset","an integer",e);if(t<0)throw new c.ERR_BUFFER_OUT_OF_BOUNDS;throw new c.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,e)}E("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),E("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),E("ERR_OUT_OF_RANGE",function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=addNumericalSeparator(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=addNumericalSeparator(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r},RangeError);const u=/[^+/0-9A-Za-z-_]/g;function utf8ToBytes(e,t){let n;t=t||1/0;const r=e.length;let i=null;const s=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function base64ToBytes(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(u,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function blitBuffer(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function isInstance(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function numberIsNaN(e){return e!=e}const l=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function defineBigIntMethod(e){return"undefined"==typeof BigInt?BufferBigIntNotDefined:e}function BufferBigIntNotDefined(){throw new Error("BigInt not supported")}}(n)),n);const c="1.42.0",u={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class SuiHTTPTransportError extends Error{}e("SuiHTTPTransportError",SuiHTTPTransportError);class JsonRpcError extends SuiHTTPTransportError{constructor(e,t){super(e),this.code=t,this.type=u[t]??"ServerError"}}e("JsonRpcError",JsonRpcError);class SuiHTTPStatusError extends SuiHTTPTransportError{constructor(e,t,n){super(e),this.status=t,this.statusText=n}}e("SuiHTTPStatusError",SuiHTTPStatusError);var l,d,f,h,p,g,y,m,b,__typeError$b=e=>{throw TypeError(e)},__accessCheck$b=(e,t,n)=>t.has(e)||__typeError$b("Cannot "+n),__privateGet$b=(e,t,n)=>(__accessCheck$b(e,t,"read from private field"),n?n.call(e):t.get(e)),__privateAdd$b=(e,t,n)=>t.has(e)?__typeError$b("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),__privateSet$a=(e,t,n,r)=>(__accessCheck$b(e,t,"write to private field"),t.set(e,n),n),__privateMethod$4=(e,t,n)=>(__accessCheck$b(e,t,"access private method"),n);const w={WebSocketConstructor:"undefined"!=typeof WebSocket?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class WebsocketClient{constructor(e,t={}){if(__privateAdd$b(this,y),__privateAdd$b(this,l,0),__privateAdd$b(this,d,0),__privateAdd$b(this,f,null),__privateAdd$b(this,h,null),__privateAdd$b(this,p,new Set),__privateAdd$b(this,g,new Map),this.endpoint=e,this.options={...w,...t},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=function(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}(this.endpoint))}async makeRequest(e,t,n){const r=await __privateMethod$4(this,y,m).call(this);return new Promise((i,s)=>{__privateSet$a(this,l,__privateGet$b(this,l)+1),__privateGet$b(this,g).set(__privateGet$b(this,l),{resolve:i,reject:s,timeout:setTimeout(()=>{__privateGet$b(this,g).delete(__privateGet$b(this,l)),s(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),n?.addEventListener("abort",()=>{__privateGet$b(this,g).delete(__privateGet$b(this,l)),s(n.reason)}),r.send(JSON.stringify({jsonrpc:"2.0",id:__privateGet$b(this,l),method:e,params:t}))}).then(({error:e,result:t})=>{if(e)throw new JsonRpcError(e.message,e.code);return t})}async subscribe(e){const t=new RpcSubscription(e);return __privateGet$b(this,p).add(t),await t.subscribe(this),()=>t.unsubscribe(this)}}l=new WeakMap,d=new WeakMap,f=new WeakMap,h=new WeakMap,p=new WeakMap,g=new WeakMap,y=new WeakSet,m=function(){return __privateGet$b(this,h)||__privateSet$a(this,h,new Promise(e=>{__privateGet$b(this,f)?.close(),__privateSet$a(this,f,new this.options.WebSocketConstructor(this.endpoint)),__privateGet$b(this,f).addEventListener("open",()=>{__privateSet$a(this,d,0),e(__privateGet$b(this,f))}),__privateGet$b(this,f).addEventListener("close",()=>{var e,t,n;(e=this,t=d,{set _(n){__privateSet$a(e,t,n)},get _(){return __privateGet$b(e,t,n)}})._++,__privateGet$b(this,d)<=this.options.maxReconnects&&setTimeout(()=>{__privateMethod$4(this,y,b).call(this)},this.options.reconnectTimeout)}),__privateGet$b(this,f).addEventListener("message",({data:e})=>{let t;try{t=JSON.parse(e)}catch(t){return void console.error(new Error(`Failed to parse RPC message: ${e}`,{cause:t}))}if("id"in t&&null!=t.id&&__privateGet$b(this,g).has(t.id)){const{resolve:e,timeout:n}=__privateGet$b(this,g).get(t.id);clearTimeout(n),e(t)}else if("params"in t){const{params:e}=t;__privateGet$b(this,p).forEach(t=>{t.subscriptionId===e.subscription&&e.subscription===t.subscriptionId&&t.onMessage(e.result)})}})})),__privateGet$b(this,h)},b=async function(){return __privateGet$b(this,f)?.close(),__privateSet$a(this,h,null),Promise.allSettled([...__privateGet$b(this,p)].map(e=>e.subscribe(this)))};class RpcSubscription{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:t}=this;return this.subscribed=!1,null!=t&&(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[t]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const t=await e.makeRequest(this.input.method,this.input.params,this.input.signal);this.subscribed&&(this.subscriptionId=t)}}var v,S,B,T,k,__typeError$a=e=>{throw TypeError(e)},__accessCheck$a=(e,t,n)=>t.has(e)||__typeError$a("Cannot "+n),__privateGet$a=(e,t,n)=>(__accessCheck$a(e,t,"read from private field"),n?n.call(e):t.get(e)),__privateAdd$a=(e,t,n)=>t.has(e)?__typeError$a("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),__privateSet$9=(e,t,n,r)=>(__accessCheck$a(e,t,"write to private field"),t.set(e,n),n);class JsonRpcHTTPTransport{constructor(e){__privateAdd$a(this,T),__privateAdd$a(this,v,0),__privateAdd$a(this,S),__privateAdd$a(this,B),__privateSet$9(this,S,e)}fetch(e,t){const n=__privateGet$a(this,S).fetch??fetch;if(!n)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,t)}async request(e){__privateSet$9(this,v,__privateGet$a(this,v)+1);const t=await this.fetch(__privateGet$a(this,S).rpc?.url??__privateGet$a(this,S).url,{method:"POST",signal:e.signal,headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":c,"Client-Target-Api-Version":"1.59.0","Client-Request-Method":e.method,...__privateGet$a(this,S).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:__privateGet$a(this,v),method:e.method,params:e.params})});if(!t.ok)throw new SuiHTTPStatusError(`Unexpected status code: ${t.status}`,t.status,t.statusText);const n=await t.json();if("error"in n&&null!=n.error)throw new JsonRpcError(n.error.message,n.error.code);return n.result}async subscribe(e){const t=await(n=this,r=T,i=k,__accessCheck$a(n,r,"access private method"),i).call(this).subscribe(e);var n,r,i;return e.signal&&(e.signal.throwIfAborted(),e.signal.addEventListener("abort",()=>{t()})),async()=>!!await t()}}function isBytes$1(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function isArrayOf(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function astr(e,t){if("string"!=typeof t)throw new Error(`${e}: string expected`);return!0}function anumber$1(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function aArr(e){if(!Array.isArray(e))throw new Error("array expected")}function astrArr(e,t){if(!isArrayOf(!0,t))throw new Error(`${e}: array of strings expected`)}function anumArr(e,t){if(!isArrayOf(!1,t))throw new Error(`${e}: array of numbers expected`)}function chain(...e){const id=e=>e,wrap=(e,t)=>n=>e(t(n));return{encode:e.map(e=>e.encode).reduceRight(wrap,id),decode:e.map(e=>e.decode).reduce(wrap,id)}}function alphabet(e){const t="string"==typeof e?e.split(""):e,n=t.length;astrArr("alphabet",t);const r=new Map(t.map((e,t)=>[e,t]));return{encode:r=>(aArr(r),r.map(r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${r}". Allowed: ${e}`);return t[r]})),decode:t=>(aArr(t),t.map(t=>{astr("alphabet.decode",t);const n=r.get(t);if(void 0===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}function join(e=""){return astr("join",e),{encode:t=>(astrArr("join.decode",t),t.join(e)),decode:t=>(astr("join.decode",t),t.split(e))}}function convertRadix(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(aArr(e),!e.length)return[];let r=0;const i=[],s=Array.from(e,e=>{if(anumber$1(e),e<0||e>=t)throw new Error(`invalid integer: ${e}`);return e}),a=s.length;for(;;){let e=0,o=!0;for(let i=r;i<a;i++){const a=s[i],c=t*e,u=c+a;if(!Number.isSafeInteger(u)||c/t!==e||u-a!==c)throw new Error("convertRadix: carry overflow");const l=u/n;e=u%n;const d=Math.floor(l);if(s[i]=d,!Number.isSafeInteger(d)||d*n+e!==u)throw new Error("convertRadix: carry overflow");o&&(d?o=!1:r=i)}if(i.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}e("SuiHTTPTransport",JsonRpcHTTPTransport),v=new WeakMap,S=new WeakMap,B=new WeakMap,T=new WeakSet,k=function(){if(!__privateGet$a(this,B)){const e=__privateGet$a(this,S).WebSocketConstructor??WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");__privateSet$9(this,B,new WebsocketClient(__privateGet$a(this,S).websocket?.url??__privateGet$a(this,S).url,{WebSocketConstructor:e,...__privateGet$a(this,S).websocket}))}return __privateGet$a(this,B)};const gcd=(e,t)=>0===t?e:gcd(t,e%t),radix2carry=(e,t)=>e+(t-gcd(e,t)),O=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function convertRadix2(e,t,n,r){if(aArr(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(radix2carry(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${radix2carry(t,n)}`);let i=0,s=0;const a=O[t],o=O[n]-1,c=[];for(const r of e){if(anumber$1(r),r>=a)throw new Error(`convertRadix2: invalid data word=${r} from=${t}`);if(i=i<<t|r,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)c.push((i>>s-n&o)>>>0);const e=O[s];if(void 0===e)throw new Error("invalid carry");i&=e-1}if(i=i<<n-s&o,!r&&s>=t)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&c.push(i>>>0),c}function unsafeWrapper(e){return function(e){if("function"!=typeof e)throw new Error("function expected")}(e),function(...t){try{return e.apply(null,t)}catch(e){}}}const j=(I="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",chain((anumber$1(x=58),{encode:e=>{if(!isBytes$1(e))throw new Error("radix.encode input should be Uint8Array");return convertRadix(Array.from(e),256,x)},decode:e=>(anumArr("radix.decode",e),Uint8Array.from(convertRadix(e,x,256)))}),alphabet(I),join("")));var I,x;const A=chain(alphabet("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),join("")),M=[996825010,642813549,513874426,1027748829,705979059];function bech32Polymod(e){const t=e>>25;let n=(33554431&e)<<5;for(let e=0;e<M.length;e++)1==(t>>e&1)&&(n^=M[e]);return n}function bechChecksum(e,t,n=1){const r=e.length;let i=1;for(let t=0;t<r;t++){const n=e.charCodeAt(t);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);i=bech32Polymod(i)^n>>5}i=bech32Polymod(i);for(let t=0;t<r;t++)i=bech32Polymod(i)^31&e.charCodeAt(t);for(let e of t)i=bech32Polymod(i)^e;for(let e=0;e<6;e++)i=bech32Polymod(i);return i^=n,A.encode(convertRadix2([i%O[30]],30,5,!1))}const C=function(e){const t="bech32"===e?1:734539939,n=function(e,t=!1){if(anumber$1(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(radix2carry(8,e)>32||radix2carry(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!isBytes$1(n))throw new Error("radix2.encode input should be Uint8Array");return convertRadix2(Array.from(n),8,e,!t)},decode:n=>(anumArr("radix2.decode",n),Uint8Array.from(convertRadix2(n,e,8,t)))}}(5),r=n.decode,i=n.encode,s=unsafeWrapper(r);function encode(e,n,r=90){astr("bech32.encode prefix",e),isBytes$1(n)&&(n=Array.from(n)),anumArr("bech32.encode",n);const i=e.length;if(0===i)throw new TypeError(`Invalid prefix length ${i}`);const s=i+7+n.length;if(!1!==r&&s>r)throw new TypeError(`Length ${s} exceeds limit ${r}`);const a=e.toLowerCase(),o=bechChecksum(a,n,t);return`${a}1${A.encode(n)}${o}`}function decode(e,n=90){astr("bech32.decode input",e);const r=e.length;if(r<8||!1!==n&&r>n)throw new TypeError(`invalid string length: ${r} (${e}). Expected (8..${n})`);const i=e.toLowerCase();if(e!==i&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=i.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const a=i.slice(0,s),o=i.slice(s+1);if(o.length<6)throw new Error("Data must be at least 6 characters long");const c=A.decode(o).slice(0,-6),u=bechChecksum(a,c,t);if(!o.endsWith(u))throw new Error(`Invalid checksum in ${e}: expected "${u}"`);return{prefix:a,words:c}}return{encode,decode,encodeFromBytes:function(e,t){return encode(e,i(t))},decodeToBytes:function(e){const{prefix:t,words:n}=decode(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:unsafeWrapper(decode),fromWords:r,fromWordsUnsafe:s,toWords:i}}("bech32"),P=e("toBase58",e=>j.encode(e)),R=e("fromBase58",e=>j.decode(e));function fromBase64(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}const U=8192;function toBase64(e){if(e.length<U)return btoa(String.fromCharCode(...e));let t="";for(var n=0;n<e.length;n+=U){const r=e.slice(n,n+U);t+=String.fromCharCode(...r)}return btoa(t)}function fromHex(e){const t=e.startsWith("0x")?e.slice(2):e,n=t.length%2==0?t:`0${t}`,r=n.match(/[0-9a-fA-F]{2}/g)?.map(e=>parseInt(e,16))??[];if(r.length!==n.length/2)throw new Error(`Invalid hex string ${e}`);return Uint8Array.from(r)}function toHex(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function chunk(e,t){return Array.from({length:Math.ceil(e.length/t)},(n,r)=>e.slice(r*t,(r+1)*t))}class DataLoader{constructor(e,t){if("function"!=typeof e)throw new TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but got: ${e}.`);this._batchLoadFn=e,this._maxBatchSize=function(e){const t=!e||!1!==e.batch;if(!t)return 1;const n=e&&e.maxBatchSize;if(void 0===n)return 1/0;if("number"!=typeof n||n<1)throw new TypeError(`maxBatchSize must be a positive number: ${n}`);return n}(t),this._batchScheduleFn=function(e){const t=e&&e.batchScheduleFn;if(void 0===t)return $;if("function"!=typeof t)throw new TypeError(`batchScheduleFn must be a function: ${t}`);return t}(t),this._cacheKeyFn=function(e){const t=e&&e.cacheKeyFn;if(void 0===t)return e=>e;if("function"!=typeof t)throw new TypeError(`cacheKeyFn must be a function: ${t}`);return t}(t),this._cacheMap=function(e){const t=!e||!1!==e.cache;if(!t)return null;const n=e&&e.cacheMap;if(void 0===n)return new Map;if(null!==n){const e=["get","set","delete","clear"].filter(e=>n&&"function"!=typeof n[e]);if(0!==e.length)throw new TypeError("Custom cacheMap missing methods: "+e.join(", "))}return n}(t),this._batch=null,this.name=function(e){if(e&&e.name)return e.name;return null}(t)}load(e){if(null==e)throw new TypeError(`The loader.load() function must be called with a value, but got: ${String(e)}.`);const t=function(e){const t=e._batch;if(null!==t&&!t.hasDispatched&&t.keys.length<e._maxBatchSize)return t;const n={hasDispatched:!1,keys:[],callbacks:[]};return e._batch=n,e._batchScheduleFn(()=>{!function(e,t){if(t.hasDispatched=!0,0===t.keys.length)return void resolveCacheHits(t);let n;try{n=e._batchLoadFn(t.keys)}catch(n){return failedDispatch(e,t,new TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function errored synchronously: ${String(n)}.`))}if(!n||"function"!=typeof n.then)return failedDispatch(e,t,new TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise: ${String(n)}.`));Promise.resolve(n).then(e=>{if(!isArrayLike(e))throw new TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array: ${String(e)}.`);if(e.length!==t.keys.length)throw new TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys.\n\nKeys:\n${String(t.keys)}\n\nValues:\n${String(e)}`);resolveCacheHits(t);for(let n=0;n<t.callbacks.length;n++){const r=e[n];r instanceof Error?t.callbacks[n].reject(r):t.callbacks[n].resolve(r)}}).catch(n=>{failedDispatch(e,t,n)})}(e,n)}),n}(this),n=this._cacheMap;let r;if(n){r=this._cacheKeyFn(e);const i=n.get(r);if(i){const e=t.cacheHits||(t.cacheHits=[]);return new Promise(t=>{e.push(()=>{t(i)})})}}t.keys.push(e);const i=new Promise((e,n)=>{t.callbacks.push({resolve:e,reject:n})});return n&&n.set(r,i),i}loadMany(e){if(!isArrayLike(e))throw new TypeError(`The loader.loadMany() function must be called with Array<key>, but got: ${e}.`);const t=[];for(let n=0;n<e.length;n++)t.push(this.load(e[n]).catch(e=>e));return Promise.all(t)}clear(e){const t=this._cacheMap;if(t){const n=this._cacheKeyFn(e);t.delete(n)}return this}clearAll(){const e=this._cacheMap;return e&&e.clear(),this}prime(e,t){const n=this._cacheMap;if(n){const r=this._cacheKeyFn(e);if(void 0===n.get(r)){let e;t instanceof Error?(e=Promise.reject(t),e.catch(()=>{})):e=Promise.resolve(t),n.set(r,e)}}return this}}const $="object"==typeof process&&"function"==typeof process.nextTick?function(e){N||(N=Promise.resolve()),N.then(()=>{process.nextTick(e)})}:"function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){setTimeout(e)};let N;function failedDispatch(e,t,n){resolveCacheHits(t);for(let r=0;r<t.keys.length;r++)e.clear(t.keys[r]),t.callbacks[r].reject(n)}function resolveCacheHits(e){if(e.cacheHits)for(let t=0;t<e.cacheHits.length;t++)e.cacheHits[t]()}function isArrayLike(e){return"object"==typeof e&&null!==e&&"length"in e&&"number"==typeof e.length&&(0===e.length||e.length>0&&Object.prototype.hasOwnProperty.call(e,e.length-1))}function ulebEncode(e){const t=[];let n=0;if(0===e)return[0];for(;e>0;)t[n]=127&e,(e>>=7)&&(t[n]|=128),n+=1;return t}class BcsReader{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength)}shift(e){return this.bytePosition+=e,this}read8(){const e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){const e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){const e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){const e=this.read32(),t=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read128(){const e=BigInt(this.read64()),t=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+t).toString(10)}read256(){const e=BigInt(this.read128()),t=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+t).toString(10)}readBytes(e){const t=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),n}readULEB(){const e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:n,length:r}=function(e){let t=0,n=0,r=0;for(;;){const i=e[r];if(r+=1,t|=(127&i)<<n,!(128&i))break;n+=7}return{value:t,length:r}}(t);return this.shift(r),n}readVec(e){const t=this.readULEB(),n=[];for(let r=0;r<t;r++)n.push(e(this,r,t));return n}}function splitGenericParameters(e,t=["<",">"]){const[n,r]=t,i=[];let s="",a=0;for(let t=0;t<e.length;t++){const o=e[t];o===n&&a++,o===r&&a--,0!==a||","!==o?s+=o:(i.push(s.trim()),s="")}return i.push(s.trim()),i}class BcsWriter{constructor({initialSize:e=1024,maxSize:t=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const e=Math.min(this.maxSize,this.size+this.allocateSize);if(t>e)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=e;const n=new ArrayBuffer(this.size);new Uint8Array(n).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(n)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return toLittleEndian(BigInt(e),8).forEach(e=>this.write8(e)),this}write128(e){return toLittleEndian(BigInt(e),16).forEach(e=>this.write8(e)),this}write256(e){return toLittleEndian(BigInt(e),32).forEach(e=>this.write8(e)),this}writeULEB(e){return ulebEncode(e).forEach(e=>this.write8(e)),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach((n,r)=>t(this,n,r,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return function(e,t){switch(t){case"base58":return P(e);case"base64":return toBase64(e);case"hex":return toHex(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}(this.toBytes(),e)}}function toLittleEndian(e,t){const n=new Uint8Array(t);let r=0;for(;e>0;)n[r]=Number(e%BigInt(256)),e/=BigInt(256),r+=1;return n}var D,_,z,V,__typeError$9=e=>{throw TypeError(e)},__accessCheck$9=(e,t,n)=>t.has(e)||__typeError$9("Cannot "+n),__privateGet$9=(e,t,n)=>(__accessCheck$9(e,t,"read from private field"),n?n.call(e):t.get(e)),__privateAdd$9=(e,t,n)=>t.has(e)?__typeError$9("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),__privateSet$8=(e,t,n,r)=>(__accessCheck$9(e,t,"write to private field"),t.set(e,n),n);D=new WeakMap,_=new WeakMap;let L=e("BcsType",class _BcsType{constructor(e){__privateAdd$9(this,D),__privateAdd$9(this,_),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),__privateSet$8(this,D,e.write),__privateSet$8(this,_,e.serialize??((e,t)=>{const n=new BcsWriter({initialSize:this.serializedSize(e)??void 0,...t});return __privateGet$9(this,D).call(this,e,n),n.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),__privateGet$9(this,D).call(this,e,t)}serialize(e,t){return this.validate(e),new SerializedBcs(this,__privateGet$9(this,_).call(this,e,t))}parse(e){const t=new BcsReader(e);return this.read(t)}fromHex(e){return this.parse(fromHex(e))}fromBase58(e){return this.parse(R(e))}fromBase64(e){return this.parse(fromBase64(e))}transform({name:e,input:t,output:n,validate:r}){return new _BcsType({name:e??this.name,read:e=>n?n(this.read(e)):this.read(e),write:(e,n)=>__privateGet$9(this,D).call(this,t?t(e):e,n),serializedSize:e=>this.serializedSize(t?t(e):e),serialize:(e,n)=>__privateGet$9(this,_).call(this,t?t(e):e,n),validate:e=>{r?.(e),this.validate(t?t(e):e)}})}});const F=Symbol.for("@mysten/serialized-bcs");function isSerializedBcs(e){return!!e&&"object"==typeof e&&!0===e[F]}class SerializedBcs{constructor(e,t){__privateAdd$9(this,z),__privateAdd$9(this,V),__privateSet$8(this,z,e),__privateSet$8(this,V,t)}get[F](){return!0}toBytes(){return __privateGet$9(this,V)}toHex(){return toHex(__privateGet$9(this,V))}toBase64(){return toBase64(__privateGet$9(this,V))}toBase58(){return P(__privateGet$9(this,V))}parse(){return __privateGet$9(this,z).parse(__privateGet$9(this,V))}}function fixedSizeBcsType({size:e,...t}){return new L({...t,serializedSize:()=>e})}function uIntBcsType({readMethod:e,writeMethod:t,...n}){return fixedSizeBcsType({...n,read:t=>t[e](),write:(e,n)=>n[t](e),validate:e=>{if(e<0||e>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${e}. Expected value in range 0-${n.maxValue}`);n.validate?.(e)}})}function bigUIntBcsType({readMethod:e,writeMethod:t,...n}){return fixedSizeBcsType({...n,read:t=>t[e](),write:(e,n)=>n[t](BigInt(e)),validate:e=>{const t=BigInt(e);if(t<0||t>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${t}. Expected value in range 0-${n.maxValue}`);n.validate?.(t)}})}z=new WeakMap,V=new WeakMap;class BcsStruct extends L{constructor({name:e,fields:t,...n}){const r=Object.entries(t);super({name:e,serializedSize:e=>{let t=0;for(const[n,i]of r){const r=i.serializedSize(e[n]);if(null==r)return null;t+=r}return t},read:e=>{const t={};for(const[n,i]of r)t[n]=i.read(e);return t},write:(e,t)=>{for(const[n,i]of r)i.write(e[n],t)},...n,validate:e=>{if(n?.validate?.(e),"object"!=typeof e||null==e)throw new TypeError("Expected object, found "+typeof e)}})}}e("BcsStruct",BcsStruct);class BcsEnum extends L{constructor({fields:e,...t}){const n=Object.entries(e);super({read:e=>{const r=e.readULEB(),i=n[r];if(!i)throw new TypeError(`Unknown value ${r} for enum ${t.name}`);const[s,a]=i;return{[s]:a?.read(e)??!0,$kind:s}},write:(t,r)=>{const[i,s]=Object.entries(t).filter(([t])=>Object.hasOwn(e,t))[0];for(let e=0;e<n.length;e++){const[t,a]=n[e];if(t===i)return r.writeULEB(e),void a?.write(s,r)}},...t,validate:n=>{if(t?.validate?.(n),"object"!=typeof n||null==n)throw new TypeError("Expected object, found "+typeof n);const r=Object.keys(n).filter(t=>void 0!==n[t]&&Object.hasOwn(e,t));if(1!==r.length)throw new TypeError(`Expected object with one key, but found ${r.length} for type ${t.name}}`);const[i]=r;if(!Object.hasOwn(e,i))throw new TypeError(`Invalid enum variant ${i}`)}})}}e("BcsEnum",BcsEnum);class BcsTuple extends L{constructor({fields:e,name:t,...n}){super({name:t??`(${e.map(e=>e.name).join(", ")})`,serializedSize:t=>{let n=0;for(let r=0;r<e.length;r++){const i=e[r].serializedSize(t[r]);if(null==i)return null;n+=i}return n},read:t=>{const n=[];for(const r of e)n.push(r.read(t));return n},write:(t,n)=>{for(let r=0;r<e.length;r++)e[r].write(t[r],n)},...n,validate:t=>{if(n?.validate?.(t),!Array.isArray(t))throw new TypeError("Expected array, found "+typeof t);if(t.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${t.length}`)}})}}e("BcsTuple",BcsTuple);const W={u8:e=>uIntBcsType({readMethod:"read8",writeMethod:"write8",size:1,maxValue:255,...e,name:e?.name??"u8"}),u16:e=>uIntBcsType({readMethod:"read16",writeMethod:"write16",size:2,maxValue:65535,...e,name:e?.name??"u16"}),u32:e=>uIntBcsType({readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e,name:e?.name??"u32"}),u64:e=>bigUIntBcsType({readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e,name:e?.name??"u64"}),u128:e=>bigUIntBcsType({readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e,name:e?.name??"u128"}),u256:e=>bigUIntBcsType({readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e,name:e?.name??"u256"}),bool:e=>fixedSizeBcsType({size:1,read:e=>1===e.read8(),write:(e,t)=>t.write8(e?1:0),...e,name:e?.name??"bool",validate:t=>{if(e?.validate?.(t),"boolean"!=typeof t)throw new TypeError("Expected boolean, found "+typeof t)}}),uleb128:e=>function({serialize:e,...t}){const n=new L({...t,serialize:e,write:(e,t)=>{for(const r of n.serialize(e).toBytes())t.write8(r)}});return n}({read:e=>e.readULEB(),serialize:e=>Uint8Array.from(ulebEncode(e)),...e,name:e?.name??"uleb128"}),bytes:(e,t)=>fixedSizeBcsType({size:e,read:t=>t.readBytes(e),write:(t,n)=>{const r=new Uint8Array(t);for(let t=0;t<e;t++)n.write8(r[t]??0)},...t,name:t?.name??`bytes[${e}]`,validate:n=>{if(t?.validate?.(n),!n||"object"!=typeof n||!("length"in n))throw new TypeError("Expected array, found "+typeof n);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}}),byteVector:e=>new L({read:e=>{const t=e.readULEB();return e.readBytes(t)},write:(e,t)=>{const n=new Uint8Array(e);t.writeULEB(n.length);for(let e=0;e<n.length;e++)t.write8(n[e]??0)},...e,name:e?.name??"vector<u8>",serializedSize:e=>{const t="length"in e?e.length:null;return null==t?null:ulebEncode(t).length+t},validate:t=>{if(e?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found "+typeof t)}}),string:e=>function({toBytes:e,fromBytes:t,...n}){return new L({...n,read:e=>{const n=e.readULEB(),r=e.readBytes(n);return t(r)},write:(t,n)=>{const r=e(t);n.writeULEB(r.length);for(let e=0;e<r.length;e++)n.write8(r[e])},serialize:t=>{const n=e(t),r=ulebEncode(n.length),i=new Uint8Array(r.length+n.length);return i.set(r,0),i.set(n,r.length),i},validate:e=>{if("string"!=typeof e)throw new TypeError(`Invalid ${n.name} value: ${e}. Expected string`);n.validate?.(e)}})}({toBytes:e=>(new TextEncoder).encode(e),fromBytes:e=>(new TextDecoder).decode(e),...e,name:e?.name??"string"}),fixedArray:function(e,t,n){return new L({read:n=>{const r=new Array(e);for(let i=0;i<e;i++)r[i]=t.read(n);return r},write:(e,n)=>{for(const r of e)t.write(r,n)},...n,name:n?.name??`${t.name}[${e}]`,validate:t=>{if(n?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found "+typeof t);if(t.length!==e)throw new TypeError(`Expected array of length ${e}, found ${t.length}`)}})},option:function(e){return W.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:e=>null==e?{None:!0}:{Some:e},output:e=>"Some"===e.$kind?e.Some:null})},vector:function(e,t){return new L({read:t=>{const n=t.readULEB(),r=new Array(n);for(let i=0;i<n;i++)r[i]=e.read(t);return r},write:(t,n)=>{n.writeULEB(t.length);for(const r of t)e.write(r,n)},...t,name:t?.name??`vector<${e.name}>`,validate:e=>{if(t?.validate?.(e),!e||"object"!=typeof e||!("length"in e))throw new TypeError("Expected array, found "+typeof e)}})},tuple:(e,t)=>new BcsTuple({fields:e,...t}),struct:(e,t,n)=>new BcsStruct({name:e,fields:t,...n}),enum:(e,t,n)=>new BcsEnum({name:e,fields:t,...n}),map:function(e,t){return W.vector(W.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:e=>[...e.entries()],output:e=>{const t=new Map;for(const[n,r]of e)t.set(n,r);return t}})},lazy:e=>function(e){let t=null;function getType(){return t||(t=e()),t}return new L({name:"lazy",read:e=>getType().read(e),serializedSize:e=>getType().serializedSize(e),write:(e,t)=>getType().write(e,t),serialize:(e,t)=>getType().serialize(e,t).toBytes()})}(e)};e("toB64",toBase64),e("fromB64",fromBase64),e("toHEX",toHex),e("fromHEX",fromHex);var q,H,__typeError$8=e=>{throw TypeError(e)},__accessCheck$8=(e,t,n)=>t.has(e)||__typeError$8("Cannot "+n),__privateGet$8=(e,t,n)=>(__accessCheck$8(e,t,"read from private field"),t.get(e)),__privateAdd$8=(e,t,n)=>t.has(e)?__typeError$8("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),__privateSet$7=(e,t,n,r)=>(__accessCheck$8(e,t,"write to private field"),t.set(e,n),n);q=new WeakMap,H=new WeakMap;let G=class _ClientCache{constructor({prefix:e,cache:t}={}){__privateAdd$8(this,q),__privateAdd$8(this,H),__privateSet$7(this,q,e??[]),__privateSet$7(this,H,t??new Map)}read(e,t){const n=[__privateGet$8(this,q),...e].join(":");if(__privateGet$8(this,H).has(n))return __privateGet$8(this,H).get(n);const r=t();return __privateGet$8(this,H).set(n,r),"object"==typeof r&&null!==r&&"then"in r?Promise.resolve(r).then(e=>(__privateGet$8(this,H).set(n,e),e)).catch(e=>{throw __privateGet$8(this,H).delete(n),e}):r}readSync(e,t){const n=[__privateGet$8(this,q),...e].join(":");if(__privateGet$8(this,H).has(n))return __privateGet$8(this,H).get(n);const r=t();return __privateGet$8(this,H).set(n,r),r}clear(e){const t=[...__privateGet$8(this,q),...e??[]].join(":");if(t)for(const e of __privateGet$8(this,H).keys())e.startsWith(t)&&__privateGet$8(this,H).delete(e);else __privateGet$8(this,H).clear()}scope(e){return new _ClientCache({prefix:[...__privateGet$8(this,q),...Array.isArray(e)?e:[e]],cache:__privateGet$8(this,H)})}};class Experimental_BaseClient{constructor({network:e,base:t,cache:n=t?.cache??new G}){this.network=e,this.base=t??this,this.cache=n}$extend(...e){return Object.create(this,Object.fromEntries(e.map(e=>{if("experimental_asClientExtension"in e){const{name:t,register:n}=e.experimental_asClientExtension();return[t,{value:n(this)}]}return[e.name,{value:e.register(this)}]})))}}var K;function _stringify(e){const t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function _addIssue(e,t,n,r,i){const s=i&&"input"in i?i.input:n.value,a=i?.expected??e.expects??null,o=i?.received??_stringify(s),c={kind:e.kind,type:e.type,input:s,expected:a,received:o,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${o}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},u="schema"===e.kind,l=i?.message??e.message??(e.reference,void c.lang)??(u?void c.lang:null)??r.message??void c.lang;l&&(c.message="function"==typeof l?l(c):l),u&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function _isValidObjectKey(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}var Z=class extends Error{issues;constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function check(e,t){return{kind:"validation",type:"check",reference:check,async:!1,expects:null,requirement:e,message:t,_run(e,t){return e.typed&&!this.requirement(e.value)&&_addIssue(this,"input",e,t),e}}}function integer(e){return{kind:"validation",type:"integer",reference:integer,async:!1,expects:null,requirement:Number.isInteger,message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&_addIssue(this,"integer",e,t),e}}}function transform(e){return{kind:"transformation",type:"transform",reference:transform,async:!1,operation:e,_run(e){return e.value=this.operation(e.value),e}}}function getDefault(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}function is(e,t){return!e._run({typed:!1,value:t},{abortEarly:!0}).issues}function array(e,t){return{kind:"schema",type:"array",reference:array,expects:"Array",async:!1,item:e,message:t,_run(e,t){const n=e.value;if(Array.isArray(n)){e.typed=!0,e.value=[];for(let r=0;r<n.length;r++){const i=n[r],s=this.item._run({typed:!1,value:i},t);if(s.issues){const a={type:"array",origin:"value",input:n,key:r,value:i};for(const t of s.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.push(s.value)}}else _addIssue(this,"type",e,t);return e}}}function bigint(e){return{kind:"schema",type:"bigint",reference:bigint,expects:"bigint",async:!1,message:e,_run(e,t){return"bigint"==typeof e.value?e.typed=!0:_addIssue(this,"type",e,t),e}}}function boolean(e){return{kind:"schema",type:"boolean",reference:boolean,expects:"boolean",async:!1,message:e,_run(e,t){return"boolean"==typeof e.value?e.typed=!0:_addIssue(this,"type",e,t),e}}}function lazy(e){return{kind:"schema",type:"lazy",reference:lazy,expects:"unknown",async:!1,getter:e,_run(e,t){return this.getter(e.value)._run(e,t)}}}function literal(e,t){return{kind:"schema",type:"literal",reference:literal,expects:_stringify(e),async:!1,literal:e,message:t,_run(e,t){return e.value===this.literal?e.typed=!0:_addIssue(this,"type",e,t),e}}}function nullable(e,...t){const n={kind:"schema",type:"nullable",reference:nullable,expects:`${e.expects} | null`,async:!1,wrapped:e,_run(e,t){return null===e.value&&("default"in this&&(e.value=getDefault(this,e,t)),null===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(n.default=t[0]),n}function nullish(e,...t){const n={kind:"schema",type:"nullish",reference:nullish,expects:`${e.expects} | null | undefined`,async:!1,wrapped:e,_run(e,t){return null!==e.value&&void 0!==e.value||("default"in this&&(e.value=getDefault(this,e,t)),null!==e.value&&void 0!==e.value)?this.wrapped._run(e,t):(e.typed=!0,e)}};return 0 in t&&(n.default=t[0]),n}function number(e){return{kind:"schema",type:"number",reference:number,expects:"number",async:!1,message:e,_run(e,t){return"number"!=typeof e.value||isNaN(e.value)?_addIssue(this,"type",e,t):e.typed=!0,e}}}function object(e,t){return{kind:"schema",type:"object",reference:object,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const r in this.entries){const i=n[r],s=this.entries[r]._run({typed:!1,value:i},t);if(s.issues){const a={type:"object",origin:"value",input:n,key:r,value:i};for(const t of s.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),(void 0!==s.value||r in n)&&(e.value[r]=s.value)}}else _addIssue(this,"type",e,t);return e}}}function optional(e,...t){const n={kind:"schema",type:"optional",reference:optional,expects:`${e.expects} | undefined`,async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=getDefault(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(n.default=t[0]),n}function record(e,t,n){return{kind:"schema",type:"record",reference:record,expects:"Object",async:!1,key:e,value:t,message:n,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const r in n)if(_isValidObjectKey(n,r)){const i=n[r],s=this.key._run({typed:!1,value:r},t);if(s.issues){const a={type:"object",origin:"key",input:n,key:r,value:i};for(const t of s.issues)t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}const a=this.value._run({typed:!1,value:i},t);if(a.issues){const s={type:"object",origin:"value",input:n,key:r,value:i};for(const t of a.issues)t.path?t.path.unshift(s):t.path=[s],e.issues?.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}s.typed&&a.typed||(e.typed=!1),s.typed&&(e.value[s.value]=a.value)}}else _addIssue(this,"type",e,t);return e}}}function string(e){return{kind:"schema",type:"string",reference:string,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:_addIssue(this,"type",e,t),e}}}function tuple(e,t){return{kind:"schema",type:"tuple",reference:tuple,expects:"Array",async:!1,items:e,message:t,_run(e,t){const n=e.value;if(Array.isArray(n)){e.typed=!0,e.value=[];for(let r=0;r<this.items.length;r++){const i=n[r],s=this.items[r]._run({typed:!1,value:i},t);if(s.issues){const a={type:"array",origin:"value",input:n,key:r,value:i};for(const t of s.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.push(s.value)}}else _addIssue(this,"type",e,t);return e}}}function _subIssues(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function union(e,t){return{kind:"schema",type:"union",reference:union,expects:[...new Set(e.map(e=>e.expects))].join(" | ")||"never",async:!1,options:e,message:t,_run(e,t){let n,r,i;for(const s of this.options){const a=s._run({typed:!1,value:e.value},t);if(a.typed){if(!a.issues){n=a;break}r?r.push(a):r=[a]}else i?i.push(a):i=[a]}if(n)return n;if(r){if(1===r.length)return r[0];_addIssue(this,"type",e,t,{issues:_subIssues(r)}),e.typed=!0}else{if(1===i?.length)return i[0];_addIssue(this,"type",e,t,{issues:_subIssues(i)})}return e}}}function unknown(){return{kind:"schema",type:"unknown",reference:unknown,expects:"unknown",async:!1,_run:e=>(e.typed=!0,e)}}function parse(e,t,n){const r=e._run({typed:!1,value:t},function(e){return{lang:e?.lang??K?.lang,message:e?.message,abortEarly:e?.abortEarly??K?.abortEarly,abortPipeEarly:e?.abortPipeEarly??K?.abortPipeEarly}}(n));if(r.issues)throw new Z(r.issues);return r.value}function pipe(...e){return{...e[0],pipe:e,_run(t,n){for(let r=0;r<e.length;r++){if(t.issues&&("schema"===e[r].kind||"transformation"===e[r].kind)){t.typed=!1;break}t.issues&&(n.abortEarly||n.abortPipeEarly)||(t=e[r]._run(t,n))}return t}}}const Y=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,J=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,X=235;function isValidSuiNSName(e){return!(e.length>X)&&(e.includes("@")?Y.test(e):J.test(e))}function normalizeSuiNSName(e,t="at"){const n=e.toLowerCase();let r;if(n.includes("@")){if(!Y.test(n))throw new Error(`Invalid SuiNS name ${e}`);const[t,i]=n.split("@");r=[...t?t.split("."):[],i]}else{if(!J.test(n))throw new Error(`Invalid SuiNS name ${e}`);r=n.split(".").slice(0,-1)}return"dot"===t?`${r.join(".")}.sui`:`${r.slice(0,-1).join(".")}@${r[r.length-1]}`}const Q=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,ee=/^\d+$/,te=e("isValidNamedPackage",e=>{const t=e.split("/");if(t.length<2||t.length>3)return!1;const[n,r,i]=t;return!(void 0!==i&&!ee.test(i))&&(!!isValidSuiNSName(n)&&(Q.test(r)&&r.length<64))}),ne=e("isValidNamedType",e=>{const t=e.split(/::|<|>|,/);for(const e of t)if(e.includes("/")&&!te(e))return!1;return!0}),re=32;function isValidTransactionDigest(e){try{return R(e).length===re}catch{return!1}}const ie=e("SUI_ADDRESS_LENGTH",32);function isValidSuiAddress(e){return function(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2==0}(e)&&function(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}(e)===ie}function isValidSuiObjectId(e){return isValidSuiAddress(e)}function parseStructTag(e){const[t,n]=e.split("::"),r=te(t),i=e.slice(t.length+n.length+4),s=i.includes("<")?i.slice(0,i.indexOf("<")):i,a=i.includes("<")?splitGenericParameters(i.slice(i.indexOf("<")+1,i.lastIndexOf(">"))).map(e=>function(e){return e.includes("::")?parseStructTag(e):e}(e.trim())):[];return{address:r?t:normalizeSuiAddress(t),module:n,name:s,typeParams:a}}function normalizeStructTag(e){const{address:t,module:n,name:r,typeParams:i}="string"==typeof e?parseStructTag(e):e;return`${t}::${n}::${r}${i?.length>0?`<${i.map(e=>"string"==typeof e?e:normalizeStructTag(e)).join(",")}>`:""}`}function normalizeSuiAddress(e,t=!1){let n=e.toLowerCase();return!t&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(2*ie,"0")}`}function normalizeSuiObjectId(e,t=!1){return normalizeSuiAddress(e,t)}function safeEnum(e){return pipe(union(Object.entries(e).map(([e,t])=>object({[e]:t}))),transform(e=>({...e,$kind:Object.keys(e)[0]})))}const se=pipe(string(),transform(e=>normalizeSuiAddress(e)),check(isValidSuiAddress)),ae=se,oe=string(),ce=pipe(union([string(),pipe(number(),integer())]),check(e=>{try{return BigInt(e),BigInt(e)>=0&&BigInt(e)<=18446744073709551615n}catch{return!1}},"Invalid u64")),ue=object({objectId:se,version:ce,digest:string()}),le=pipe(union([object({GasCoin:literal(!0)}),object({Input:pipe(number(),integer()),type:optional(literal("pure"))}),object({Input:pipe(number(),integer()),type:optional(literal("object"))}),object({Result:pipe(number(),integer())}),object({NestedResult:tuple([pipe(number(),integer()),pipe(number(),integer())])})]),transform(e=>({...e,$kind:Object.keys(e)[0]}))),de=object({budget:nullable(ce),price:nullable(ce),owner:nullable(se),payment:nullable(array(ue))}),fe=union([literal("address"),literal("bool"),literal("u8"),literal("u16"),literal("u32"),literal("u64"),literal("u128"),literal("u256"),object({vector:lazy(()=>fe)}),object({datatype:object({package:string(),module:string(),type:string(),typeParameters:array(lazy(()=>fe))})}),object({typeParameter:pipe(number(),integer())})]),he=object({ref:nullable(union([literal("&"),literal("&mut")])),body:fe}),pe=object({package:ae,module:string(),function:string(),typeArguments:array(string()),arguments:array(le),_argumentTypes:optional(nullable(array(he)))}),ge=object({name:string(),inputs:record(string(),union([le,array(le)])),data:record(string(),unknown())}),ye=safeEnum({MoveCall:pe,TransferObjects:object({objects:array(le),address:le}),SplitCoins:object({coin:le,amounts:array(le)}),MergeCoins:object({destination:le,sources:array(le)}),Publish:object({modules:array(oe),dependencies:array(ae)}),MakeMoveVec:object({type:nullable(string()),elements:array(le)}),Upgrade:object({modules:array(oe),dependencies:array(ae),package:ae,ticket:le}),$Intent:ge}),me=safeEnum({ImmOrOwnedObject:ue,SharedObject:object({objectId:ae,initialSharedVersion:ce,mutable:boolean()}),Receiving:ue}),be=safeEnum({Object:me,Pure:object({bytes:oe}),UnresolvedPure:object({value:unknown()}),UnresolvedObject:object({objectId:ae,version:optional(nullable(ce)),digest:optional(nullable(string())),initialSharedVersion:optional(nullable(ce)),mutable:optional(nullable(boolean()))})}),we=safeEnum({Object:me,Pure:object({bytes:oe})}),ve=safeEnum({None:literal(!0),Epoch:ce}),Ee=object({version:literal(2),sender:nullish(se),expiration:nullish(ve),gasData:de,inputs:array(be),commands:array(ye)});var Se=e("UpgradePolicy",(e=>(e[e.COMPATIBLE=0]="COMPATIBLE",e[e.ADDITIVE=128]="ADDITIVE",e[e.DEP_ONLY=192]="DEP_ONLY",e))(Se||{}));const Be=e("Commands",{MoveCall(e){const[t,n="",r=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:n,function:r,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects:(e,t)=>({$kind:"TransferObjects",TransferObjects:{objects:e.map(e=>parse(le,e)),address:parse(le,t)}}),SplitCoins:(e,t)=>({$kind:"SplitCoins",SplitCoins:{coin:parse(le,e),amounts:t.map(e=>parse(le,e))}}),MergeCoins:(e,t)=>({$kind:"MergeCoins",MergeCoins:{destination:parse(le,e),sources:t.map(e=>parse(le,e))}}),Publish:({modules:e,dependencies:t})=>({$kind:"Publish",Publish:{modules:e.map(e=>"string"==typeof e?e:toBase64(new Uint8Array(e))),dependencies:t.map(e=>normalizeSuiObjectId(e))}}),Upgrade:({modules:e,dependencies:t,package:n,ticket:r})=>({$kind:"Upgrade",Upgrade:{modules:e.map(e=>"string"==typeof e?e:toBase64(new Uint8Array(e))),dependencies:t.map(e=>normalizeSuiObjectId(e)),package:n,ticket:parse(le,r)}}),MakeMoveVec:({type:e,elements:t})=>({$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map(e=>parse(le,e))}}),Intent:({name:e,inputs:t={},data:n={}})=>({$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map(([e,t])=>[e,Array.isArray(t)?t.map(e=>parse(le,e)):parse(le,t)])),data:n}})}),Te=/^vector<(.+)>$/,ke=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class TypeTagSerializer{static parseFromStr(e,t=!1){if("address"===e)return{address:null};if("bool"===e)return{bool:null};if("u8"===e)return{u8:null};if("u16"===e)return{u16:null};if("u32"===e)return{u32:null};if("u64"===e)return{u64:null};if("u128"===e)return{u128:null};if("u256"===e)return{u256:null};if("signer"===e)return{signer:null};const n=e.match(Te);if(n)return{vector:TypeTagSerializer.parseFromStr(n[1],t)};const r=e.match(ke);if(r){return{struct:{address:t?normalizeSuiAddress(r[1]):r[1],module:r[2],name:r[3],typeParams:void 0===r[5]?[]:TypeTagSerializer.parseStructTypeArgs(r[5],t)}}}throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,t=!1){return splitGenericParameters(e).map(e=>TypeTagSerializer.parseFromStr(e,t))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${TypeTagSerializer.tagToString(e.vector)}>`;if("struct"in e){const t=e.struct,n=t.typeParams.map(TypeTagSerializer.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}}e("TypeTagSerializer",TypeTagSerializer);const Oe=W.bytes(ie).transform({validate:e=>{const t="string"==typeof e?e:toHex(e);if(!t||!isValidSuiAddress(normalizeSuiAddress(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>"string"==typeof e?fromHex(normalizeSuiAddress(e)):e,output:e=>normalizeSuiAddress(toHex(e))}),je=W.vector(W.u8()).transform({name:"ObjectDigest",input:e=>R(e),output:e=>P(new Uint8Array(e)),validate:e=>{if(32!==R(e).length)throw new Error("ObjectDigest must be 32 bytes")}}),Ie=W.struct("SuiObjectRef",{objectId:Oe,version:W.u64(),digest:je}),xe=W.struct("SharedObjectRef",{objectId:Oe,initialSharedVersion:W.u64(),mutable:W.bool()}),Ae=W.enum("ObjectArg",{ImmOrOwnedObject:Ie,SharedObject:xe,Receiving:Ie}),Me=W.enum("Owner",{AddressOwner:Oe,ObjectOwner:Oe,Shared:W.struct("Shared",{initialSharedVersion:W.u64()}),Immutable:null,ConsensusAddressOwner:W.struct("ConsensusAddressOwner",{owner:Oe,startVersion:W.u64()})}),Ce=W.enum("CallArg",{Pure:W.struct("Pure",{bytes:W.vector(W.u8()).transform({input:e=>"string"==typeof e?fromBase64(e):e,output:e=>toBase64(new Uint8Array(e))})}),Object:Ae}),Pe=W.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:W.lazy(()=>Pe),struct:W.lazy(()=>Fe),u16:null,u32:null,u256:null}),Re=Pe.transform({input:e=>"string"==typeof e?TypeTagSerializer.parseFromStr(e,!0):e,output:e=>TypeTagSerializer.tagToString(e)}),Ue=W.enum("Argument",{GasCoin:null,Input:W.u16(),Result:W.u16(),NestedResult:W.tuple([W.u16(),W.u16()])}),$e=W.struct("ProgrammableMoveCall",{package:Oe,module:W.string(),function:W.string(),typeArguments:W.vector(Re),arguments:W.vector(Ue)}),Ne=W.enum("Command",{MoveCall:$e,TransferObjects:W.struct("TransferObjects",{objects:W.vector(Ue),address:Ue}),SplitCoins:W.struct("SplitCoins",{coin:Ue,amounts:W.vector(Ue)}),MergeCoins:W.struct("MergeCoins",{destination:Ue,sources:W.vector(Ue)}),Publish:W.struct("Publish",{modules:W.vector(W.vector(W.u8()).transform({input:e=>"string"==typeof e?fromBase64(e):e,output:e=>toBase64(new Uint8Array(e))})),dependencies:W.vector(Oe)}),MakeMoveVec:W.struct("MakeMoveVec",{type:(De=Re,W.enum("Option",{None:null,Some:De})).transform({input:e=>null===e?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:W.vector(Ue)}),Upgrade:W.struct("Upgrade",{modules:W.vector(W.vector(W.u8()).transform({input:e=>"string"==typeof e?fromBase64(e):e,output:e=>toBase64(new Uint8Array(e))})),dependencies:W.vector(Oe),package:Oe,ticket:Ue})});var De;const _e=W.struct("ProgrammableTransaction",{inputs:W.vector(Ce),commands:W.vector(Ne)}),ze=W.enum("TransactionKind",{ProgrammableTransaction:_e,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Ve=W.enum("TransactionExpiration",{None:null,Epoch:W.u64({name:"unsafe_u64",...Le}).transform({input:e=>e,output:e=>Number(e)})});var Le;const Fe=W.struct("StructTag",{address:Oe,module:W.string(),name:W.string(),typeParams:W.vector(Pe)}),We=W.struct("GasData",{payment:W.vector(Ie),owner:Oe,price:W.u64(),budget:W.u64()}),qe=W.struct("TransactionDataV1",{kind:ze,sender:Oe,gasData:We,expiration:Ve}),He=W.enum("TransactionData",{V1:qe}),Ge=W.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Ke=W.enum("IntentVersion",{V0:null}),Ze=W.enum("AppId",{Sui:null}),Ye=W.struct("Intent",{scope:Ge,version:Ke,appId:Ze});function IntentMessage(e){return W.struct(`IntentMessage<${e.name}>`,{intent:Ye,value:e})}const Je=W.enum("CompressedSignature",{ED25519:W.fixedArray(64,W.u8()),Secp256k1:W.fixedArray(64,W.u8()),Secp256r1:W.fixedArray(64,W.u8()),ZkLogin:W.vector(W.u8()),Passkey:W.vector(W.u8())}),Xe=W.enum("PublicKey",{ED25519:W.fixedArray(32,W.u8()),Secp256k1:W.fixedArray(33,W.u8()),Secp256r1:W.fixedArray(33,W.u8()),ZkLogin:W.vector(W.u8()),Passkey:W.fixedArray(33,W.u8())}),Qe=W.struct("MultiSigPkMap",{pubKey:Xe,weight:W.u8()}),et=W.struct("MultiSigPublicKey",{pk_map:W.vector(Qe),threshold:W.u16()}),tt=W.struct("MultiSig",{sigs:W.vector(Je),bitmap:W.u16(),multisig_pk:et}),nt=W.vector(W.u8()).transform({input:e=>"string"==typeof e?fromBase64(e):e,output:e=>toBase64(new Uint8Array(e))}),rt=W.struct("SenderSignedTransaction",{intentMessage:IntentMessage(He),txSignatures:W.vector(nt)}),it=W.vector(rt,{name:"SenderSignedData"}),st=W.struct("PasskeyAuthenticator",{authenticatorData:W.vector(W.u8()),clientDataJson:W.string(),userSignature:W.vector(W.u8())}),at=W.enum("PackageUpgradeError",{UnableToFetchPackage:W.struct("UnableToFetchPackage",{packageId:Oe}),NotAPackage:W.struct("NotAPackage",{objectId:Oe}),IncompatibleUpgrade:null,DigestDoesNotMatch:W.struct("DigestDoesNotMatch",{digest:W.vector(W.u8())}),UnknownUpgradePolicy:W.struct("UnknownUpgradePolicy",{policy:W.u8()}),PackageIDDoesNotMatch:W.struct("PackageIDDoesNotMatch",{packageId:Oe,ticketId:Oe})}),ot=W.struct("ModuleId",{address:Oe,name:W.string()}),ct=W.struct("MoveLocation",{module:ot,function:W.u16(),instruction:W.u16(),functionName:W.option(W.string())}),ut=W.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:W.struct("IndexOutOfBounds",{idx:W.u16()}),SecondaryIndexOutOfBounds:W.struct("SecondaryIndexOutOfBounds",{resultIdx:W.u16(),secondaryIdx:W.u16()}),InvalidResultArity:W.struct("InvalidResultArity",{resultIdx:W.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),lt=W.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),dt=W.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:W.struct("MoveObjectTooBig",{objectSize:W.u64(),maxObjectSize:W.u64()}),MovePackageTooBig:W.struct("MovePackageTooBig",{objectSize:W.u64(),maxObjectSize:W.u64()}),CircularObjectOwnership:W.struct("CircularObjectOwnership",{object:Oe}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:W.option(ct),MoveAbort:W.tuple([ct,W.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:W.struct("CommandArgumentError",{argIdx:W.u16(),kind:ut}),TypeArgumentError:W.struct("TypeArgumentError",{argumentIdx:W.u16(),kind:lt}),UnusedValueWithoutDrop:W.struct("UnusedValueWithoutDrop",{resultIdx:W.u16(),secondaryIdx:W.u16()}),InvalidPublicFunctionReturnType:W.struct("InvalidPublicFunctionReturnType",{idx:W.u16()}),InvalidTransferObject:null,EffectsTooLarge:W.struct("EffectsTooLarge",{currentSize:W.u64(),maxSize:W.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:W.struct("PackageUpgradeError",{upgradeError:at}),WrittenObjectsTooLarge:W.struct("WrittenObjectsTooLarge",{currentSize:W.u64(),maxSize:W.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:W.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:W.vector(Oe)}),AddressDeniedForCoin:W.struct("AddressDeniedForCoin",{address:Oe,coinType:W.string()}),CoinTypeGlobalPause:W.struct("CoinTypeGlobalPause",{coinType:W.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),ft=W.enum("ExecutionStatus",{Success:null,Failed:W.struct("ExecutionFailed",{error:dt,command:W.option(W.u64())})}),ht=W.struct("GasCostSummary",{computationCost:W.u64(),storageCost:W.u64(),storageRebate:W.u64(),nonRefundableStorageFee:W.u64()}),pt=W.struct("TransactionEffectsV1",{status:ft,executedEpoch:W.u64(),gasUsed:ht,modifiedAtVersions:W.vector(W.tuple([Oe,W.u64()])),sharedObjects:W.vector(Ie),transactionDigest:je,created:W.vector(W.tuple([Ie,Me])),mutated:W.vector(W.tuple([Ie,Me])),unwrapped:W.vector(W.tuple([Ie,Me])),deleted:W.vector(Ie),unwrappedThenDeleted:W.vector(Ie),wrapped:W.vector(Ie),gasObject:W.tuple([Ie,Me]),eventsDigest:W.option(je),dependencies:W.vector(je)}),gt=W.tuple([W.u64(),je]),yt=W.enum("ObjectIn",{NotExist:null,Exist:W.tuple([gt,Me])}),mt=W.enum("ObjectOut",{NotExist:null,ObjectWrite:W.tuple([je,Me]),PackageWrite:gt}),bt=W.enum("IDOperation",{None:null,Created:null,Deleted:null}),wt=W.struct("EffectsObjectChange",{inputState:yt,outputState:mt,idOperation:bt}),vt=W.enum("UnchangedSharedKind",{ReadOnlyRoot:gt,MutateDeleted:W.u64(),ReadDeleted:W.u64(),Cancelled:W.u64(),PerEpochConfig:null}),Et=W.struct("TransactionEffectsV2",{status:ft,executedEpoch:W.u64(),gasUsed:ht,transactionDigest:je,gasObjectIndex:W.option(W.u32()),eventsDigest:W.option(je),dependencies:W.vector(je),lamportVersion:W.u64(),changedObjects:W.vector(W.tuple([Oe,wt])),unchangedSharedObjects:W.vector(W.tuple([Oe,vt])),auxDataDigest:W.option(je)}),St=W.enum("TransactionEffects",{V1:pt,V2:Et});function pureBcsSchemaFromTypeName(e){switch(e){case"u8":return W.u8();case"u16":return W.u16();case"u32":return W.u32();case"u64":return W.u64();case"u128":return W.u128();case"u256":return W.u256();case"bool":return W.bool();case"string":return W.string();case"id":case"address":return Oe}const t=e.match(/^(vector|option)<(.+)>$/);if(t){const[e,n]=t.slice(1);return"vector"===e?W.vector(pureBcsSchemaFromTypeName(n)):W.option(pureBcsSchemaFromTypeName(n))}throw new Error(`Invalid Pure type name: ${e}`)}const Bt=e("bcs",{...W,U8:W.u8(),U16:W.u16(),U32:W.u32(),U64:W.u64(),U128:W.u128(),U256:W.u256(),ULEB128:W.uleb128(),Bool:W.bool(),String:W.string(),Address:Oe,AppId:Ze,Argument:Ue,CallArg:Ce,Command:Ne,CompressedSignature:Je,GasData:We,Intent:Ye,IntentMessage,IntentScope:Ge,IntentVersion:Ke,MultiSig:tt,MultiSigPkMap:Qe,MultiSigPublicKey:et,ObjectArg:Ae,ObjectDigest:je,Owner:Me,PasskeyAuthenticator:st,ProgrammableMoveCall:$e,ProgrammableTransaction:_e,PublicKey:Xe,SenderSignedData:it,SenderSignedTransaction:rt,SharedObjectRef:xe,StructTag:Fe,SuiObjectRef:Ie,TransactionData:He,TransactionDataV1:qe,TransactionEffects:St,TransactionExpiration:Ve,TransactionKind:ze,TypeTag:Re}),Tt=object({digest:string(),objectId:string(),version:union([pipe(number(),integer()),string(),bigint()])}),kt=safeEnum({ImmOrOwned:Tt,Shared:object({objectId:ae,initialSharedVersion:ce,mutable:boolean()}),Receiving:Tt}),Ot=safeEnum({Object:kt,Pure:array(pipe(number(),integer()))}),jt=union([object({kind:literal("Input"),index:pipe(number(),integer()),value:unknown(),type:optional(literal("object"))}),object({kind:literal("Input"),index:pipe(number(),integer()),value:unknown(),type:literal("pure")})]),It=union([object({Epoch:pipe(number(),integer())}),object({None:nullable(literal(!0))})]),xt=pipe(union([number(),string(),bigint()]),check(e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}})),At=union([object({bool:nullable(literal(!0))}),object({u8:nullable(literal(!0))}),object({u64:nullable(literal(!0))}),object({u128:nullable(literal(!0))}),object({address:nullable(literal(!0))}),object({signer:nullable(literal(!0))}),object({vector:lazy(()=>At)}),object({struct:lazy(()=>Mt)}),object({u16:nullable(literal(!0))}),object({u32:nullable(literal(!0))}),object({u256:nullable(literal(!0))})]),Mt=object({address:string(),module:string(),name:string(),typeParams:array(At)}),Ct=object({budget:optional(xt),price:optional(xt),payment:optional(array(Tt)),owner:optional(string())}),Pt=union([...[jt,object({kind:literal("GasCoin")}),object({kind:literal("Result"),index:pipe(number(),integer())}),object({kind:literal("NestedResult"),index:pipe(number(),integer()),resultIndex:pipe(number(),integer())})]]),Rt=object({kind:literal("MoveCall"),target:pipe(string(),check(e=>3===e.split("::").length)),typeArguments:array(string()),arguments:array(Pt)}),Ut=object({kind:literal("TransferObjects"),objects:array(Pt),address:Pt}),$t=object({kind:literal("SplitCoins"),coin:Pt,amounts:array(Pt)}),Nt=object({kind:literal("MergeCoins"),destination:Pt,sources:array(Pt)}),Dt=object({kind:literal("MakeMoveVec"),type:union([object({Some:At}),object({None:nullable(literal(!0))})]),objects:array(Pt)}),_t=union([...[Rt,Ut,$t,Nt,object({kind:literal("Publish"),modules:array(array(pipe(number(),integer()))),dependencies:array(string())}),object({kind:literal("Upgrade"),modules:array(array(pipe(number(),integer()))),dependencies:array(string()),packageId:string(),ticket:Pt}),Dt]]);function serializeV1TransactionData(e){const t=e.inputs.map((e,t)=>{if(e.Object)return{kind:"Input",index:t,value:{Object:e.Object.ImmOrOwnedObject?{ImmOrOwned:e.Object.ImmOrOwnedObject}:e.Object.Receiving?{Receiving:{digest:e.Object.Receiving.digest,version:e.Object.Receiving.version,objectId:e.Object.Receiving.objectId}}:{Shared:{mutable:e.Object.SharedObject.mutable,initialSharedVersion:e.Object.SharedObject.initialSharedVersion,objectId:e.Object.SharedObject.objectId}}},type:"object"};if(e.Pure)return{kind:"Input",index:t,value:{Pure:Array.from(fromBase64(e.Pure.bytes))},type:"pure"};if(e.UnresolvedPure)return{kind:"Input",type:"pure",index:t,value:e.UnresolvedPure.value};if(e.UnresolvedObject)return{kind:"Input",type:"object",index:t,value:e.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:e.sender??void 0,expiration:"Epoch"===e.expiration?.$kind?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map(e=>{if(e.MakeMoveVec)return{kind:"MakeMoveVec",type:null===e.MakeMoveVec.type?{None:!0}:{Some:TypeTagSerializer.parseFromStr(e.MakeMoveVec.type)},objects:e.MakeMoveVec.elements.map(e=>convertTransactionArgument(e,t))};if(e.MergeCoins)return{kind:"MergeCoins",destination:convertTransactionArgument(e.MergeCoins.destination,t),sources:e.MergeCoins.sources.map(e=>convertTransactionArgument(e,t))};if(e.MoveCall)return{kind:"MoveCall",target:`${e.MoveCall.package}::${e.MoveCall.module}::${e.MoveCall.function}`,typeArguments:e.MoveCall.typeArguments,arguments:e.MoveCall.arguments.map(e=>convertTransactionArgument(e,t))};if(e.Publish)return{kind:"Publish",modules:e.Publish.modules.map(e=>Array.from(fromBase64(e))),dependencies:e.Publish.dependencies};if(e.SplitCoins)return{kind:"SplitCoins",coin:convertTransactionArgument(e.SplitCoins.coin,t),amounts:e.SplitCoins.amounts.map(e=>convertTransactionArgument(e,t))};if(e.TransferObjects)return{kind:"TransferObjects",objects:e.TransferObjects.objects.map(e=>convertTransactionArgument(e,t)),address:convertTransactionArgument(e.TransferObjects.address,t)};if(e.Upgrade)return{kind:"Upgrade",modules:e.Upgrade.modules.map(e=>Array.from(fromBase64(e))),dependencies:e.Upgrade.dependencies,packageId:e.Upgrade.package,ticket:convertTransactionArgument(e.Upgrade.ticket,t)};throw new Error(`Unknown transaction ${Object.keys(e)}`)})}}function convertTransactionArgument(e,t){if("GasCoin"===e.$kind)return{kind:"GasCoin"};if("Result"===e.$kind)return{kind:"Result",index:e.Result};if("NestedResult"===e.$kind)return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if("Input"===e.$kind)return t[e.Input];throw new Error(`Invalid argument ${Object.keys(e)}`)}function parseV1TransactionArgument(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function enumUnion(e){return union(Object.entries(e).map(([e,t])=>object({[e]:t})))}object({version:literal(1),sender:optional(string()),expiration:nullish(It),gasConfig:Ct,inputs:array(jt),transactions:array(_t)});const zt=enumUnion({GasCoin:literal(!0),Input:pipe(number(),integer()),Result:pipe(number(),integer()),NestedResult:tuple([pipe(number(),integer()),pipe(number(),integer())])}),Vt=object({budget:nullable(ce),price:nullable(ce),owner:nullable(se),payment:nullable(array(ue))}),Lt=object({package:ae,module:string(),function:string(),typeArguments:array(string()),arguments:array(zt)}),Ft=object({name:string(),inputs:record(string(),union([zt,array(zt)])),data:record(string(),unknown())}),Wt=enumUnion({MoveCall:Lt,TransferObjects:object({objects:array(zt),address:zt}),SplitCoins:object({coin:zt,amounts:array(zt)}),MergeCoins:object({destination:zt,sources:array(zt)}),Publish:object({modules:array(oe),dependencies:array(ae)}),MakeMoveVec:object({type:nullable(string()),elements:array(zt)}),Upgrade:object({modules:array(oe),dependencies:array(ae),package:ae,ticket:zt}),$Intent:Ft}),qt=enumUnion({ImmOrOwnedObject:ue,SharedObject:object({objectId:ae,initialSharedVersion:ce,mutable:boolean()}),Receiving:ue}),Ht=enumUnion({Object:qt,Pure:object({bytes:oe}),UnresolvedPure:object({value:unknown()}),UnresolvedObject:object({objectId:ae,version:optional(nullable(ce)),digest:optional(nullable(string())),initialSharedVersion:optional(nullable(ce)),mutable:optional(nullable(boolean()))})}),Gt=enumUnion({None:literal(!0),Epoch:ce}),Kt=object({version:literal(2),sender:nullish(se),expiration:nullish(Gt),gasData:Vt,inputs:array(Ht),commands:array(Wt),digest:optional(nullable(string()))});const Zt=e("Inputs",{Pure:function(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?toBase64(e):e.toBase64()}}},ObjectRef:({objectId:e,digest:t,version:n})=>({$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:n,objectId:normalizeSuiAddress(e)}}}),SharedObjectRef:({objectId:e,mutable:t,initialSharedVersion:n})=>({$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:n,objectId:normalizeSuiAddress(e)}}}),ReceivingRef:({objectId:e,digest:t,version:n})=>({$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:n,objectId:normalizeSuiAddress(e)}}})}),Yt="";e("SUI_DECIMALS",9),e("MIST_PER_SUI",BigInt(1e9));const Jt=e("MOVE_STDLIB_ADDRESS","0x1"),Xt=e("SUI_FRAMEWORK_ADDRESS","0x2"),Qt=(e("SUI_SYSTEM_ADDRESS","0x3"),e("SUI_CLOCK_OBJECT_ID",normalizeSuiObjectId("0x6")),e("SUI_SYSTEM_MODULE_NAME","sui_system"),e("SUI_TYPE_ARG",`${Xt}::sui::SUI`)),en=(e("SUI_SYSTEM_STATE_OBJECT_ID",normalizeSuiObjectId("0x5")),e("SUI_RANDOM_OBJECT_ID",normalizeSuiObjectId("0x8")),"object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0);function isBytes(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function anumber(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function abytes(e,...t){if(!isBytes(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function ahash(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.createHasher");anumber(e.outputLen),anumber(e.blockLen)}function aexists(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function aoutput(e,t){abytes(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function u32(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function clean(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function createView(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const tn=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function byteSwap(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const nn=tn?e=>e:e=>byteSwap(e);const rn=tn?e=>e:function(e){for(let t=0;t<e.length;t++)e[t]=byteSwap(e[t]);return e},sn=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),an=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function bytesToHex(e){if(abytes(e),sn)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=an[e[n]];return t}const cn=48,un=57,ln=65,dn=70,fn=97,hn=102;function asciiToBase16(e){return e>=cn&&e<=un?e-cn:e>=ln&&e<=dn?e-(ln-10):e>=fn&&e<=hn?e-(fn-10):void 0}function hexToBytes(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if(sn)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,i=0;t<n;t++,i+=2){const n=asciiToBase16(e.charCodeAt(i)),s=asciiToBase16(e.charCodeAt(i+1));if(void 0===n||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}r[t]=16*n+s}return r}function utf8ToBytes(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}function toBytes(e){return"string"==typeof e&&(e=utf8ToBytes(e)),abytes(e),e}function kdfInputToBytes(e){return"string"==typeof e&&(e=utf8ToBytes(e)),abytes(e),e}function concatBytes$1(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];abytes(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return n}class Hash{}function createHasher(e){const hashC=t=>e().update(toBytes(t)).digest(),t=e();return hashC.outputLen=t.outputLen,hashC.blockLen=t.blockLen,hashC.create=()=>e(),hashC}function createOptHasher(e){const hashC=(t,n)=>e(n).update(toBytes(t)).digest(),t=e({});return hashC.outputLen=t.outputLen,hashC.blockLen=t.blockLen,hashC.create=t=>e(t),hashC}function randomBytes(e=32){if(en&&"function"==typeof en.getRandomValues)return en.getRandomValues(new Uint8Array(e));if(en&&"function"==typeof en.randomBytes)return Uint8Array.from(en.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const pn=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]);class HashMD extends Hash{constructor(e,t,n,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.buffer=new Uint8Array(e),this.view=createView(this.buffer)}update(e){aexists(this),abytes(e=toBytes(e));const{view:t,buffer:n,blockLen:r}=this,i=e.length;for(let s=0;s<i;){const a=Math.min(r-this.pos,i-s);if(a===r){const t=createView(e);for(;r<=i-s;s+=r)this.process(t,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aexists(this),aoutput(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;t[s++]=128,clean(this.buffer.subarray(s)),this.padOffset>r-s&&(this.process(n,0),s=0);for(let e=s;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(n>>i&s),o=Number(n&s),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,o,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const a=createView(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)a.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:s,pos:a}=this;return e.destroyed=s,e.finished=i,e.length=r,e.pos=a,r%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const gn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),yn=BigInt(2**32-1),mn=BigInt(32);function fromBig(e,t=!1){return t?{h:Number(e&yn),l:Number(e>>mn&yn)}:{h:0|Number(e>>mn&yn),l:0|Number(e&yn)}}const shrSH=(e,t,n)=>e>>>n,shrSL=(e,t,n)=>e<<32-n|t>>>n,rotrSH=(e,t,n)=>e>>>n|t<<32-n,rotrSL=(e,t,n)=>e<<32-n|t>>>n,rotrBH=(e,t,n)=>e<<64-n|t>>>n-32,rotrBL=(e,t,n)=>e>>>n-32|t<<64-n;function add(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}}const add3L=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,add5L=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),add5H=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,bn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),wn=new Uint32Array(32);function G1b(e,t,n,r,i,s){const a=i[s],o=i[s+1];let c=wn[2*e],u=wn[2*e+1],l=wn[2*t],d=wn[2*t+1],f=wn[2*n],h=wn[2*n+1],p=wn[2*r],g=wn[2*r+1],y=add3L(c,l,a);var m,b;u=add3H(y,u,d,o),c=0|y,({Dh:g,Dl:p}={Dh:g^u,Dl:p^c}),({Dh:g,Dl:p}={Dh:(b=p,b),Dl:(m=g,m)}),({h,l:f}=add(h,f,g,p)),({Bh:d,Bl:l}={Bh:d^h,Bl:l^f}),({Bh:d,Bl:l}={Bh:rotrSH(d,l,24),Bl:rotrSL(d,l,24)}),wn[2*e]=c,wn[2*e+1]=u,wn[2*t]=l,wn[2*t+1]=d,wn[2*n]=f,wn[2*n+1]=h,wn[2*r]=p,wn[2*r+1]=g}function G2b(e,t,n,r,i,s){const a=i[s],o=i[s+1];let c=wn[2*e],u=wn[2*e+1],l=wn[2*t],d=wn[2*t+1],f=wn[2*n],h=wn[2*n+1],p=wn[2*r],g=wn[2*r+1],y=add3L(c,l,a);u=add3H(y,u,d,o),c=0|y,({Dh:g,Dl:p}={Dh:g^u,Dl:p^c}),({Dh:g,Dl:p}={Dh:rotrSH(g,p,16),Dl:rotrSL(g,p,16)}),({h,l:f}=add(h,f,g,p)),({Bh:d,Bl:l}={Bh:d^h,Bl:l^f}),({Bh:d,Bl:l}={Bh:rotrBH(d,l,63),Bl:rotrBL(d,l,63)}),wn[2*e]=c,wn[2*e+1]=u,wn[2*t]=l,wn[2*t+1]=d,wn[2*n]=f,wn[2*n+1]=h,wn[2*r]=p,wn[2*r+1]=g}class BLAKE2 extends Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,anumber(e),anumber(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=u32(this.buffer)}update(e){aexists(this),abytes(e=toBytes(e));const{blockLen:t,buffer:n,buffer32:r}=this,i=e.length,s=e.byteOffset,a=e.buffer;for(let o=0;o<i;){this.pos===t&&(rn(r),this.compress(r,0,!1),rn(r),this.pos=0);const c=Math.min(t-this.pos,i-o),u=s+o;if(c===t&&!(u%4)&&o+c<i){const e=new Uint32Array(a,u,Math.floor((i-o)/4));rn(e);for(let n=0;o+t<i;n+=r.length,o+=t)this.length+=t,this.compress(e,n,!1);rn(e);continue}n.set(e.subarray(o,o+c),this.pos),this.pos+=c,this.length+=c,o+=c}return this}digestInto(e){aexists(this),aoutput(e,this);const{pos:t,buffer32:n}=this;this.finished=!0,clean(this.buffer.subarray(t)),rn(n),this.compress(n,0,!0),rn(n);const r=u32(e);this.get().forEach((e,t)=>r[t]=nn(e))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){const{buffer:t,length:n,finished:r,destroyed:i,outputLen:s,pos:a}=this;return e||(e=new this.constructor({dkLen:s})),e.set(...this.get()),e.buffer.set(t),e.destroyed=i,e.finished=r,e.length=n,e.pos=a,e.outputLen=s,e}clone(){return this._cloneInto()}}class BLAKE2b extends BLAKE2{constructor(e={}){const t=void 0===e.dkLen?64:e.dkLen;super(128,t),this.v0l=0|bn[0],this.v0h=0|bn[1],this.v1l=0|bn[2],this.v1h=0|bn[3],this.v2l=0|bn[4],this.v2h=0|bn[5],this.v3l=0|bn[6],this.v3h=0|bn[7],this.v4l=0|bn[8],this.v4h=0|bn[9],this.v5l=0|bn[10],this.v5h=0|bn[11],this.v6l=0|bn[12],this.v6h=0|bn[13],this.v7l=0|bn[14],this.v7h=0|bn[15],function(e,t={},n,r,i){if(anumber(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:s,salt:a,personalization:o}=t;if(void 0!==s&&(s.length<1||s.length>n))throw new Error("key length must be undefined or 1.."+n);if(void 0!==a&&a.length!==r)throw new Error("salt must be undefined or "+r);if(void 0!==o&&o.length!==i)throw new Error("personalization must be undefined or "+i)}(t,e,64,16,16);let{key:n,personalization:r,salt:i}=e,s=0;if(void 0!==n&&(n=toBytes(n),s=n.length),this.v0l^=this.outputLen|s<<8|65536|1<<24,void 0!==i){i=toBytes(i);const e=u32(i);this.v4l^=nn(e[0]),this.v4h^=nn(e[1]),this.v5l^=nn(e[2]),this.v5h^=nn(e[3])}if(void 0!==r){r=toBytes(r);const e=u32(r);this.v6l^=nn(e[0]),this.v6h^=nn(e[1]),this.v7l^=nn(e[2]),this.v7h^=nn(e[3])}if(void 0!==n){const e=new Uint8Array(this.blockLen);e.set(n),this.update(e)}}get(){let{v0l:e,v0h:t,v1l:n,v1h:r,v2l:i,v2h:s,v3l:a,v3h:o,v4l:c,v4h:u,v5l:l,v5h:d,v6l:f,v6h:h,v7l:p,v7h:g}=this;return[e,t,n,r,i,s,a,o,c,u,l,d,f,h,p,g]}set(e,t,n,r,i,s,a,o,c,u,l,d,f,h,p,g){this.v0l=0|e,this.v0h=0|t,this.v1l=0|n,this.v1h=0|r,this.v2l=0|i,this.v2h=0|s,this.v3l=0|a,this.v3h=0|o,this.v4l=0|c,this.v4h=0|u,this.v5l=0|l,this.v5h=0|d,this.v6l=0|f,this.v6h=0|h,this.v7l=0|p,this.v7h=0|g}compress(e,t,n){this.get().forEach((e,t)=>wn[t]=e),wn.set(bn,16);let{h:r,l:i}=fromBig(BigInt(this.length));wn[24]=bn[8]^i,wn[25]=bn[9]^r,n&&(wn[28]=~wn[28],wn[29]=~wn[29]);let s=0;const a=pn;for(let n=0;n<12;n++)G1b(0,4,8,12,e,t+2*a[s++]),G2b(0,4,8,12,e,t+2*a[s++]),G1b(1,5,9,13,e,t+2*a[s++]),G2b(1,5,9,13,e,t+2*a[s++]),G1b(2,6,10,14,e,t+2*a[s++]),G2b(2,6,10,14,e,t+2*a[s++]),G1b(3,7,11,15,e,t+2*a[s++]),G2b(3,7,11,15,e,t+2*a[s++]),G1b(0,5,10,15,e,t+2*a[s++]),G2b(0,5,10,15,e,t+2*a[s++]),G1b(1,6,11,12,e,t+2*a[s++]),G2b(1,6,11,12,e,t+2*a[s++]),G1b(2,7,8,13,e,t+2*a[s++]),G2b(2,7,8,13,e,t+2*a[s++]),G1b(3,4,9,14,e,t+2*a[s++]),G2b(3,4,9,14,e,t+2*a[s++]);this.v0l^=wn[0]^wn[16],this.v0h^=wn[1]^wn[17],this.v1l^=wn[2]^wn[18],this.v1h^=wn[3]^wn[19],this.v2l^=wn[4]^wn[20],this.v2h^=wn[5]^wn[21],this.v3l^=wn[6]^wn[22],this.v3h^=wn[7]^wn[23],this.v4l^=wn[8]^wn[24],this.v4h^=wn[9]^wn[25],this.v5l^=wn[10]^wn[26],this.v5h^=wn[11]^wn[27],this.v6l^=wn[12]^wn[28],this.v6h^=wn[13]^wn[29],this.v7l^=wn[14]^wn[30],this.v7h^=wn[15]^wn[31],clean(wn)}destroy(){this.destroyed=!0,clean(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const vn=createOptHasher(e=>new BLAKE2b(e));function deriveDynamicFieldID(e,t,n){const r=Bt.Address.serialize(e).toBytes(),i=Bt.TypeTag.serialize(t).toBytes(),s=Bt.u64().serialize(n.length).toBytes(),a=vn.create({dkLen:32});return a.update(new Uint8Array([240])),a.update(r),a.update(s),a.update(n),a.update(i),`0x${toHex(a.digest().slice(0,32))}`}const En="object",Sn="ID",Bn="ascii",Tn="String",kn="string",On="String",jn="option",In="Option";function getPureBcsSchema(e){if("string"==typeof e)switch(e){case"address":return Bt.Address;case"bool":return Bt.Bool;case"u8":return Bt.U8;case"u16":return Bt.U16;case"u32":return Bt.U32;case"u64":return Bt.U64;case"u128":return Bt.U128;case"u256":return Bt.U256;default:throw new Error(`Unknown type signature ${e}`)}if("vector"in e){if("u8"===e.vector)return Bt.vector(Bt.U8).transform({input:e=>"string"==typeof e?(new TextEncoder).encode(e):e,output:e=>e});const t=getPureBcsSchema(e.vector);return t?Bt.vector(t):null}if("datatype"in e){const t=normalizeSuiAddress(e.datatype.package);if(t===normalizeSuiAddress(Jt)){if(e.datatype.module===Bn&&e.datatype.type===Tn)return Bt.String;if(e.datatype.module===kn&&e.datatype.type===On)return Bt.String;if(e.datatype.module===jn&&e.datatype.type===In){const t=getPureBcsSchema(e.datatype.typeParameters[0]);return t?Bt.vector(t):null}}if(t===normalizeSuiAddress(Xt)&&e.datatype.module===En&&e.datatype.type===Sn)return Bt.Address}return null}function normalizedTypeToMoveTypeSignature(e){return"object"==typeof e&&"Reference"in e?{ref:"&",body:normalizedTypeToMoveTypeSignatureBody(e.Reference)}:"object"==typeof e&&"MutableReference"in e?{ref:"&mut",body:normalizedTypeToMoveTypeSignatureBody(e.MutableReference)}:{ref:null,body:normalizedTypeToMoveTypeSignatureBody(e)}}function normalizedTypeToMoveTypeSignatureBody(e){if("string"==typeof e)switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:normalizedTypeToMoveTypeSignatureBody(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(normalizedTypeToMoveTypeSignatureBody)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(e)}`)}const xn=5e10;function jsonRpcClientResolveTransactionPlugin(e){return async function(t,n,r){return await async function(e,t){const{inputs:n,commands:r}=e,i=[],s=new Set;r.forEach(t=>{if(t.MoveCall){if(t.MoveCall._argumentTypes)return;if(t.MoveCall.arguments.map(t=>"Input"===t.$kind?e.inputs[t.Input]:null).some(e=>e?.UnresolvedPure||e?.UnresolvedObject&&"boolean"!=typeof e?.UnresolvedObject.mutable)){const e=`${t.MoveCall.package}::${t.MoveCall.module}::${t.MoveCall.function}`;s.add(e),i.push(t.MoveCall)}}});const a=new Map;s.size>0&&await Promise.all([...s].map(async e=>{const[n,r,i]=e.split("::"),s=await t.getNormalizedMoveFunction({package:n,module:r,function:i});a.set(e,s.parameters.map(e=>normalizedTypeToMoveTypeSignature(e)))}));i.length&&await Promise.all(i.map(async e=>{const t=a.get(`${e.package}::${e.module}::${e.function}`);if(!t)return;const n=t.length>0&&function(e){const t="object"==typeof e.body&&"datatype"in e.body?e.body.datatype:null;return!!t&&normalizeSuiAddress(t.package)===normalizeSuiAddress("0x2")&&"tx_context"===t.module&&"TxContext"===t.type}(t.at(-1))?t.slice(0,t.length-1):t;e._argumentTypes=n}));r.forEach(e=>{if(!e.MoveCall)return;const t=e.MoveCall,r=`${t.package}::${t.module}::${t.function}`,i=t._argumentTypes;if(i){if(i.length!==e.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${r}`);i.forEach((e,r)=>{const i=t.arguments[r];if("Input"!==i.$kind)return;const s=n[i.Input];if(!s.UnresolvedPure&&!s.UnresolvedObject)return;const a=s.UnresolvedPure?.value??s.UnresolvedObject?.objectId,o=getPureBcsSchema(e.body);if(o)return i.type="pure",void(n[n.indexOf(s)]=Zt.Pure(o.serialize(a)));if("string"!=typeof a)throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(a,null,2)}`);i.type="object";const c=s.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:a}}:s;n[i.Input]=c})}})}(t,e),await async function(e,t){const n=e.inputs.filter(e=>e.UnresolvedObject&&!(e.UnresolvedObject.version||e.UnresolvedObject?.initialSharedVersion)),r=[...new Set(n.map(e=>normalizeSuiObjectId(e.UnresolvedObject.objectId)))],i=r.length?chunk(r,50):[],s=(await Promise.all(i.map(e=>t.multiGetObjects({ids:e,options:{showOwner:!0}})))).flat(),a=new Map(r.map((e,t)=>[e,s[t]])),o=Array.from(a).filter(([e,t])=>t.error).map(([e,t])=>JSON.stringify(t.error));if(o.length)throw new Error(`The following input objects are invalid: ${o.join(", ")}`);const c=s.map(e=>{if(e.error||!e.data)throw new Error(`Failed to fetch object: ${e.error}`);const t=e.data.owner,n=t&&"object"==typeof t?"Shared"in t?t.Shared.initial_shared_version:"ConsensusAddressOwner"in t?t.ConsensusAddressOwner.start_version:null:null;return{objectId:e.data.objectId,digest:e.data.digest,version:e.data.version,initialSharedVersion:n}}),u=new Map(r.map((e,t)=>[e,c[t]]));for(const[t,n]of e.inputs.entries()){if(!n.UnresolvedObject)continue;let r;const i=normalizeSuiAddress(n.UnresolvedObject.objectId),s=u.get(i);n.UnresolvedObject.initialSharedVersion??s?.initialSharedVersion?r=Zt.SharedObjectRef({objectId:i,initialSharedVersion:n.UnresolvedObject.initialSharedVersion||s?.initialSharedVersion,mutable:n.UnresolvedObject.mutable||isUsedAsMutable(e,t)}):isUsedAsReceiving(e,t)&&(r=Zt.ReceivingRef({objectId:i,digest:n.UnresolvedObject.digest??s?.digest,version:n.UnresolvedObject.version??s?.version})),e.inputs[e.inputs.indexOf(n)]=r??Zt.ObjectRef({objectId:i,digest:n.UnresolvedObject.digest??s?.digest,version:n.UnresolvedObject.version??s?.version})}}(t,e),n.onlyTransactionKind||(await async function(e,t){e.gasConfig.price||(e.gasConfig.price=String(await t.getReferenceGasPrice()))}(t,e),await async function(e,t){if(e.gasConfig.budget)return;const n=await t.dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(xn),payment:[]}}})});if("success"!==n.effects.status.status)throw new Error(`Dry run failed, could not automatically determine a budget: ${n.effects.status.error}`,{cause:n});const r=1000n*BigInt(e.gasConfig.price||1n),i=BigInt(n.effects.gasUsed.computationCost)+r,s=i+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);e.gasConfig.budget=String(s>i?s:i)}(t,e),await async function(e,t){if(!e.gasConfig.payment){const n=(await t.getCoins({owner:e.gasConfig.owner||e.sender,coinType:Qt})).data.filter(t=>!e.inputs.find(e=>!!e.Object?.ImmOrOwnedObject&&t.coinObjectId===e.Object.ImmOrOwnedObject.objectId)).map(e=>({objectId:e.coinObjectId,digest:e.digest,version:e.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");e.gasConfig.payment=n.map(e=>parse(ue,e))}}(t,e)),await r()}}function isUsedAsMutable(e,t){let n=!1;return e.getInputUses(t,(e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const r=t.MoveCall.arguments.indexOf(e);n="&"!==t.MoveCall._argumentTypes[r].ref||n}"MakeMoveVec"!==t.$kind&&"MergeCoins"!==t.$kind&&"SplitCoins"!==t.$kind&&"TransferObjects"!==t.$kind||(n=!0)}),n}function isUsedAsReceiving(e,t){let n=!1;return e.getInputUses(t,(e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const r=t.MoveCall.arguments.indexOf(e);n=function(e){if("object"!=typeof e.body||!("datatype"in e.body))return!1;return"0x2"===e.body.datatype.package&&"transfer"===e.body.datatype.module&&"Receiving"===e.body.datatype.type}(t.MoveCall._argumentTypes[r])||n}}),n}function needsTransactionResolution(e,t){return!!e.inputs.some(e=>e.UnresolvedObject||e.UnresolvedPure)||!(t.onlyTransactionKind||e.gasConfig.price&&e.gasConfig.budget&&e.gasConfig.payment)}async function resolveTransactionPlugin(e,t,n){if(function(e){for(const t of e.commands)switch(t.$kind){case"SplitCoins":t.SplitCoins.amounts.forEach(t=>{normalizeRawArgument(t,Bt.U64,e)});break;case"TransferObjects":normalizeRawArgument(t.TransferObjects.address,Bt.Address,e)}}(e),!needsTransactionResolution(e,t))return await validate(e),n();const r=getClient$1(t);return(r.core?.resolveTransactionPlugin()??jsonRpcClientResolveTransactionPlugin(r))(e,t,async()=>{await validate(e),await n()})}function validate(e){e.inputs.forEach((e,t)=>{if("Object"!==e.$kind&&"Pure"!==e.$kind)throw new Error(`Input at index ${t} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function getClient$1(e){if(!e.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}function normalizeRawArgument(e,t,n){if("Input"!==e.$kind)return;const r=n.inputs[e.Input];"UnresolvedPure"===r.$kind&&(n.inputs[e.Input]=Zt.Pure(t.serialize(r.UnresolvedPure.value)))}function createObjectMethods(e){function object(t){return e(t)}return object.system=e=>{const t=e?.mutable;return object(void 0!==t?Zt.SharedObjectRef({objectId:"0x5",initialSharedVersion:1,mutable:t}):{$kind:"UnresolvedObject",UnresolvedObject:{objectId:"0x5",initialSharedVersion:1}})},object.clock=()=>object(Zt.SharedObjectRef({objectId:"0x6",initialSharedVersion:1,mutable:!1})),object.random=()=>object({$kind:"UnresolvedObject",UnresolvedObject:{objectId:"0x8",mutable:!1}}),object.denyList=e=>object({$kind:"UnresolvedObject",UnresolvedObject:{objectId:"0x403",mutable:e?.mutable}}),object.option=({type:e,value:t})=>n=>n.moveCall({typeArguments:[e],target:"0x1::option::"+(null===t?"none":"some"),arguments:null===t?[]:[n.object(t)]}),object}function createPure(e){function pure(t,n){if("string"==typeof t)return e(pureBcsSchemaFromTypeName(t).serialize(n));if(t instanceof Uint8Array||isSerializedBcs(t))return e(t);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return pure.u8=t=>e(Bt.U8.serialize(t)),pure.u16=t=>e(Bt.U16.serialize(t)),pure.u32=t=>e(Bt.U32.serialize(t)),pure.u64=t=>e(Bt.U64.serialize(t)),pure.u128=t=>e(Bt.U128.serialize(t)),pure.u256=t=>e(Bt.U256.serialize(t)),pure.bool=t=>e(Bt.Bool.serialize(t)),pure.string=t=>e(Bt.String.serialize(t)),pure.address=t=>e(Bt.Address.serialize(t)),pure.id=pure.address,pure.vector=(t,n)=>e(Bt.vector(pureBcsSchemaFromTypeName(t)).serialize(n)),pure.option=(t,n)=>e(Bt.option(pureBcsSchemaFromTypeName(t)).serialize(n)),pure}function prepareSuiAddress(e){return normalizeSuiAddress(e).replace("0x","")}class TransactionDataBuilder{constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const t=Bt.TransactionKind.parse(e).ProgrammableTransaction;if(!t)throw new Error("Unable to deserialize from bytes.");return TransactionDataBuilder.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:t.inputs,commands:t.commands})}static fromBytes(e){const t=Bt.TransactionData.parse(e),n=t?.V1,r=n.kind.ProgrammableTransaction;if(!n||!r)throw new Error("Unable to deserialize from bytes.");return TransactionDataBuilder.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:r.inputs,commands:r.commands})}static restore(e){return 2===e.version?new TransactionDataBuilder(parse(Ee,e)):new TransactionDataBuilder(parse(Ee,function(e){return parse(Ee,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:e.gasConfig.budget?.toString()??null,price:e.gasConfig.price?.toString()??null,payment:e.gasConfig.payment?.map(e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()}))??null},inputs:e.inputs.map(e=>{if("Input"===e.kind){if(is(Ot,e.value)){const t=parse(Ot,e.value);if(t.Object){if(t.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:t.Object.ImmOrOwned.objectId,version:String(t.Object.ImmOrOwned.version),digest:t.Object.ImmOrOwned.digest}}};if(t.Object.Shared)return{Object:{SharedObject:{mutable:t.Object.Shared.mutable??null,initialSharedVersion:t.Object.Shared.initialSharedVersion,objectId:t.Object.Shared.objectId}}};if(t.Object.Receiving)return{Object:{Receiving:{digest:t.Object.Receiving.digest,version:String(t.Object.Receiving.version),objectId:t.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:toBase64(new Uint8Array(t.Pure))}}}return"object"===e.type?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")}),commands:e.transactions.map(e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?TypeTagSerializer.tagToString(e.type.Some):null,elements:e.objects.map(e=>parseV1TransactionArgument(e))}};case"MergeCoins":return{MergeCoins:{destination:parseV1TransactionArgument(e.destination),sources:e.sources.map(e=>parseV1TransactionArgument(e))}};case"MoveCall":{const[t,n,r]=e.target.split("::");return{MoveCall:{package:t,module:n,function:r,typeArguments:e.typeArguments,arguments:e.arguments.map(e=>parseV1TransactionArgument(e))}}}case"Publish":return{Publish:{modules:e.modules.map(e=>toBase64(Uint8Array.from(e))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:parseV1TransactionArgument(e.coin),amounts:e.amounts.map(e=>parseV1TransactionArgument(e))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map(e=>parseV1TransactionArgument(e)),address:parseV1TransactionArgument(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map(e=>toBase64(Uint8Array.from(e))),dependencies:e.dependencies,package:e.packageId,ticket:parseV1TransactionArgument(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)})})}(e)))}static getDigestFromBytes(e){const t=function(e,t){const n=Array.from(`${e}::`).map(e=>e.charCodeAt(0)),r=new Uint8Array(n.length+t.length);return r.set(n),r.set(t,n.length),vn(r,{dkLen:32})}("TransactionData",e);return P(t)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:t,onlyTransactionKind:n}={}){const r=this.inputs,i=this.commands,s={ProgrammableTransaction:{inputs:r,commands:i}};if(n)return Bt.TransactionKind.serialize(s,{maxSize:e}).toBytes();const a=t?.expiration??this.expiration,o=t?.sender??this.sender,c={...this.gasData,...t?.gasConfig,...t?.gasData};if(!o)throw new Error("Missing transaction sender");if(!c.budget)throw new Error("Missing gas budget");if(!c.payment)throw new Error("Missing gas payment");if(!c.price)throw new Error("Missing gas price");const u={sender:prepareSuiAddress(o),expiration:a||{None:!0},gasData:{payment:c.payment,owner:prepareSuiAddress(this.gasData.owner??o),price:BigInt(c.price),budget:BigInt(c.budget)},kind:{ProgrammableTransaction:{inputs:r,commands:i}}};return Bt.TransactionData.serialize({V1:u},{maxSize:e}).toBytes()}addInput(e,t){const n=this.inputs.length;return this.inputs.push(t),{Input:n,type:e,$kind:"Input"}}getInputUses(e,t){this.mapArguments((n,r)=>("Input"===n.$kind&&n.Input===e&&t(n,r),n))}mapCommandArguments(e,t){const n=this.commands[e];switch(n.$kind){case"MoveCall":n.MoveCall.arguments=n.MoveCall.arguments.map(r=>t(r,n,e));break;case"TransferObjects":n.TransferObjects.objects=n.TransferObjects.objects.map(r=>t(r,n,e)),n.TransferObjects.address=t(n.TransferObjects.address,n,e);break;case"SplitCoins":n.SplitCoins.coin=t(n.SplitCoins.coin,n,e),n.SplitCoins.amounts=n.SplitCoins.amounts.map(r=>t(r,n,e));break;case"MergeCoins":n.MergeCoins.destination=t(n.MergeCoins.destination,n,e),n.MergeCoins.sources=n.MergeCoins.sources.map(r=>t(r,n,e));break;case"MakeMoveVec":n.MakeMoveVec.elements=n.MakeMoveVec.elements.map(r=>t(r,n,e));break;case"Upgrade":n.Upgrade.ticket=t(n.Upgrade.ticket,n,e);break;case"$Intent":const r=n.$Intent.inputs;n.$Intent.inputs={};for(const[i,s]of Object.entries(r))n.$Intent.inputs[i]=Array.isArray(s)?s.map(r=>t(r,n,e)):t(s,n,e);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${n.$kind}`)}}mapArguments(e){for(const t of this.commands.keys())this.mapCommandArguments(t,e)}replaceCommand(e,t,n=e){if(!Array.isArray(t))return void(this.commands[e]=t);const r=t.length-1;this.commands.splice(e,1,...t),0!==r&&this.mapArguments((i,s,a)=>{if(a<e+t.length)return i;switch(i.$kind){case"Result":i.Result===e&&(i.Result=n),i.Result>e&&(i.Result+=r);break;case"NestedResult":i.NestedResult[0]===e&&(i.NestedResult[0]=n),i.NestedResult[0]>e&&(i.NestedResult[0]+=r)}return i})}getDigest(){const e=this.build({onlyTransactionKind:!1});return TransactionDataBuilder.getDigestFromBytes(e)}snapshot(){return parse(Ee,this)}shallowClone(){return new TransactionDataBuilder({version:this.version,sender:this.sender,expiration:this.expiration,gasData:{...this.gasData},inputs:[...this.inputs],commands:[...this.commands]})}}function getIdFromCallArg(e){return"string"==typeof e?normalizeSuiAddress(e):e.Object?e.Object.ImmOrOwnedObject?normalizeSuiAddress(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?normalizeSuiAddress(e.Object.Receiving.objectId):normalizeSuiAddress(e.Object.SharedObject.objectId):e.UnresolvedObject?normalizeSuiAddress(e.UnresolvedObject.objectId):void 0}e("TransactionDataBuilder",TransactionDataBuilder);var An,Mn,Cn,Pn,Rn,Un,$n,Nn,Dn,_n,__typeError$7=e=>{throw TypeError(e)},__accessCheck$7=(e,t,n)=>t.has(e)||__typeError$7("Cannot "+n),__privateGet$7=(e,t,n)=>(__accessCheck$7(e,t,"read from private field"),n?n.call(e):t.get(e)),__privateAdd$7=(e,t,n)=>t.has(e)?__typeError$7("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),__privateSet$6=(e,t,n,r)=>(__accessCheck$7(e,t,"write to private field"),t.set(e,n),n),__privateMethod$2=(e,t,n)=>(__accessCheck$7(e,t,"access private method"),n);const zn={"Mvr-Source":`@mysten/sui@${c}`};class MvrClient{constructor({cache:e,url:t,pageSize:n=50,overrides:r}){__privateAdd$7(this,Rn),__privateAdd$7(this,An),__privateAdd$7(this,Mn),__privateAdd$7(this,Cn),__privateAdd$7(this,Pn),__privateSet$6(this,An,e),__privateSet$6(this,Mn,t),__privateSet$6(this,Cn,n),__privateSet$6(this,Pn,{packages:r?.packages,types:r?.types}),function(e){if(e?.packages)for(const[t,n]of Object.entries(e.packages)){if(!te(t))throw new Error(`Invalid package name: ${t}`);if(!isValidSuiAddress(normalizeSuiAddress(n)))throw new Error(`Invalid package ID: ${n}`)}if(e?.types)for(const[t,n]of Object.entries(e.types)){if(parseStructTag(t).typeParams.length>0)throw new Error("Type overrides must be first-level only. If you want to supply generic types, just pass each type individually.");if(!isValidSuiAddress(parseStructTag(n).address))throw new Error(`Invalid type: ${n}`)}}(__privateGet$7(this,Pn))}async resolvePackage({package:e}){if(!hasMvrName(e))return{package:e};return{package:await __privateGet$7(this,Rn,Un).load(e)}}async resolveType({type:e}){if(!hasMvrName(e))return{type:e};const t=[...extractMvrTypes(e)],n=await __privateGet$7(this,Rn,$n).loadMany(t),r={};for(let e=0;e<t.length;e++){const i=n[e];if(i instanceof Error)throw i;r[t[e]]=i}return{type:replaceMvrNames(e,r)}}async resolve({types:e=[],packages:t=[]}){const n=new Set;for(const t of e??[])extractMvrTypes(t,n);const r=[...n],[i,s]=await Promise.all([r.length>0?__privateGet$7(this,Rn,$n).loadMany(r):[],t.length>0?__privateGet$7(this,Rn,Un).loadMany(t):[]]),a={...__privateGet$7(this,Pn)?.types};for(const[e,t]of r.entries()){const n=i[e];if(n instanceof Error)throw n;a[t]=n}const o={};for(const t of e??[]){const e=replaceMvrNames(t,a);o[t]={type:e}}const c={};for(const[e,n]of(t??[]).entries()){const t=__privateGet$7(this,Pn)?.packages?.[n]??s[e];if(t instanceof Error)throw t;c[n]={package:t}}return{types:o,packages:c}}}function extractMvrTypes(e,t=new Set){if("string"==typeof e&&!hasMvrName(e))return t;const n=isStructTag(e)?e:parseStructTag(e);hasMvrName(n.address)&&t.add(`${n.address}::${n.module}::${n.name}`);for(const e of n.typeParams)extractMvrTypes(e,t);return t}function replaceMvrNames(e,t){const n=isStructTag(e)?e:parseStructTag(e),r=`${n.address}::${n.module}::${n.name}`,i=t[r];return normalizeStructTag({...n,address:i?i.split("::")[0]:n.address,typeParams:n.typeParams.map(e=>replaceMvrNames(e,t))})}function hasMvrName(e){return e.includes("/")||e.includes("@")||e.includes(".sui")}function isStructTag(e){return"object"==typeof e&&"address"in e&&"module"in e&&"name"in e&&"typeParams"in e}function getNamesFromTypeList(e){const t=new Set;for(const n of e)if(hasMvrName(n)){if(!ne(n))throw new Error(`Invalid type with names: ${n}`);t.add(n)}return t}An=new WeakMap,Mn=new WeakMap,Cn=new WeakMap,Pn=new WeakMap,Rn=new WeakSet,Un=function(){return __privateGet$7(this,An).readSync(["#mvrPackageDataLoader",__privateGet$7(this,Mn)??""],()=>{const e=new DataLoader(async e=>{if(!__privateGet$7(this,Mn))throw new Error(`MVR Api URL is not set for the current client (resolving ${e.join(", ")})`);const t=await __privateMethod$2(this,Rn,Nn).call(this,e);return e.map(e=>t[e]??new Error(`Failed to resolve package: ${e}`))}),t=__privateGet$7(this,Pn)?.packages;if(t)for(const[n,r]of Object.entries(t))e.prime(n,r);return e})},$n=function(){return __privateGet$7(this,An).readSync(["#mvrTypeDataLoader",__privateGet$7(this,Mn)??""],()=>{const e=new DataLoader(async e=>{if(!__privateGet$7(this,Mn))throw new Error(`MVR Api URL is not set for the current client (resolving ${e.join(", ")})`);const t=await __privateMethod$2(this,Rn,Dn).call(this,e);return e.map(e=>t[e]??new Error(`Failed to resolve type: ${e}`))}),t=__privateGet$7(this,Pn)?.types;if(t)for(const[n,r]of Object.entries(t))e.prime(n,r);return e})},Nn=async function(e){if(0===e.length)return{};const t=chunk(e,__privateGet$7(this,Cn)),n={};return await Promise.all(t.map(async e=>{const t=await __privateMethod$2(this,Rn,_n).call(this,"/v1/resolution/bulk",{names:e});if(t?.resolution)for(const e of Object.keys(t?.resolution)){const r=t.resolution[e]?.package_id;r&&(n[e]=r)}})),n},Dn=async function(e){if(0===e.length)return{};const t=chunk(e,__privateGet$7(this,Cn)),n={};return await Promise.all(t.map(async e=>{const t=await __privateMethod$2(this,Rn,_n).call(this,"/v1/struct-definition/bulk",{types:e});if(t?.resolution)for(const e of Object.keys(t?.resolution)){const r=t.resolution[e]?.type_tag;r&&(n[e]=r)}})),n},_n=async function(e,t){if(!__privateGet$7(this,Mn))throw new Error("MVR Api URL is not set for the current client");const n=await fetch(`${__privateGet$7(this,Mn)}${e}`,{method:"POST",headers:{"Content-Type":"application/json",...zn},body:JSON.stringify(t)});if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(`Failed to resolve types: ${e?.message}`)}return n.json()};const Vn=new WeakMap,Ln=e("namedPackagesPlugin",e=>{let t;if(e){const n=e.overrides??{packages:{},types:{}};Vn.has(n)||Vn.set(n,new G),t=new MvrClient({cache:Vn.get(n),url:e.url,pageSize:e.pageSize,overrides:n})}return async(e,n,r)=>{const i=function(e){const t=new Set,n=new Set;for(const r of e.commands)switch(r.$kind){case"MakeMoveVec":r.MakeMoveVec.type&&getNamesFromTypeList([r.MakeMoveVec.type]).forEach(e=>{n.add(e)});break;case"MoveCall":const e=r.MoveCall,i=e.package.split("::")[0];if(hasMvrName(i)){if(!te(i))throw new Error(`Invalid package name: ${i}`);t.add(i)}getNamesFromTypeList(e.typeArguments??[]).forEach(e=>{n.add(e)})}return{packages:[...t],types:[...n]}}(e);if(0===i.types.length&&0===i.packages.length)return r();const s=await(t||function(e){if(!e.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}(n).core.mvr).resolve({types:i.types,packages:i.packages});!function(e,t){for(const n of e.commands){if(n.MakeMoveVec?.type){if(!hasMvrName(n.MakeMoveVec.type))continue;if(!t.types[n.MakeMoveVec.type])throw new Error(`No resolution found for type: ${n.MakeMoveVec.type}`);n.MakeMoveVec.type=t.types[n.MakeMoveVec.type].type}const e=n.MoveCall;if(!e)continue;const r=e.package.split("::"),i=r[0];if(hasMvrName(i)&&!t.packages[i])throw new Error(`No address found for package: ${i}`);hasMvrName(i)&&(r[0]=t.packages[i].package,e.package=r.join("::"));const s=e.typeArguments;if(s){for(let e=0;e<s.length;e++)if(hasMvrName(s[e])){if(!t.types[s[e]])throw new Error(`No resolution found for type: ${s[e]}`);s[e]=t.types[s[e]].type}e.typeArguments=s}}}(e,s),await r()}});var Fn,Wn,qn,Hn,Gn,Kn,Zn,Yn,Jn,Xn,Qn,er,tr,nr,rr,ir,sr,ar,or,__typeError$6=e=>{throw TypeError(e)},__accessCheck$6=(e,t,n)=>t.has(e)||__typeError$6("Cannot "+n),__privateGet$6=(e,t,n)=>(__accessCheck$6(e,t,"read from private field"),n?n.call(e):t.get(e)),__privateAdd$6=(e,t,n)=>t.has(e)?__typeError$6("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),__privateSet$5=(e,t,n,r)=>(__accessCheck$6(e,t,"write to private field"),t.set(e,n),n),__privateMethod$1=(e,t,n)=>(__accessCheck$6(e,t,"access private method"),n);function createTransactionResult(e,t=1/0){const n=[],nestedResultFor=t=>n[t]??(n[t]={$kind:"NestedResult",get NestedResult(){return["function"==typeof e?e():e,t]}});return new Proxy({$kind:"Result",get Result(){return"function"==typeof e?e():e}},{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(e,n){if(n in e)return Reflect.get(e,n);if(n===Symbol.iterator)return function*(){let e=0;for(;e<t;)yield nestedResultFor(e),e++};if("symbol"==typeof n)return;const r=parseInt(n,10);return Number.isNaN(r)||r<0?void 0:nestedResultFor(r)}})}const cr=Symbol.for("@mysten/transaction");function isTransaction(e){return!!e&&"object"==typeof e&&!0===e[cr]}const ur={buildPlugins:new Map,serializationPlugins:new Map},lr=Symbol.for("@mysten/transaction/registry");function getGlobalPluginRegistry(){try{const e=globalThis;return e[lr]||(e[lr]=ur),e[lr]}catch{return ur}}const dr=class _Transaction{constructor(){__privateAdd$6(this,Xn),__privateAdd$6(this,Fn),__privateAdd$6(this,Wn),__privateAdd$6(this,qn,new Map),__privateAdd$6(this,Hn,[]),__privateAdd$6(this,Gn,[]),__privateAdd$6(this,Kn,new Set),__privateAdd$6(this,Zn,new Set),__privateAdd$6(this,Yn,new Map),__privateAdd$6(this,Jn),this.object=createObjectMethods(e=>{if("function"==typeof e)return this.object(this.add(e));if("object"==typeof e&&is(le,e))return e;const t=getIdFromCallArg(e),n=__privateGet$6(this,Jn).inputs.find(e=>t===getIdFromCallArg(e));return n?.Object?.SharedObject&&"object"==typeof e&&e.Object?.SharedObject&&(n.Object.SharedObject.mutable=n.Object.SharedObject.mutable||e.Object.SharedObject.mutable),n?{$kind:"Input",Input:__privateGet$6(this,Jn).inputs.indexOf(n),type:"object"}:__privateMethod$1(this,Xn,tr).call(this,"object","string"==typeof e?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:normalizeSuiAddress(e)}}:e)});const e=getGlobalPluginRegistry();__privateSet$5(this,Jn,new TransactionDataBuilder),__privateSet$5(this,Wn,[...e.buildPlugins.values()]),__privateSet$5(this,Fn,[...e.serializationPlugins.values()])}static fromKind(e){const t=new _Transaction;return __privateSet$5(t,Jn,TransactionDataBuilder.fromKindBytes("string"==typeof e?fromBase64(e):e)),__privateSet$5(t,Hn,__privateGet$6(t,Jn).inputs.slice()),__privateSet$5(t,Gn,__privateGet$6(t,Jn).commands.slice()),__privateSet$5(t,Kn,new Set(__privateGet$6(t,Gn).map((e,t)=>t))),t}static from(e){const t=new _Transaction;return isTransaction(e)?__privateSet$5(t,Jn,TransactionDataBuilder.restore(e.getData())):"string"==typeof e&&e.startsWith("{")?__privateSet$5(t,Jn,TransactionDataBuilder.restore(JSON.parse(e))):__privateSet$5(t,Jn,TransactionDataBuilder.fromBytes("string"==typeof e?fromBase64(e):e)),__privateSet$5(t,Hn,__privateGet$6(t,Jn).inputs.slice()),__privateSet$5(t,Gn,__privateGet$6(t,Jn).commands.slice()),__privateSet$5(t,Kn,new Set(__privateGet$6(t,Gn).map((e,t)=>t))),t}static registerGlobalSerializationPlugin(e,t){getGlobalPluginRegistry().serializationPlugins.set(e,t??e)}static unregisterGlobalSerializationPlugin(e){getGlobalPluginRegistry().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,t){getGlobalPluginRegistry().buildPlugins.set(e,t??e)}static unregisterGlobalBuildPlugin(e){getGlobalPluginRegistry().buildPlugins.delete(e)}addSerializationPlugin(e){__privateGet$6(this,Fn).push(e)}addBuildPlugin(e){__privateGet$6(this,Wn).push(e)}addIntentResolver(e,t){if(__privateGet$6(this,qn).has(e)&&__privateGet$6(this,qn).get(e)!==t)throw new Error(`Intent resolver for ${e} already exists`);__privateGet$6(this,qn).set(e,t)}setSender(e){__privateGet$6(this,Jn).sender=e}setSenderIfNotSet(e){__privateGet$6(this,Jn).sender||(__privateGet$6(this,Jn).sender=e)}setExpiration(e){__privateGet$6(this,Jn).expiration=e?parse(ve,e):null}setGasPrice(e){__privateGet$6(this,Jn).gasConfig.price=String(e)}setGasBudget(e){__privateGet$6(this,Jn).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){null==__privateGet$6(this,Jn).gasData.budget&&(__privateGet$6(this,Jn).gasConfig.budget=String(e))}setGasOwner(e){__privateGet$6(this,Jn).gasConfig.owner=e}setGasPayment(e){__privateGet$6(this,Jn).gasConfig.payment=e.map(e=>parse(ue,e))}get blockData(){return serializeV1TransactionData(__privateGet$6(this,Jn).snapshot())}getData(){return __privateGet$6(this,Jn).snapshot()}get[cr](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:createPure(e=>isSerializedBcs(e)?__privateMethod$1(this,Xn,tr).call(this,"pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):__privateMethod$1(this,Xn,tr).call(this,"pure",is(we,e)?parse(we,e):e instanceof Uint8Array?Zt.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(Zt.ObjectRef(...e))}receivingRef(...e){return this.object(Zt.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(Zt.SharedObjectRef(...e))}add(e){if("function"==typeof e){if(__privateGet$6(this,Yn).has(e))return __privateGet$6(this,Yn).get(e);const t=__privateMethod$1(this,Xn,Qn).call(this),n=e(t);if(!n||"object"!=typeof n||!("then"in n))return __privateSet$5(this,Kn,__privateGet$6(t,Kn)),__privateGet$6(this,Yn).set(e,n),n;const r=__privateMethod$1(this,Xn,er).call(this,{$kind:"$Intent",$Intent:{name:"AsyncTransactionThunk",inputs:{},data:{resultIndex:__privateGet$6(this,Jn).commands.length,result:null}}});__privateGet$6(this,Zn).add(Promise.resolve(n).then(e=>{r.$Intent.data.result=e}));const i=createTransactionResult(()=>r.$Intent.data.resultIndex);return __privateGet$6(this,Yn).set(e,i),i}return __privateMethod$1(this,Xn,er).call(this,e),createTransactionResult(__privateGet$6(this,Jn).commands.length-1)}splitCoins(e,t){const n=Be.SplitCoins("string"==typeof e?this.object(e):__privateMethod$1(this,Xn,rr).call(this,e),t.map(e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e?this.pure.u64(e):__privateMethod$1(this,Xn,nr).call(this,e)));return __privateMethod$1(this,Xn,er).call(this,n),createTransactionResult(__privateGet$6(this,Jn).commands.length-1,t.length)}mergeCoins(e,t){return this.add(Be.MergeCoins(this.object(e),t.map(e=>this.object(e))))}publish({modules:e,dependencies:t}){return this.add(Be.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,package:n,ticket:r}){return this.add(Be.Upgrade({modules:e,dependencies:t,package:n,ticket:this.object(r)}))}moveCall({arguments:e,...t}){return this.add(Be.MoveCall({...t,arguments:e?.map(e=>__privateMethod$1(this,Xn,nr).call(this,e))}))}transferObjects(e,t){return this.add(Be.TransferObjects(e.map(e=>this.object(e)),"string"==typeof t?this.pure.address(t):__privateMethod$1(this,Xn,nr).call(this,t)))}makeMoveVec({type:e,elements:t}){return this.add(Be.MakeMoveVec({type:e,elements:t.map(e=>this.object(e))}))}serialize(){return JSON.stringify(serializeV1TransactionData(__privateGet$6(this,Jn).snapshot()))}async toJSON(e={}){await this.prepareForSerialization(e);const t=this.isFullyResolved();return JSON.stringify(parse(Kt,t?{...__privateGet$6(this,Jn).snapshot(),digest:__privateGet$6(this,Jn).getDigest()}:__privateGet$6(this,Jn).snapshot()),(e,t)=>"bigint"==typeof t?t.toString():t,2)}async sign(e){const{signer:t,...n}=e,r=await this.build(n);return t.signTransaction(r)}isFullyResolved(){return!!__privateGet$6(this,Jn).sender&&(!(__privateGet$6(this,Zn).size>0)&&(!__privateGet$6(this,Jn).commands.some(e=>e.$Intent)&&!needsTransactionResolution(__privateGet$6(this,Jn),{})))}async build(e={}){return await this.prepareForSerialization(e),await __privateMethod$1(this,Xn,ir).call(this,e),__privateGet$6(this,Jn).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await this.prepareForSerialization(e),await __privateMethod$1(this,Xn,ir).call(this,e),__privateGet$6(this,Jn).getDigest()}async prepareForSerialization(e){await __privateMethod$1(this,Xn,ar).call(this),__privateMethod$1(this,Xn,or).call(this);const t=new Set;for(const e of __privateGet$6(this,Jn).commands)e.$Intent&&t.add(e.$Intent.name);const n=[...__privateGet$6(this,Fn)];for(const r of t)if(!e.supportedIntents?.includes(r)){if(!__privateGet$6(this,qn).has(r))throw new Error(`Missing intent resolver for ${r}`);n.push(__privateGet$6(this,qn).get(r))}n.push(Ln()),await __privateMethod$1(this,Xn,sr).call(this,n,e)}};Fn=new WeakMap,Wn=new WeakMap,qn=new WeakMap,Hn=new WeakMap,Gn=new WeakMap,Kn=new WeakMap,Zn=new WeakMap,Yn=new WeakMap,Jn=new WeakMap,Xn=new WeakSet,Qn=function(){const e=new dr;return __privateSet$5(e,Jn,__privateGet$6(this,Jn)),__privateSet$5(e,Fn,__privateGet$6(this,Fn)),__privateSet$5(e,Wn,__privateGet$6(this,Wn)),__privateSet$5(e,qn,__privateGet$6(this,qn)),__privateSet$5(e,Zn,__privateGet$6(this,Zn)),__privateSet$5(e,Kn,new Set(__privateGet$6(this,Kn))),__privateSet$5(e,Yn,__privateGet$6(this,Yn)),__privateGet$6(this,Hn).push(__privateGet$6(e,Hn)),__privateGet$6(this,Gn).push(__privateGet$6(e,Gn)),e},er=function(e){const t=__privateGet$6(this,Jn).commands.length;return __privateGet$6(this,Gn).push(e),__privateGet$6(this,Kn).add(t),__privateGet$6(this,Jn).commands.push(e),__privateGet$6(this,Jn).mapCommandArguments(t,e=>{if("Result"===e.$kind&&!__privateGet$6(this,Kn).has(e.Result))throw new Error(`Result { Result: ${e.Result} } is not available to use the current transaction`);if("NestedResult"===e.$kind&&!__privateGet$6(this,Kn).has(e.NestedResult[0]))throw new Error(`Result { NestedResult: [${e.NestedResult[0]}, ${e.NestedResult[1]}] } is not available to use the current transaction`);if("Input"===e.$kind&&e.Input>=__privateGet$6(this,Jn).inputs.length)throw new Error(`Input { Input: ${e.Input} } references an input that does not exist in the current transaction`);return e}),e},tr=function(e,t){return __privateGet$6(this,Hn).push(t),__privateGet$6(this,Jn).addInput(e,t)},nr=function(e){return isSerializedBcs(e)?this.pure(e):__privateMethod$1(this,Xn,rr).call(this,e)},rr=function(e){if("function"==typeof e){const t=this.add(e);return"function"==typeof t?__privateMethod$1(this,Xn,rr).call(this,t):parse(le,t)}return parse(le,e)},ir=async function(e){if(!e.onlyTransactionKind&&!__privateGet$6(this,Jn).sender)throw new Error("Missing transaction sender");await __privateMethod$1(this,Xn,sr).call(this,[...__privateGet$6(this,Wn),resolveTransactionPlugin],e)},sr=async function(e,t){try{const createNext=n=>{if(n>=e.length)return()=>{};const r=e[n];return async()=>{const e=createNext(n+1);let i=!1,s=!1;if(await r(__privateGet$6(this,Jn),t,async()=>{if(i)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);i=!0,await e(),s=!0}),!i)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!s)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}};await createNext(0)()}finally{__privateSet$5(this,Hn,__privateGet$6(this,Jn).inputs.slice()),__privateSet$5(this,Gn,__privateGet$6(this,Jn).commands.slice())}},ar=async function(){for(;__privateGet$6(this,Zn).size>0;){const e=Promise.all(__privateGet$6(this,Zn));__privateGet$6(this,Zn).clear(),__privateGet$6(this,Zn).add(e),await e,__privateGet$6(this,Zn).delete(e)}},or=function(){const e=__privateGet$6(this,Jn).commands,t=__privateGet$6(this,Jn).inputs,n=__privateGet$6(this,Gn).flat(1/0),r=__privateGet$6(this,Hn).flat(1/0);if(n.length!==e.length)throw new Error("Unexpected number of commands found in transaction data");if(r.length!==t.length)throw new Error("Unexpected number of inputs found in transaction data");const i=n.filter(e=>"AsyncTransactionThunk"!==e.$Intent?.name);function getOriginalIndex(t){const n=e[t];if("AsyncTransactionThunk"===n.$Intent?.name){const e=n.$Intent.data.result;if(null==e)throw new Error("AsyncTransactionThunk has not been resolved");return getOriginalIndex(e.Result)}const r=i.indexOf(n);if(-1===r)throw new Error("Unable to find original index for command");return r}__privateGet$6(this,Jn).commands=i,__privateGet$6(this,Jn).inputs=r,__privateSet$5(this,Gn,i),__privateSet$5(this,Hn,r),__privateSet$5(this,Kn,new Set(i.map((e,t)=>t))),__privateGet$6(this,Jn).mapArguments(e=>{if("Input"===e.$kind){const n=r.indexOf(t[e.Input]);if(-1===n)throw new Error("Input has not been resolved");return{...e,Input:n}}if("Result"===e.$kind){const t=getOriginalIndex(e.Result);return{...e,Result:t}}if("NestedResult"===e.$kind){const t=getOriginalIndex(e.NestedResult[0]);return{...e,NestedResult:[t,e.NestedResult[1]]}}return e});for(const[t,n]of e.entries())if("AsyncTransactionThunk"===n.$Intent?.name)try{n.$Intent.data.resultIndex=getOriginalIndex(t)}catch{}};let fr=e("Transaction",dr);const hr={mainnet:"https://mainnet.mvr.mystenlabs.com",testnet:"https://testnet.mvr.mystenlabs.com"};class Experimental_CoreClient extends Experimental_BaseClient{constructor(e){super(e),this.core=this,this.mvr=new MvrClient({cache:this.cache.scope("core.mvr"),url:e.mvr?.url??hr[this.network],pageSize:e.mvr?.pageSize,overrides:e.mvr?.overrides})}async getObject(e){const{objectId:t}=e,{objects:[n]}=await this.getObjects({objectIds:[t],signal:e.signal});if(n instanceof Error)throw n;return{object:n}}async getDynamicField(e){const t=TypeTagSerializer.parseFromStr((await this.core.mvr.resolveType({type:e.name.type})).type),n=deriveDynamicFieldID(e.parentId,t,e.name.bcs),{objects:[r]}=await this.getObjects({objectIds:[n],signal:e.signal});if(r instanceof Error)throw r;const i=parseStructTag(r.type),s=await r.content;return{dynamicField:{id:r.id,digest:r.digest,version:r.version,type:r.type,previousTransaction:r.previousTransaction,name:{type:"string"==typeof i.typeParams[0]?i.typeParams[0]:normalizeStructTag(i.typeParams[0]),bcs:e.name.bcs},value:{type:"string"==typeof i.typeParams[1]?i.typeParams[1]:normalizeStructTag(i.typeParams[1]),bcs:s.slice(ie+e.name.bcs.length)}}}}async waitForTransaction({signal:e,timeout:t=6e4,...n}){const r=e?AbortSignal.any([AbortSignal.timeout(t),e]):AbortSignal.timeout(t),i=new Promise((e,t)=>{r.addEventListener("abort",()=>t(r.reason))});for(i.catch(()=>{});;){r.throwIfAborted();try{return await this.getTransaction({...n,signal:r})}catch{await Promise.race([new Promise(e=>setTimeout(e,2e3)),i])}}}}class SuiClientError extends Error{}class ObjectError extends SuiClientError{constructor(e,t){super(t),this.code=e}static fromResponse(e,t){switch(e.code){case"notExists":return new ObjectError(e.code,`Object ${e.object_id} does not exist`);case"dynamicFieldNotFound":return new ObjectError(e.code,`Dynamic field not found for object ${e.parent_object_id}`);case"deleted":return new ObjectError(e.code,`Object ${e.object_id} has been deleted`);case"displayError":return new ObjectError(e.code,`Display error: ${e.error}`);default:return new ObjectError(e.code,"Unknown error while loading object"+(t?` ${t}`:""))}}}function parseTransactionEffectsBcs(e){const t=Bt.TransactionEffects.parse(e);switch(t.$kind){case"V1":return function(){throw new Error("V1 effects are not supported yet")}(t.V1);case"V2":return function({bytes:e,effects:t}){const n=t.changedObjects.map(([e,n])=>({id:e,inputState:"Exist"===n.inputState.$kind?"Exists":"DoesNotExist",inputVersion:n.inputState.Exist?.[0][0]??null,inputDigest:n.inputState.Exist?.[0][1]??null,inputOwner:n.inputState.Exist?.[1]??null,outputState:"NotExist"===n.outputState.$kind?"DoesNotExist":n.outputState.$kind,outputVersion:"PackageWrite"===n.outputState.$kind?n.outputState.PackageWrite?.[0]:n.outputState.ObjectWrite?t.lamportVersion:null,outputDigest:"PackageWrite"===n.outputState.$kind?n.outputState.PackageWrite?.[1]:n.outputState.ObjectWrite?.[0]??null,outputOwner:n.outputState.ObjectWrite?n.outputState.ObjectWrite[1]:null,idOperation:n.idOperation.$kind}));return{bcs:e,digest:t.transactionDigest,version:2,status:"Success"===t.status.$kind?{success:!0,error:null}:{success:!1,error:t.status.Failed.error.$kind},gasUsed:t.gasUsed,transactionDigest:t.transactionDigest,gasObject:null===t.gasObjectIndex?null:n[t.gasObjectIndex]??null,eventsDigest:t.eventsDigest,dependencies:t.dependencies,lamportVersion:t.lamportVersion,changedObjects:n,unchangedConsensusObjects:t.unchangedSharedObjects.map(([e,t])=>({kind:"MutateDeleted"===t.$kind?"MutateConsensusStreamEnded":"ReadDeleted"===t.$kind?"ReadConsensusStreamEnded":t.$kind,objectId:e,version:"ReadOnlyRoot"===t.$kind?t.ReadOnlyRoot[0]:t[t.$kind],digest:"ReadOnlyRoot"===t.$kind?t.ReadOnlyRoot[1]:null})),auxiliaryDataDigest:t.auxDataDigest}}({bytes:e,effects:t.V2});default:throw new Error(`Unknown transaction effects version: ${t.$kind}`)}}var pr,__typeError$5=e=>{throw TypeError(e)},__accessCheck$5=(e,t,n)=>t.has(e)||__typeError$5("Cannot "+n),__privateGet$5=(e,t,n)=>(__accessCheck$5(e,t,"read from private field"),n?n.call(e):t.get(e));class JSONRpcCoreClient extends Experimental_CoreClient{constructor({jsonRpcClient:e,mvr:t}){var n,r,i;super({network:e.network,base:e,mvr:t}),n=this,(r=pr).has(n)?__typeError$5("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(n):r.set(n,i),((e,t,n)=>{__accessCheck$5(e,t,"write to private field"),t.set(e,n)})(this,pr,e)}async getObjects(e){const t=chunk(e.objectIds,50),n=[];for(const r of t){const t=await __privateGet$5(this,pr).multiGetObjects({ids:r,options:{showOwner:!0,showType:!0,showBcs:!0,showPreviousTransaction:!0},signal:e.signal});for(const[e,i]of t.entries())i.error?n.push(ObjectError.fromResponse(i.error,r[e])):n.push(parseObject(i.data))}return{objects:n}}async getOwnedObjects(e){const t=await __privateGet$5(this,pr).getOwnedObjects({owner:e.address,limit:e.limit,cursor:e.cursor,options:{showOwner:!0,showType:!0,showBcs:!0,showPreviousTransaction:!0},filter:e.type?{StructType:e.type}:null,signal:e.signal});return{objects:t.data.map(e=>{if(e.error)throw ObjectError.fromResponse(e.error);return parseObject(e.data)}),hasNextPage:t.hasNextPage,cursor:t.nextCursor??null}}async getCoins(e){const t=await __privateGet$5(this,pr).getCoins({owner:e.address,coinType:e.coinType,limit:e.limit,cursor:e.cursor,signal:e.signal});return{objects:t.data.map(t=>({id:t.coinObjectId,version:t.version,digest:t.digest,balance:t.balance,type:`0x2::coin::Coin<${t.coinType}>`,content:Promise.resolve(yr.serialize({id:t.coinObjectId,balance:{value:t.balance}}).toBytes()),owner:{$kind:"ObjectOwner",ObjectOwner:e.address},previousTransaction:t.previousTransaction})),hasNextPage:t.hasNextPage,cursor:t.nextCursor??null}}async getBalance(e){const t=await __privateGet$5(this,pr).getBalance({owner:e.address,coinType:e.coinType,signal:e.signal});return{balance:{coinType:t.coinType,balance:t.totalBalance}}}async getAllBalances(e){return{balances:(await __privateGet$5(this,pr).getAllBalances({owner:e.address,signal:e.signal})).map(e=>({coinType:e.coinType,balance:e.totalBalance})),hasNextPage:!1,cursor:null}}async getTransaction(e){return{transaction:parseTransaction(await __privateGet$5(this,pr).getTransactionBlock({digest:e.digest,options:{showRawInput:!0,showObjectChanges:!0,showRawEffects:!0,showEvents:!0,showEffects:!0,showBalanceChanges:!0},signal:e.signal}))}}async executeTransaction(e){return{transaction:parseTransaction(await __privateGet$5(this,pr).executeTransactionBlock({transactionBlock:e.transaction,signature:e.signatures,options:{showRawEffects:!0,showEvents:!0,showObjectChanges:!0,showRawInput:!0,showEffects:!0,showBalanceChanges:!0},signal:e.signal}))}}async dryRunTransaction(e){const t=fr.from(e.transaction),n=await __privateGet$5(this,pr).dryRunTransactionBlock({transactionBlock:e.transaction,signal:e.signal}),{effects:r,objectTypes:i}=function({bytes:e,effects:t,objectChanges:n}){const r=[],i=[],s={};return n?.forEach(e=>{switch(e.type){case"published":r.push({id:e.packageId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"PackageWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:null,idOperation:"Created"});break;case"transferred":r.push({id:e.objectId,inputState:"Exists",inputVersion:e.version,inputDigest:e.digest,inputOwner:{$kind:"AddressOwner",AddressOwner:e.sender},outputState:"ObjectWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:parseOwner(e.recipient),idOperation:"None"}),s[e.objectId]=e.objectType;break;case"mutated":r.push({id:e.objectId,inputState:"Exists",inputVersion:e.previousVersion,inputDigest:null,inputOwner:parseOwner(e.owner),outputState:"ObjectWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:parseOwner(e.owner),idOperation:"None"}),s[e.objectId]=e.objectType;break;case"deleted":r.push({id:e.objectId,inputState:"Exists",inputVersion:e.version,inputDigest:t.deleted?.find(t=>t.objectId===e.objectId)?.digest??null,inputOwner:null,outputState:"DoesNotExist",outputVersion:null,outputDigest:null,outputOwner:null,idOperation:"Deleted"}),s[e.objectId]=e.objectType;break;case"wrapped":r.push({id:e.objectId,inputState:"Exists",inputVersion:e.version,inputDigest:null,inputOwner:{$kind:"AddressOwner",AddressOwner:e.sender},outputState:"ObjectWrite",outputVersion:e.version,outputDigest:t.wrapped?.find(t=>t.objectId===e.objectId)?.digest??null,outputOwner:{$kind:"ObjectOwner",ObjectOwner:e.sender},idOperation:"None"}),s[e.objectId]=e.objectType;break;case"created":r.push({id:e.objectId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:parseOwner(e.owner),idOperation:"Created"}),s[e.objectId]=e.objectType}}),{objectTypes:s,effects:{bcs:e??null,digest:t.transactionDigest,version:2,status:"success"===t.status.status?{success:!0,error:null}:{success:!1,error:t.status.error},gasUsed:t.gasUsed,transactionDigest:t.transactionDigest,gasObject:{id:t.gasObject?.reference.objectId,inputState:"Exists",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:t.gasObject.reference.version,outputDigest:t.gasObject.reference.digest,outputOwner:parseOwner(t.gasObject.owner),idOperation:"None"},eventsDigest:t.eventsDigest??null,dependencies:t.dependencies??[],lamportVersion:t.gasObject.reference.version,changedObjects:r,unchangedConsensusObjects:i,auxiliaryDataDigest:null}}}({effects:n.effects,objectChanges:n.objectChanges});return{transaction:{digest:await t.getDigest(),epoch:null,effects:r,objectTypes:Promise.resolve(i),signatures:[],transaction:(s=e.transaction,{...TransactionDataBuilder.fromBytes(s).snapshot(),bcs:s}),balanceChanges:n.balanceChanges.map(e=>({coinType:e.coinType,address:parseOwnerAddress(e.owner),amount:e.amount}))}};var s}async getReferenceGasPrice(e){const t=await __privateGet$5(this,pr).getReferenceGasPrice({signal:e?.signal});return{referenceGasPrice:String(t)}}async getDynamicFields(e){const t=await __privateGet$5(this,pr).getDynamicFields({parentId:e.parentId,limit:e.limit,cursor:e.cursor});return{dynamicFields:t.data.map(e=>({id:e.objectId,type:e.objectType,name:{type:e.name.type,bcs:fromBase64(e.bcsName)}})),hasNextPage:t.hasNextPage,cursor:t.nextCursor}}async verifyZkLoginSignature(e){const t=await __privateGet$5(this,pr).verifyZkLoginSignature({bytes:e.bytes,signature:e.signature,intentScope:e.intentScope,author:e.author});return{success:t.success,errors:t.errors}}resolveNameServiceNames(e){return __privateGet$5(this,pr).resolveNameServiceNames(e)}resolveTransactionPlugin(){return jsonRpcClientResolveTransactionPlugin(__privateGet$5(this,pr))}async getMoveFunction(e){const t=await __privateGet$5(this,pr).getNormalizedMoveFunction({package:(await this.mvr.resolvePackage({package:e.packageId})).package,module:e.moduleName,function:e.name});return{function:{packageId:normalizeSuiAddress(e.packageId),moduleName:e.moduleName,name:e.name,visibility:parseVisibility(t.visibility),isEntry:t.isEntry,typeParameters:t.typeParameters.map(e=>{return{isPhantom:!1,constraints:(t=e,t.abilities.map(e=>{switch(e){case"Copy":return"copy";case"Drop":return"drop";case"Store":return"store";case"Key":return"key";default:return"unknown"}}))};var t}),parameters:t.parameters.map(e=>parseNormalizedSuiMoveType(e)),returns:t.return.map(e=>parseNormalizedSuiMoveType(e))}}}}function parseObject(e){return{id:e.objectId,version:e.version,digest:e.digest,type:e.type,content:Promise.resolve("moveObject"===e.bcs?.dataType?fromBase64(e.bcs.bcsBytes):new Uint8Array),owner:parseOwner(e.owner),previousTransaction:e.previousTransaction??null}}function parseOwner(e){if("Immutable"===e)return{$kind:"Immutable",Immutable:!0};if("ConsensusAddressOwner"in e)return{$kind:"ConsensusAddressOwner",ConsensusAddressOwner:{owner:e.ConsensusAddressOwner.owner,startVersion:e.ConsensusAddressOwner.start_version}};if("AddressOwner"in e)return{$kind:"AddressOwner",AddressOwner:e.AddressOwner};if("ObjectOwner"in e)return{$kind:"ObjectOwner",ObjectOwner:e.ObjectOwner};if("Shared"in e)return{$kind:"Shared",Shared:{initialSharedVersion:e.Shared.initial_shared_version}};throw new Error(`Unknown owner type: ${JSON.stringify(e)}`)}function parseOwnerAddress(e){if("Immutable"===e)return null;if("ConsensusAddressOwner"in e)return e.ConsensusAddressOwner.owner;if("AddressOwner"in e)return e.AddressOwner;if("ObjectOwner"in e)return e.ObjectOwner;if("Shared"in e)return null;throw new Error(`Unknown owner type: ${JSON.stringify(e)}`)}function parseTransaction(e){const t=Bt.SenderSignedData.parse(fromBase64(e.rawTransaction))[0],n={};e.objectChanges?.forEach(e=>{"published"!==e.type&&(n[e.objectId]=e.objectType)});const r=Bt.TransactionData.serialize(t.intentMessage.value).toBytes(),i=TransactionDataBuilder.restore({version:2,sender:t.intentMessage.value.V1.sender,expiration:t.intentMessage.value.V1.expiration,gasData:t.intentMessage.value.V1.gasData,inputs:t.intentMessage.value.V1.kind.ProgrammableTransaction.inputs,commands:t.intentMessage.value.V1.kind.ProgrammableTransaction.commands});return{digest:e.digest,epoch:e.effects?.executedEpoch??null,effects:parseTransactionEffectsBcs(new Uint8Array(e.rawEffects)),objectTypes:Promise.resolve(n),transaction:{...i,bcs:r},signatures:t.txSignatures,balanceChanges:e.balanceChanges?.map(e=>({coinType:e.coinType,address:parseOwnerAddress(e.owner),amount:e.amount}))??[]}}pr=new WeakMap;const gr=Bt.struct("Balance",{value:Bt.u64()}),yr=Bt.struct("Coin",{id:Bt.Address,balance:gr});function parseNormalizedSuiMoveType(e){if("string"!=typeof e){if("Reference"in e)return{reference:"immutable",body:parseNormalizedSuiMoveTypeBody(e.Reference)};if("MutableReference"in e)return{reference:"mutable",body:parseNormalizedSuiMoveTypeBody(e.MutableReference)}}return{reference:null,body:parseNormalizedSuiMoveTypeBody(e)}}function parseNormalizedSuiMoveTypeBody(e){switch(e){case"Address":return{$kind:"address"};case"Bool":return{$kind:"bool"};case"U8":return{$kind:"u8"};case"U16":return{$kind:"u16"};case"U32":return{$kind:"u32"};case"U64":return{$kind:"u64"};case"U128":return{$kind:"u128"};case"U256":return{$kind:"u256"}}if("string"==typeof e)throw new Error(`Unknown type: ${e}`);if("Vector"in e)return{$kind:"vector",vector:parseNormalizedSuiMoveTypeBody(e.Vector)};if("Struct"in e)return{$kind:"datatype",datatype:{typeName:`${normalizeSuiAddress(e.Struct.address)}::${e.Struct.module}::${e.Struct.name}`,typeParameters:e.Struct.typeArguments.map(e=>parseNormalizedSuiMoveTypeBody(e))}};if("TypeParameter"in e)return{$kind:"typeParameter",index:e.TypeParameter};throw new Error(`Unknown type: ${JSON.stringify(e)}`)}function parseVisibility(e){switch(e){case"Public":return"public";case"Private":return"private";case"Friend":return"friend";default:return"unknown"}}const mr=Symbol.for("@mysten/SuiClient");e("SuiClient",class extends Experimental_BaseClient{constructor(e){super({network:e.network??"unknown"}),this.jsonRpc=this,this.transport=e.transport??new JsonRpcHTTPTransport({url:e.url}),this.core=new JSONRpcCoreClient({jsonRpcClient:this,mvr:e.mvr})}get[mr](){return!0}async getRpcApiVersion({signal:e}={}){return(await this.transport.request({method:"rpc.discover",params:[],signal:e})).info.version}async getCoins({coinType:e,owner:t,cursor:n,limit:r,signal:i}){if(!t||!isValidSuiAddress(normalizeSuiAddress(t)))throw new Error("Invalid Sui address");return e&&hasMvrName(e)&&(e=(await this.core.mvr.resolveType({type:e})).type),await this.transport.request({method:"suix_getCoins",params:[t,e,n,r],signal:i})}async getAllCoins(e){if(!e.owner||!isValidSuiAddress(normalizeSuiAddress(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit],signal:e.signal})}async getBalance({owner:e,coinType:t,signal:n}){if(!e||!isValidSuiAddress(normalizeSuiAddress(e)))throw new Error("Invalid Sui address");return t&&hasMvrName(t)&&(t=(await this.core.mvr.resolveType({type:t})).type),await this.transport.request({method:"suix_getBalance",params:[e,t],signal:n})}async getAllBalances(e){if(!e.owner||!isValidSuiAddress(normalizeSuiAddress(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner],signal:e.signal})}async getCoinMetadata({coinType:e,signal:t}){return e&&hasMvrName(e)&&(e=(await this.core.mvr.resolveType({type:e})).type),await this.transport.request({method:"suix_getCoinMetadata",params:[e],signal:t})}async getTotalSupply({coinType:e,signal:t}){return e&&hasMvrName(e)&&(e=(await this.core.mvr.resolveType({type:e})).type),await this.transport.request({method:"suix_getTotalSupply",params:[e],signal:t})}async call(e,t,{signal:n}={}){return await this.transport.request({method:e,params:t,signal:n})}async getMoveFunctionArgTypes({package:e,module:t,function:n,signal:r}){return e&&te(e)&&(e=(await this.core.mvr.resolvePackage({package:e})).package),await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e,t,n],signal:r})}async getNormalizedMoveModulesByPackage({package:e,signal:t}){return e&&te(e)&&(e=(await this.core.mvr.resolvePackage({package:e})).package),await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e],signal:t})}async getNormalizedMoveModule({package:e,module:t,signal:n}){return e&&te(e)&&(e=(await this.core.mvr.resolvePackage({package:e})).package),await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e,t],signal:n})}async getNormalizedMoveFunction({package:e,module:t,function:n,signal:r}){return e&&te(e)&&(e=(await this.core.mvr.resolvePackage({package:e})).package),await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e,t,n],signal:r})}async getNormalizedMoveStruct({package:e,module:t,struct:n,signal:r}){return e&&te(e)&&(e=(await this.core.mvr.resolvePackage({package:e})).package),await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e,t,n],signal:r})}async getOwnedObjects(e){if(!e.owner||!isValidSuiAddress(normalizeSuiAddress(e.owner)))throw new Error("Invalid Sui address");const t=e.filter?{...e.filter}:void 0;return t&&"MoveModule"in t&&te(t.MoveModule.package)?t.MoveModule={module:t.MoveModule.module,package:(await this.core.mvr.resolvePackage({package:t.MoveModule.package})).package}:t&&"StructType"in t&&hasMvrName(t.StructType)&&(t.StructType=(await this.core.mvr.resolveType({type:t.StructType})).type),await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:t,options:e.options},e.cursor,e.limit],signal:e.signal})}async getObject(e){if(!e.id||!isValidSuiObjectId(normalizeSuiObjectId(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options],signal:e.signal})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options],signal:e.signal})}async multiGetObjects(e){e.ids.forEach(e=>{if(!e||!isValidSuiObjectId(normalizeSuiObjectId(e)))throw new Error(`Invalid Sui Object id ${e}`)});if(e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options],signal:e.signal})}async queryTransactionBlocks({filter:e,options:t,cursor:n,limit:r,order:i,signal:s}){return e&&"MoveFunction"in e&&te(e.MoveFunction.package)&&(e={...e,MoveFunction:{package:(await this.core.mvr.resolvePackage({package:e.MoveFunction.package})).package}}),await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e,options:t},n,r,"descending"===(i||"descending")],signal:s})}async getTransactionBlock(e){if(!isValidTransactionDigest(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options],signal:e.signal})}async multiGetTransactionBlocks(e){e.digests.forEach(e=>{if(!isValidTransactionDigest(e))throw new Error(`Invalid Transaction digest ${e}`)});if(e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options],signal:e.signal})}async executeTransactionBlock({transactionBlock:e,signature:t,options:n,requestType:r,signal:i}){const s=await this.transport.request({method:"sui_executeTransactionBlock",params:["string"==typeof e?e:toBase64(e),Array.isArray(t)?t:[t],n],signal:i});if("WaitForLocalExecution"===r)try{await this.waitForTransaction({digest:s.digest})}catch{}return s}async signAndExecuteTransaction({transaction:e,signer:t,...n}){let r;e instanceof Uint8Array?r=e:(e.setSenderIfNotSet(t.toSuiAddress()),r=await e.build({client:this}));const{signature:i,bytes:s}=await t.signTransaction(r);return this.executeTransactionBlock({transactionBlock:s,signature:i,...n})}async getTotalTransactionBlocks({signal:e}={}){const t=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[],signal:e});return BigInt(t)}async getReferenceGasPrice({signal:e}={}){const t=await this.transport.request({method:"suix_getReferenceGasPrice",params:[],signal:e});return BigInt(t)}async getStakes(e){if(!e.owner||!isValidSuiAddress(normalizeSuiAddress(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner],signal:e.signal})}async getStakesByIds(e){return e.stakedSuiIds.forEach(e=>{if(!e||!isValidSuiObjectId(normalizeSuiObjectId(e)))throw new Error(`Invalid Sui Stake id ${e}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds],signal:e.signal})}async getLatestSuiSystemState({signal:e}={}){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[],signal:e})}async queryEvents({query:e,cursor:t,limit:n,order:r,signal:i}){return e&&"MoveEventType"in e&&hasMvrName(e.MoveEventType)&&(e={...e,MoveEventType:(await this.core.mvr.resolveType({type:e.MoveEventType})).type}),e&&"MoveEventModule"in e&&te(e.MoveEventModule.package)&&(e={...e,MoveEventModule:{module:e.MoveEventModule.module,package:(await this.core.mvr.resolvePackage({package:e.MoveEventModule.package})).package}}),"MoveModule"in e&&te(e.MoveModule.package)&&(e={...e,MoveModule:{module:e.MoveModule.module,package:(await this.core.mvr.resolvePackage({package:e.MoveModule.package})).package}}),await this.transport.request({method:"suix_queryEvents",params:[e,t,n,"descending"===(r||"descending")],signal:i})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async devInspectTransactionBlock(e){let t;if(isTransaction(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),t=toBase64(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if("string"==typeof e.transactionBlock)t=e.transactionBlock;else{if(!(e.transactionBlock instanceof Uint8Array))throw new Error("Unknown transaction block format.");t=toBase64(e.transactionBlock)}return e.signal?.throwIfAborted(),await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,t,e.gasPrice?.toString(),e.epoch],signal:e.signal})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:["string"==typeof e.transactionBlock?e.transactionBlock:toBase64(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!isValidSuiObjectId(normalizeSuiObjectId(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit],signal:e.signal})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name],signal:e.signal})}async getLatestCheckpointSequenceNumber({signal:e}={}){const t=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[],signal:e});return String(t)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id],signal:e.signal})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder],signal:e.signal})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch],signal:e?.signal})}async getNetworkMetrics({signal:e}={}){return await this.transport.request({method:"suix_getNetworkMetrics",params:[],signal:e})}async getAddressMetrics({signal:e}={}){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[],signal:e})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder],signal:e?.signal})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder],signal:e?.signal})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder],signal:e?.signal})}async getMoveCallMetrics({signal:e}={}){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[],signal:e})}async getCurrentEpoch({signal:e}={}){return await this.transport.request({method:"suix_getCurrentEpoch",params:[],signal:e})}async getValidatorsApy({signal:e}={}){return await this.transport.request({method:"suix_getValidatorsApy",params:[],signal:e})}async getChainIdentifier({signal:e}={}){const t=await this.getCheckpoint({id:"0",signal:e});return toHex(R(t.digest).slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name],signal:e.signal})}async resolveNameServiceNames({format:e="dot",...t}){const{nextCursor:n,hasNextPage:r,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[t.address,t.cursor,t.limit],signal:t.signal});return{hasNextPage:r,nextCursor:n,data:i.map(t=>normalizeSuiNSName(t,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version],signal:e?.signal})}async verifyZkLoginSignature(e){return await this.transport.request({method:"sui_verifyZkLoginSignature",params:[e.bytes,e.signature,e.intentScope,e.author],signal:e.signal})}async waitForTransaction({signal:e,timeout:t=6e4,pollInterval:n=2e3,...r}){const i=AbortSignal.timeout(t),s=new Promise((e,t)=>{i.addEventListener("abort",()=>t(i.reason))});for(s.catch(()=>{});!i.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(r)}catch{await Promise.race([new Promise(e=>setTimeout(e,n)),s])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}experimental_asClientExtension(){return{name:"jsonRPC",register:()=>this}}});var br,wr,vr,__typeError$4=e=>{throw TypeError(e)},__accessCheck$4=(e,t,n)=>t.has(e)||__typeError$4("Cannot "+n),__privateGet$4=(e,t,n)=>(__accessCheck$4(e,t,"read from private field"),n?n.call(e):t.get(e)),__privateAdd$4=(e,t,n)=>t.has(e)?__typeError$4("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),__privateSet$3=(e,t,n,r)=>(__accessCheck$4(e,t,"write to private field"),t.set(e,n),n);class AsyncCache{async getObject(e){const[t,n]=await Promise.all([this.get("OwnedObject",e),this.get("SharedOrImmutableObject",e)]);return t??n??null}async getObjects(e){return Promise.all(e.map(e=>this.getObject(e)))}async addObject(e){return e.owner?await this.set("OwnedObject",e.objectId,e):await this.set("SharedOrImmutableObject",e.objectId,e),e}async addObjects(e){await Promise.all(e.map(async e=>this.addObject(e)))}async deleteObject(e){await Promise.all([this.delete("OwnedObject",e),this.delete("SharedOrImmutableObject",e)])}async deleteObjects(e){await Promise.all(e.map(e=>this.deleteObject(e)))}async getMoveFunctionDefinition(e){const t=`${normalizeSuiAddress(e.package)}::${e.module}::${e.function}`;return this.get("MoveFunction",t)}async addMoveFunctionDefinition(e){const t=normalizeSuiAddress(e.package),n=`${t}::${e.module}::${e.function}`,r={...e,package:t};return await this.set("MoveFunction",n,r),r}async deleteMoveFunctionDefinition(e){const t=`${normalizeSuiAddress(e.package)}::${e.module}::${e.function}`;await this.delete("MoveFunction",t)}async getCustom(e){return this.get("Custom",e)}async setCustom(e,t){return this.set("Custom",e,t)}async deleteCustom(e){return this.delete("Custom",e)}}e("AsyncCache",AsyncCache);class InMemoryCache extends AsyncCache{constructor(){super(...arguments),__privateAdd$4(this,br,{OwnedObject:new Map,SharedOrImmutableObject:new Map,MoveFunction:new Map,Custom:new Map})}async get(e,t){return __privateGet$4(this,br)[e].get(t)??null}async set(e,t,n){__privateGet$4(this,br)[e].set(t,n)}async delete(e,t){__privateGet$4(this,br)[e].delete(t)}async clear(e){if(e)__privateGet$4(this,br)[e].clear();else for(const e of Object.values(__privateGet$4(this,br)))e.clear()}}br=new WeakMap;class ObjectCache{constructor({cache:e=new InMemoryCache,onEffects:t}){__privateAdd$4(this,wr),__privateAdd$4(this,vr),__privateSet$3(this,wr,e),__privateSet$3(this,vr,t)}asPlugin(){return async(e,t,n)=>{const r=e.inputs.filter(e=>e.UnresolvedObject).map(e=>e.UnresolvedObject.objectId),i=(await __privateGet$4(this,wr).getObjects(r)).filter(e=>null!==e),s=new Map(i.map(e=>[e.objectId,e]));for(const t of e.inputs){if(!t.UnresolvedObject)continue;const e=s.get(t.UnresolvedObject.objectId);e&&(e.initialSharedVersion&&!t.UnresolvedObject.initialSharedVersion?t.UnresolvedObject.initialSharedVersion=e.initialSharedVersion:(e.version&&!t.UnresolvedObject.version&&(t.UnresolvedObject.version=e.version),e.digest&&!t.UnresolvedObject.digest&&(t.UnresolvedObject.digest=e.digest)))}await Promise.all(e.commands.map(async e=>{if(e.MoveCall){const t=await this.getMoveFunctionDefinition({package:e.MoveCall.package,module:e.MoveCall.module,function:e.MoveCall.function});t&&(e.MoveCall._argumentTypes=t.parameters)}})),await n(),await Promise.all(e.commands.map(async e=>{e.MoveCall?._argumentTypes&&await __privateGet$4(this,wr).addMoveFunctionDefinition({package:e.MoveCall.package,module:e.MoveCall.module,function:e.MoveCall.function,parameters:e.MoveCall._argumentTypes})}))}}async clear(){await __privateGet$4(this,wr).clear()}async getMoveFunctionDefinition(e){return __privateGet$4(this,wr).getMoveFunctionDefinition(e)}async getObjects(e){return __privateGet$4(this,wr).getObjects(e)}async deleteObjects(e){return __privateGet$4(this,wr).deleteObjects(e)}async clearOwnedObjects(){await __privateGet$4(this,wr).clear("OwnedObject")}async clearCustom(){await __privateGet$4(this,wr).clear("Custom")}async getCustom(e){return __privateGet$4(this,wr).getCustom(e)}async setCustom(e,t){return __privateGet$4(this,wr).setCustom(e,t)}async deleteCustom(e){return __privateGet$4(this,wr).deleteCustom(e)}async applyEffects(e){var t;if(!e.V2)throw new Error(`Unsupported transaction effects version ${e.$kind}`);const{lamportVersion:n,changedObjects:r}=e.V2,i=[],s=[];r.forEach(([e,t])=>{if(t.outputState.NotExist)i.push(e);else if(t.outputState.ObjectWrite){const[r,i]=t.outputState.ObjectWrite;s.push({objectId:e,digest:r,version:n,owner:i.AddressOwner??i.ObjectOwner??null,initialSharedVersion:i.Shared?.initialSharedVersion??null})}}),await Promise.all([__privateGet$4(this,wr).addObjects(s),__privateGet$4(this,wr).deleteObjects(i),null==(t=__privateGet$4(this,vr))?void 0:t.call(this,e)])}}e("ObjectCache",ObjectCache),wr=new WeakMap,vr=new WeakMap;var Er,Sr,__typeError$3=e=>{throw TypeError(e)},__accessCheck$3=(e,t,n)=>t.has(e)||__typeError$3("Cannot "+n),__privateGet$3=(e,t,n)=>(__accessCheck$3(e,t,"read from private field"),n?n.call(e):t.get(e)),__privateAdd$3=(e,t,n)=>t.has(e)?__typeError$3("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),__privateSet$2=(e,t,n,r)=>(__accessCheck$3(e,t,"write to private field"),t.set(e,n),n);class CachingTransactionExecutor{constructor({client:e,...t}){__privateAdd$3(this,Er),__privateAdd$3(this,Sr,null),__privateSet$2(this,Er,e),this.cache=new ObjectCache(t)}async reset(){await Promise.all([this.cache.clearOwnedObjects(),this.cache.clearCustom(),this.waitForLastTransaction()])}async buildTransaction({transaction:e,...t}){return e.addBuildPlugin(this.cache.asPlugin()),e.build({client:__privateGet$3(this,Er),...t})}async executeTransaction({transaction:e,options:t,...n}){const r=isTransaction(e)?await this.buildTransaction({transaction:e}):e,i=await __privateGet$3(this,Er).executeTransactionBlock({...n,transactionBlock:r,options:{...t,showRawEffects:!0}});if(i.rawEffects){const e=Bt.TransactionEffects.parse(Uint8Array.from(i.rawEffects));await this.applyEffects(e)}return i}async signAndExecuteTransaction({options:e,transaction:t,...n}){t.setSenderIfNotSet(n.signer.toSuiAddress());const r=await this.buildTransaction({transaction:t}),{signature:i}=await n.signer.signTransaction(r);return await this.executeTransaction({transaction:r,signature:i,options:e})}async applyEffects(e){__privateSet$2(this,Sr,e.V2?.transactionDigest??null),await this.cache.applyEffects(e)}async waitForLastTransaction(){__privateGet$3(this,Sr)&&(await __privateGet$3(this,Er).waitForTransaction({digest:__privateGet$3(this,Sr)}),__privateSet$2(this,Sr,null))}}Er=new WeakMap,Sr=new WeakMap;var Br,Tr,__typeError$2=e=>{throw TypeError(e)},__privateGet$2=(e,t,n)=>(((e,t,n)=>{t.has(e)||__typeError$2("Cannot "+n)})(e,t,"read from private field"),n?n.call(e):t.get(e)),__privateAdd$2=(e,t,n)=>t.has(e)?__typeError$2("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);class SerialQueue{constructor(){__privateAdd$2(this,Br,[])}async runTask(e){return new Promise((t,n)=>{__privateGet$2(this,Br).push(()=>{e().finally(()=>{__privateGet$2(this,Br).shift(),__privateGet$2(this,Br).length>0&&__privateGet$2(this,Br)[0]()}).then(t,n)}),1===__privateGet$2(this,Br).length&&__privateGet$2(this,Br)[0]()})}}Br=new WeakMap;class ParallelQueue{constructor(e){__privateAdd$2(this,Tr,[]),this.activeTasks=0,this.maxTasks=e}runTask(e){return new Promise((t,n)=>{this.activeTasks<this.maxTasks?(this.activeTasks++,e().finally(()=>{__privateGet$2(this,Tr).length>0?__privateGet$2(this,Tr).shift()():this.activeTasks--}).then(t,n)):__privateGet$2(this,Tr).push(()=>{e().finally(()=>{__privateGet$2(this,Tr).length>0?__privateGet$2(this,Tr).shift()():this.activeTasks--}).then(t,n)})})}}Tr=new WeakMap;var kr,Or,jr,Ir,xr,Ar,__typeError$1=e=>{throw TypeError(e)},__accessCheck$1=(e,t,n)=>t.has(e)||__typeError$1("Cannot "+n),__privateGet$1=(e,t,n)=>(__accessCheck$1(e,t,"read from private field"),n?n.call(e):t.get(e)),__privateAdd$1=(e,t,n)=>t.has(e)?__typeError$1("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),__privateSet$1=(e,t,n,r)=>(__accessCheck$1(e,t,"write to private field"),t.set(e,n),n);function getGasCoinFromEffects(e){if(!e.V2)throw new Error("Unexpected effects version");const t=e.V2.changedObjects[e.V2.gasObjectIndex];if(!t)throw new Error("Gas object not found in effects");const[n,{outputState:r}]=t;if(!r.ObjectWrite)throw new Error("Unexpected gas object state");const[i,s]=r.ObjectWrite;return{ref:{objectId:n,digest:i,version:e.V2.lamportVersion},owner:s.AddressOwner||s.ObjectOwner}}e("SerialTransactionExecutor",class{constructor({signer:e,defaultGasBudget:t=50000000n,...n}){__privateAdd$1(this,kr,new SerialQueue),__privateAdd$1(this,Or),__privateAdd$1(this,jr),__privateAdd$1(this,Ir),__privateAdd$1(this,xr,async e=>{if(!e.V2)return;const t=getGasCoinFromEffects(e).ref;t?__privateGet$1(this,jr).cache.setCustom("gasCoin",t):__privateGet$1(this,jr).cache.deleteCustom("gasCoin")}),__privateAdd$1(this,Ar,async e=>{const t=await __privateGet$1(this,jr).cache.getCustom("gasCoin"),n=fr.from(e);return t&&n.setGasPayment([t]),n.setGasBudgetIfNotSet(__privateGet$1(this,Ir)),n.setSenderIfNotSet(__privateGet$1(this,Or).toSuiAddress()),__privateGet$1(this,jr).buildTransaction({transaction:n})}),__privateSet$1(this,Or,e),__privateSet$1(this,Ir,t),__privateSet$1(this,jr,new CachingTransactionExecutor({client:n.client,cache:n.cache,onEffects:e=>__privateGet$1(this,xr).call(this,e)}))}async applyEffects(e){return __privateGet$1(this,jr).applyEffects(e)}async buildTransaction(e){return __privateGet$1(this,kr).runTask(()=>__privateGet$1(this,Ar).call(this,e))}resetCache(){return __privateGet$1(this,jr).reset()}waitForLastTransaction(){return __privateGet$1(this,jr).waitForLastTransaction()}executeTransaction(e,t,n=[]){return __privateGet$1(this,kr).runTask(async()=>{const r=isTransaction(e)?await __privateGet$1(this,Ar).call(this,e):e,{signature:i}=await __privateGet$1(this,Or).signTransaction(r),s=await __privateGet$1(this,jr).executeTransaction({signature:[i,...n],transaction:r,options:t}).catch(async e=>{throw await this.resetCache(),e}),a=Uint8Array.from(s.rawEffects);return{digest:s.digest,effects:toBase64(a),data:s}})}}),kr=new WeakMap,Or=new WeakMap,jr=new WeakMap,Ir=new WeakMap,xr=new WeakMap,Ar=new WeakMap;var Mr,Cr,Pr,Rr,Ur,$r,Nr,Dr,_r,zr,Vr,Lr,Fr,Wr,qr,Hr,Gr,Kr,Zr,Yr,Jr,Xr,Qr,ei,ti,ni,__typeError=e=>{throw TypeError(e)},__accessCheck=(e,t,n)=>t.has(e)||__typeError("Cannot "+n),__privateGet=(e,t,n)=>(__accessCheck(e,t,"read from private field"),t.get(e)),__privateAdd=(e,t,n)=>t.has(e)?__typeError("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),__privateSet=(e,t,n,r)=>(__accessCheck(e,t,"write to private field"),t.set(e,n),n),__privateMethod=(e,t,n)=>(__accessCheck(e,t,"access private method"),n),__privateWrapper=(e,t,n,r)=>({set _(n){__privateSet(e,t,n)},get _(){return __privateGet(e,t)}});const ri=20,ii=200000000n,si=50000000n,ai=50,oi=1e3;e("ParallelTransactionExecutor",class{constructor(e){__privateAdd(this,Zr),__privateAdd(this,Mr),__privateAdd(this,Cr),__privateAdd(this,Pr),__privateAdd(this,Rr),__privateAdd(this,Ur),__privateAdd(this,$r),__privateAdd(this,Nr),__privateAdd(this,Dr),__privateAdd(this,_r),__privateAdd(this,zr,[]),__privateAdd(this,Vr),__privateAdd(this,Lr,new Map),__privateAdd(this,Fr,new SerialQueue),__privateAdd(this,Wr),__privateAdd(this,qr,null),__privateAdd(this,Hr,null),__privateAdd(this,Gr,0),__privateAdd(this,Kr,null),__privateSet(this,Mr,e.signer),__privateSet(this,Cr,e.client),__privateSet(this,Pr,e.coinBatchSize??ri),__privateSet(this,Rr,e.initialCoinBalance??ii),__privateSet(this,Ur,e.minimumCoinBalance??si),__privateSet(this,Nr,e.defaultGasBudget??__privateGet(this,Ur)),__privateSet(this,$r,e.epochBoundaryWindow??oi),__privateSet(this,Dr,e.maxPoolSize??ai),__privateSet(this,Vr,new CachingTransactionExecutor({client:e.client,cache:e.cache})),__privateSet(this,Wr,new ParallelQueue(__privateGet(this,Dr))),__privateSet(this,_r,e.sourceCoins?new Map(e.sourceCoins.map(e=>[e,null])):null)}resetCache(){return __privateSet(this,Kr,null),__privateMethod(this,Zr,Xr).call(this,()=>__privateGet(this,Vr).reset())}async waitForLastTransaction(){await __privateMethod(this,Zr,Xr).call(this,()=>__privateMethod(this,Zr,Qr).call(this))}async executeTransaction(e,t,n=[]){const{promise:r,resolve:i,reject:s}=function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}(),a=await __privateMethod(this,Zr,Yr).call(this,e),execute=()=>{__privateGet(this,Wr).runTask(()=>__privateMethod(this,Zr,Jr).call(this,e,a,t,n).then(i,s))},o=new Set;return a.forEach(e=>{__privateGet(this,Lr).get(e)?(o.add(e),__privateGet(this,Lr).get(e).push(()=>{o.delete(e),0===o.size&&execute()})):__privateGet(this,Lr).set(e,[])}),0===o.size&&execute(),r}}),Mr=new WeakMap,Cr=new WeakMap,Pr=new WeakMap,Rr=new WeakMap,Ur=new WeakMap,$r=new WeakMap,Nr=new WeakMap,Dr=new WeakMap,_r=new WeakMap,zr=new WeakMap,Vr=new WeakMap,Lr=new WeakMap,Fr=new WeakMap,Wr=new WeakMap,qr=new WeakMap,Hr=new WeakMap,Gr=new WeakMap,Kr=new WeakMap,Zr=new WeakSet,Yr=async function(e){const t=new Set;let n=!1;return e.addSerializationPlugin(async(e,r,i)=>{await i(),n||(n=!0,e.inputs.forEach(e=>{e.Object?.ImmOrOwnedObject?.objectId?t.add(e.Object.ImmOrOwnedObject.objectId):e.Object?.Receiving?.objectId?t.add(e.Object.Receiving.objectId):e.UnresolvedObject?.objectId&&!e.UnresolvedObject.initialSharedVersion&&t.add(e.UnresolvedObject.objectId)}))}),await e.prepareForSerialization({client:__privateGet(this,Cr)}),t},Jr=async function(e,t,n,r=[]){let i;try{e.setSenderIfNotSet(__privateGet(this,Mr).toSuiAddress()),await __privateGet(this,Fr).runTask(async()=>{e.getData().gasData.price||e.setGasPrice(await __privateMethod(this,Zr,ti).call(this)),e.setGasBudgetIfNotSet(__privateGet(this,Nr)),await __privateMethod(this,Zr,Xr).call(this),i=await __privateMethod(this,Zr,ei).call(this),__privateWrapper(this,Gr)._++,e.setGasPayment([{objectId:i.id,version:i.version,digest:i.digest}]),await __privateGet(this,Vr).buildTransaction({transaction:e,onlyTransactionKind:!0})});const t=await e.build({client:__privateGet(this,Cr)}),{signature:s}=await __privateGet(this,Mr).signTransaction(t),a=await __privateGet(this,Vr).executeTransaction({transaction:t,signature:[s,...r],options:{...n,showEffects:!0}}),o=Uint8Array.from(a.rawEffects),c=Bt.TransactionEffects.parse(o),u=getGasCoinFromEffects(c),l=c.V2?.gasUsed;if(i&&l&&u.owner===__privateGet(this,Mr).toSuiAddress()){const t=BigInt(l.computationCost)+BigInt(l.storageCost)+BigInt(l.storageCost)-BigInt(l.storageRebate),n=i.balance-t;let r=!1;new TransactionDataBuilder(e.getData()).mapArguments(e=>("GasCoin"===e.$kind&&(r=!0),e)),!r&&n>=__privateGet(this,Ur)?__privateGet(this,zr).push({id:u.ref.objectId,version:u.ref.version,digest:u.ref.digest,balance:n}):(__privateGet(this,_r)||__privateSet(this,_r,new Map),__privateGet(this,_r).set(u.ref.objectId,u.ref))}return __privateSet(this,qr,a.digest),{digest:a.digest,effects:toBase64(o),data:a}}catch(e){throw i&&(__privateGet(this,_r)||__privateSet(this,_r,new Map),__privateGet(this,_r).set(i.id,null)),await __privateMethod(this,Zr,Xr).call(this,async()=>{await Promise.all([__privateGet(this,Vr).cache.deleteObjects([...t]),__privateMethod(this,Zr,Qr).call(this)])}),e}finally{t.forEach(e=>{const t=__privateGet(this,Lr).get(e);t&&t.length>0?t.shift()():t&&__privateGet(this,Lr).delete(e)}),__privateWrapper(this,Gr)._--}},Xr=async function(e){__privateGet(this,Hr)&&await __privateGet(this,Hr),__privateSet(this,Hr,e?.().then(()=>{__privateSet(this,Hr,null)},()=>{})??null)},Qr=async function(){const e=__privateGet(this,qr);e&&(__privateSet(this,qr,null),await __privateGet(this,Cr).waitForTransaction({digest:e}))},ei=async function(){if(0===__privateGet(this,zr).length&&__privateGet(this,Gr)<=__privateGet(this,Dr)&&await __privateMethod(this,Zr,ni).call(this),0===__privateGet(this,zr).length)throw new Error("No coins available");return __privateGet(this,zr).shift()},ti=async function(){if((__privateGet(this,Kr)?__privateGet(this,Kr).expiration-__privateGet(this,$r)-Date.now():0)>0)return __privateGet(this,Kr).price;if(__privateGet(this,Kr)){const e=Math.max(__privateGet(this,Kr).expiration+__privateGet(this,$r)-Date.now(),1e3);await new Promise(t=>setTimeout(t,e))}const e=await __privateGet(this,Cr).getLatestSuiSystemState();return __privateSet(this,Kr,{price:BigInt(e.referenceGasPrice),expiration:Number.parseInt(e.epochStartTimestampMs,10)+Number.parseInt(e.epochDurationMs,10)}),__privateMethod(this,Zr,ti).call(this)},ni=async function(){const e=Math.min(__privateGet(this,Pr),__privateGet(this,Dr)-(__privateGet(this,zr).length+__privateGet(this,Gr))+1);if(0===e)return;const t=new fr,n=__privateGet(this,Mr).toSuiAddress();if(t.setSender(n),__privateGet(this,_r)){const e=[],n=[];for(const[t,r]of __privateGet(this,_r))r?e.push(r):n.push(t);if(n.length>0){const t=await __privateGet(this,Cr).multiGetObjects({ids:n});e.push(...t.filter(e=>null!==e.data).map(({data:e})=>({objectId:e.objectId,version:e.version,digest:e.digest})))}t.setGasPayment(e),__privateSet(this,_r,new Map)}const r=new Array(e).fill(__privateGet(this,Rr)),i=t.splitCoins(t.gas,r),s=[];for(let e=0;e<r.length;e++)s.push(i[e]);t.transferObjects(s,n),await this.waitForLastTransaction();const a=await __privateGet(this,Cr).signAndExecuteTransaction({transaction:t,signer:__privateGet(this,Mr),options:{showRawEffects:!0}}),o=Bt.TransactionEffects.parse(Uint8Array.from(a.rawEffects));o.V2?.changedObjects.forEach(([e,{outputState:t}],n)=>{n!==o.V2?.gasObjectIndex&&t.ObjectWrite&&__privateGet(this,zr).push({id:e,version:o.V2.lamportVersion,digest:t.ObjectWrite[0],balance:BigInt(__privateGet(this,Rr))})}),__privateGet(this,_r)||__privateSet(this,_r,new Map);const c=getGasCoinFromEffects(o).ref;__privateGet(this,_r).set(c.objectId,c),await __privateGet(this,Cr).waitForTransaction({digest:a.digest})};const ci="CoinWithBalance",ui=normalizeStructTag("0x2::sui::SUI");const li=object({type:string(),balance:bigint()});async function resolveCoinBalance(e,t,n){const r=new Set,i=new Map;if(!e.sender)throw new Error("Sender must be set to resolve CoinWithBalance");for(const t of e.commands)if("$Intent"===t.$kind&&t.$Intent.name===ci){const{type:e,balance:n}=parse(li,t.$Intent.data);"gas"!==e&&n>0n&&r.add(e),i.set(e,(i.get(e)??0n)+n)}const s=new Set;for(const t of e.inputs)t.Object?.ImmOrOwnedObject&&s.add(t.Object.ImmOrOwnedObject.objectId),t.UnresolvedObject?.objectId&&s.add(t.UnresolvedObject.objectId);const a=new Map,o=function(e){const t=getClient$1(e);if(!t.jsonRpc)throw new Error("CoinWithBalance intent currently only works with SuiClient");return t}(t);await Promise.all([...r].map(async t=>{a.set(t,await async function({coinType:e,balance:t,client:n,owner:r,usedIds:i}){let s=t;const a=[];return loadMoreCoins();async function loadMoreCoins(t=null){const{data:o,hasNextPage:c,nextCursor:u}=await n.getCoins({owner:r,coinType:e,cursor:t}),l=o.sort((e,t)=>Number(BigInt(t.balance)-BigInt(e.balance)));for(const e of l){if(i.has(e.coinObjectId))continue;const t=BigInt(e.balance);if(a.push(e),s-=t,s<=0)return a}if(c)return loadMoreCoins(u);throw new Error(`Not enough coins of type ${e} to satisfy requested balance`)}}({coinType:t,balance:i.get(t),client:o,owner:e.sender,usedIds:s}))}));const c=new Map;c.set("gas",{$kind:"GasCoin",GasCoin:!0});for(const[t,n]of e.commands.entries()){if("$Intent"!==n.$kind||n.$Intent.name!==ci)continue;const{type:r,balance:i}=n.$Intent.data;if(0n===i&&"gas"!==r){e.replaceCommand(t,Be.MoveCall({target:"0x2::coin::zero",typeArguments:[r]}));continue}const s=[];if(!c.has(r)){const[t,...n]=a.get(r).map(t=>e.addInput("object",Zt.ObjectRef({objectId:t.coinObjectId,digest:t.digest,version:t.version})));n.length>0&&s.push(Be.MergeCoins(t,n)),c.set(r,t)}s.push(Be.SplitCoins(c.get(r),[e.addInput("pure",Zt.Pure(Bt.u64().serialize(i)))])),e.replaceCommand(t,s),e.mapArguments(e=>"Result"===e.$kind&&e.Result===t?{$kind:"NestedResult",NestedResult:[t+s.length-1,0]}:e)}return n()}e("Arguments",{pure:createPure(e=>t=>t.pure(e)),object:createObjectMethods(e=>t=>t.object(e)),sharedObjectRef:(...e)=>t=>t.sharedObjectRef(...e),objectRef:(...e)=>t=>t.objectRef(...e),receivingRef:(...e)=>t=>t.receivingRef(...e)});const di=(()=>function(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:n,l:a}=fromBig(e[s],t);[r[s],i[s]]=[n,a]}return[r,i]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))))(),fi=(()=>di[0])(),hi=(()=>di[1])(),pi=new Uint32Array(80),gi=new Uint32Array(80);class SHA512 extends HashMD{constructor(e=64){super(128,e,16,!1),this.Ah=0|gn[0],this.Al=0|gn[1],this.Bh=0|gn[2],this.Bl=0|gn[3],this.Ch=0|gn[4],this.Cl=0|gn[5],this.Dh=0|gn[6],this.Dl=0|gn[7],this.Eh=0|gn[8],this.El=0|gn[9],this.Fh=0|gn[10],this.Fl=0|gn[11],this.Gh=0|gn[12],this.Gl=0|gn[13],this.Hh=0|gn[14],this.Hl=0|gn[15]}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:s,Dh:a,Dl:o,Eh:c,El:u,Fh:l,Fl:d,Gh:f,Gl:h,Hh:p,Hl:g}=this;return[e,t,n,r,i,s,a,o,c,u,l,d,f,h,p,g]}set(e,t,n,r,i,s,a,o,c,u,l,d,f,h,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|s,this.Dh=0|a,this.Dl=0|o,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|f,this.Gl=0|h,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let n=0;n<16;n++,t+=4)pi[n]=e.getUint32(t),gi[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|pi[e-15],n=0|gi[e-15],r=rotrSH(t,n,1)^rotrSH(t,n,8)^shrSH(t,0,7),i=rotrSL(t,n,1)^rotrSL(t,n,8)^shrSL(t,n,7),s=0|pi[e-2],a=0|gi[e-2],o=rotrSH(s,a,19)^rotrBH(s,a,61)^shrSH(s,0,6),c=rotrSL(s,a,19)^rotrBL(s,a,61)^shrSL(s,a,6),u=add4L(i,c,gi[e-7],gi[e-16]),l=add4H(u,r,o,pi[e-7],pi[e-16]);pi[e]=0|l,gi[e]=0|u}let{Ah:n,Al:r,Bh:i,Bl:s,Ch:a,Cl:o,Dh:c,Dl:u,Eh:l,El:d,Fh:f,Fl:h,Gh:p,Gl:g,Hh:y,Hl:m}=this;for(let e=0;e<80;e++){const t=rotrSH(l,d,14)^rotrSH(l,d,18)^rotrBH(l,d,41),b=rotrSL(l,d,14)^rotrSL(l,d,18)^rotrBL(l,d,41),w=l&f^~l&p,v=add5L(m,b,d&h^~d&g,hi[e],gi[e]),S=add5H(v,y,t,w,fi[e],pi[e]),B=0|v,T=rotrSH(n,r,28)^rotrBH(n,r,34)^rotrBH(n,r,39),k=rotrSL(n,r,28)^rotrBL(n,r,34)^rotrBL(n,r,39),O=n&i^n&a^i&a,j=r&s^r&o^s&o;y=0|p,m=0|g,p=0|f,g=0|h,f=0|l,h=0|d,({h:l,l:d}=add(0|c,0|u,0|S,0|B)),c=0|a,u=0|o,a=0|i,o=0|s,i=0|n,s=0|r;const I=add3L(B,k,j);n=add3H(I,S,T,O),r=0|I}({h:n,l:r}=add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:s}=add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:a,l:o}=add(0|this.Ch,0|this.Cl,0|a,0|o)),({h:c,l:u}=add(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:d}=add(0|this.Eh,0|this.El,0|l,0|d)),({h:f,l:h}=add(0|this.Fh,0|this.Fl,0|f,0|h)),({h:p,l:g}=add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:m}=add(0|this.Hh,0|this.Hl,0|y,0|m)),this.set(n,r,i,s,a,o,c,u,l,d,f,h,p,g,y,m)}roundClean(){clean(pi,gi)}destroy(){clean(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const yi=createHasher(()=>new SHA512),mi=BigInt(0),bi=BigInt(1);function abool(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}function hexToNumber(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?mi:BigInt("0x"+e)}function bytesToNumberLE(e){return abytes(e),hexToNumber(bytesToHex(Uint8Array.from(e).reverse()))}function numberToBytesBE(e,t){return hexToBytes(e.toString(16).padStart(2*t,"0"))}function numberToBytesLE(e,t){return numberToBytesBE(e,t).reverse()}function ensureBytes(e,t,n){let r;if("string"==typeof t)try{r=hexToBytes(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!isBytes(t))throw new Error(e+" must be hex string or Uint8Array");r=Uint8Array.from(t)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}const isPosBig=e=>"bigint"==typeof e&&mi<=e;function aInRange(e,t,n,r){if(!function(e,t,n){return isPosBig(e)&&isPosBig(t)&&isPosBig(n)&&t<=e&&e<n}(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}const bitMask=e=>(bi<<BigInt(e))-bi;function _validateObject(e,t,n={}){if(!e||"object"!=typeof e)throw new Error("expected valid options object");function checkField(t,n,r){const i=e[t];if(r&&void 0===i)return;const s=typeof i;if(s!==n||null===i)throw new Error(`param "${t}" is invalid: expected ${n}, got ${s}`)}Object.entries(t).forEach(([e,t])=>checkField(e,t,!1)),Object.entries(n).forEach(([e,t])=>checkField(e,t,!0))}function memoized(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(void 0!==i)return i;const s=e(n,...r);return t.set(n,s),s}}const wi=BigInt(0),vi=BigInt(1),Ei=BigInt(2),Si=BigInt(3),Bi=BigInt(4),Ti=BigInt(5),ki=BigInt(7),Oi=BigInt(8),ji=BigInt(9),Ii=BigInt(16);function mod(e,t){const n=e%t;return n>=wi?n:t+n}function pow2(e,t,n){let r=e;for(;t-- >wi;)r*=r,r%=n;return r}function invert(e,t){if(e===wi)throw new Error("invert: expected non-zero number");if(t<=wi)throw new Error("invert: expected positive modulus, got "+t);let n=mod(e,t),r=t,i=wi,s=vi;for(;n!==wi;){const e=r%n,t=i-s*(r/n);r=n,n=e,i=s,s=t}if(r!==vi)throw new Error("invert: does not exist");return mod(i,t)}function assertIsSquare(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function sqrt3mod4(e,t){const n=(e.ORDER+vi)/Bi,r=e.pow(t,n);return assertIsSquare(e,r,t),r}function sqrt5mod8(e,t){const n=(e.ORDER-Ti)/Oi,r=e.mul(t,Ei),i=e.pow(r,n),s=e.mul(t,i),a=e.mul(e.mul(s,Ei),i),o=e.mul(s,e.sub(a,e.ONE));return assertIsSquare(e,o,t),o}function tonelliShanks(e){if(e<Si)throw new Error("sqrt is not defined for small field");let t=e-vi,n=0;for(;t%Ei===wi;)t/=Ei,n++;let r=Ei;const i=Field(e);for(;1===FpLegendre(i,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===n)return sqrt3mod4;let s=i.pow(r,t);const a=(t+vi)/Ei;return function(e,r){if(e.is0(r))return r;if(1!==FpLegendre(e,r))throw new Error("Cannot find square root");let i=n,o=e.mul(e.ONE,s),c=e.pow(r,t),u=e.pow(r,a);for(;!e.eql(c,e.ONE);){if(e.is0(c))return e.ZERO;let t=1,n=e.sqr(c);for(;!e.eql(n,e.ONE);)if(t++,n=e.sqr(n),t===i)throw new Error("Cannot find square root");const r=vi<<BigInt(i-t-1),s=e.pow(o,r);i=t,o=e.sqr(s),c=e.mul(c,o),u=e.mul(u,s)}return u}}function FpSqrt(e){return e%Bi===Si?sqrt3mod4:e%Oi===Ti?sqrt5mod8:e%Ii===ji?function(e){const t=Field(e),n=tonelliShanks(e),r=n(t,t.neg(t.ONE)),i=n(t,r),s=n(t,t.neg(r)),a=(e+ki)/Ii;return(e,t)=>{let n=e.pow(t,a),o=e.mul(n,r);const c=e.mul(n,i),u=e.mul(n,s),l=e.eql(e.sqr(o),t),d=e.eql(e.sqr(c),t);n=e.cmov(n,o,l),o=e.cmov(u,c,d);const f=e.eql(e.sqr(o),t),h=e.cmov(n,o,f);return assertIsSquare(e,h,t),h}}(e):tonelliShanks(e)}const xi=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function FpInvertBatch(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),s=e.inv(i);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),s),r}function FpLegendre(e,t){const n=(e.ORDER-vi)/Ei,r=e.pow(t,n),i=e.eql(r,e.ONE),s=e.eql(r,e.ZERO),a=e.eql(r,e.neg(e.ONE));if(!i&&!s&&!a)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function Field(e,t,n=!1,r={}){if(e<=wi)throw new Error("invalid field: expected ORDER > 0, got "+e);let i,s,a,o=!1;if("object"==typeof t&&null!=t){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const e=t;e.BITS&&(i=e.BITS),e.sqrt&&(s=e.sqrt),"boolean"==typeof e.isLE&&(n=e.isLE),"boolean"==typeof e.modOnDecode&&(o=e.modOnDecode),a=e.allowedLengths}else"number"==typeof t&&(i=t),r.sqrt&&(s=r.sqrt);const{nBitLength:c,nByteLength:u}=function(e,t){void 0!==t&&anumber(t);const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}(e,i);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const d=Object.freeze({ORDER:e,isLE:n,BITS:c,BYTES:u,MASK:bitMask(c),ZERO:wi,ONE:vi,allowedLengths:a,create:t=>mod(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return wi<=t&&t<e},is0:e=>e===wi,isValidNot0:e=>!d.is0(e)&&d.isValid(e),isOdd:e=>(e&vi)===vi,neg:t=>mod(-t,e),eql:(e,t)=>e===t,sqr:t=>mod(t*t,e),add:(t,n)=>mod(t+n,e),sub:(t,n)=>mod(t-n,e),mul:(t,n)=>mod(t*n,e),pow:(e,t)=>function(e,t,n){if(n<wi)throw new Error("invalid exponent, negatives unsupported");if(n===wi)return e.ONE;if(n===vi)return t;let r=e.ONE,i=t;for(;n>wi;)n&vi&&(r=e.mul(r,i)),i=e.sqr(i),n>>=vi;return r}(d,e,t),div:(t,n)=>mod(t*invert(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>invert(t,e),sqrt:s||(t=>(l||(l=FpSqrt(e)),l(d,t))),toBytes:e=>n?numberToBytesLE(e,u):numberToBytesBE(e,u),fromBytes:(t,r=!0)=>{if(a){if(!a.includes(t.length)||t.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+t.length);const e=new Uint8Array(u);e.set(t,n?0:e.length-t.length),t=e}if(t.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+t.length);let i=n?bytesToNumberLE(t):function(e){return hexToNumber(bytesToHex(e))}(t);if(o&&(i=mod(i,e)),!r&&!d.isValid(i))throw new Error("invalid field element: outside of range 0..ORDER");return i},invertBatch:e=>FpInvertBatch(d,e),cmov:(e,t,n)=>n?t:e});return Object.freeze(d)}const Ai=BigInt(0),Mi=BigInt(1);function negateCt(e,t){const n=t.negate();return e?n:t}function normalizeZ(e,t){const n=FpInvertBatch(e.Fp,t.map(e=>e.Z));return t.map((t,r)=>e.fromAffine(t.toAffine(n[r])))}function validateW(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function calcWOpts(e,t){validateW(e,t);const n=2**e;return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1),mask:bitMask(e),maxNumber:n,shiftBy:BigInt(e)}}function calcOffsets(e,t,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:a}=n;let o=Number(e&i),c=e>>a;o>r&&(o-=s,c+=Mi);const u=t*r;return{nextN:c,offset:u+Math.abs(o)-1,isZero:0===o,isNeg:o<0,isNegF:t%2!=0,offsetF:u}}const Ci=new WeakMap,Pi=new WeakMap;function getW(e){return Pi.get(e)||1}function assert0(e){if(e!==Ai)throw new Error("invalid wNAF")}class wNAF{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,n=this.ZERO){let r=e;for(;t>Ai;)t&Mi&&(n=n.add(r)),r=r.double(),t>>=Mi;return n}precomputeWindow(e,t){const{windows:n,windowSize:r}=calcWOpts(t,this.bits),i=[];let s=e,a=s;for(let e=0;e<n;e++){a=s,i.push(a);for(let e=1;e<r;e++)a=a.add(s),i.push(a);s=a.double()}return i}wNAF(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let r=this.ZERO,i=this.BASE;const s=calcWOpts(e,this.bits);for(let e=0;e<s.windows;e++){const{nextN:a,offset:o,isZero:c,isNeg:u,isNegF:l,offsetF:d}=calcOffsets(n,e,s);n=a,c?i=i.add(negateCt(l,t[d])):r=r.add(negateCt(u,t[o]))}return assert0(n),{p:r,f:i}}wNAFUnsafe(e,t,n,r=this.ZERO){const i=calcWOpts(e,this.bits);for(let e=0;e<i.windows&&n!==Ai;e++){const{nextN:s,offset:a,isZero:o,isNeg:c}=calcOffsets(n,e,i);if(n=s,!o){const e=t[a];r=r.add(c?e.negate():e)}}return assert0(n),r}getPrecomputes(e,t,n){let r=Ci.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&("function"==typeof n&&(r=n(r)),Ci.set(t,r))),r}cached(e,t,n){const r=getW(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)}unsafe(e,t,n,r){const i=getW(e);return 1===i?this._unsafeLadder(e,t,r):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),t,r)}createCache(e,t){validateW(t,this.bits),Pi.set(e,t),Ci.delete(e)}hasCache(e){return 1!==getW(e)}}function pippenger(e,t,n,r){!function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}(n,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}(r,t);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const a=e.ZERO,o=function(e){let t;for(t=0;e>mi;e>>=bi,t+=1);return t}(BigInt(i));let c=1;o>12?c=o-3:o>4?c=o-2:o>0&&(c=2);const u=bitMask(c),l=new Array(Number(u)+1).fill(a);let d=a;for(let e=Math.floor((t.BITS-1)/c)*c;e>=0;e-=c){l.fill(a);for(let t=0;t<s;t++){const i=r[t],s=Number(i>>BigInt(e)&u);l[s]=l[s].add(n[t])}let t=a;for(let e=l.length-1,n=a;e>0;e--)n=n.add(l[e]),t=t.add(n);if(d=d.add(t),0!==e)for(let e=0;e<c;e++)d=d.double()}return d}function createField(e,t){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return function(e){const t=xi.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"});_validateObject(e,t)}(t),t}return Field(e)}const Ri=BigInt(0),Ui=BigInt(1),$i=BigInt(2),Ni=BigInt(8);function edwards(e,t={}){const{Fp:n,Fn:r}=function(e,t,n={}){if(!t||"object"!=typeof t)throw new Error(`expected valid ${e} CURVE object`);for(const e of["p","n","h"]){const n=t[e];if(!("bigint"==typeof n&&n>Ai))throw new Error(`CURVE.${e} must be positive bigint`)}const r=createField(t.p,n.Fp),i=createField(t.n,n.Fn),s=["Gx","Gy","a","d"];for(const e of s)if(!r.isValid(t[e]))throw new Error(`CURVE.${e} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:i}}("edwards",e,t),{h:i,n:s}=e;_validateObject(t,{},{uvRatio:"function"});const a=$i<<BigInt(8*r.BYTES)-Ui,modP=e=>n.create(e),o=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:n.sqrt(n.div(e,t))}}catch(e){return{isValid:!1,value:Ri}}});if(!function(e,t,n,r){const i=e.sqr(n),s=e.sqr(r),a=e.add(e.mul(t.a,i),s),o=e.add(e.ONE,e.mul(t.d,e.mul(i,s)));return e.eql(a,o)}(n,e,e.Gx,e.Gy))throw new Error("bad curve params: generator point");function acoord(e,t,n=!1){return aInRange("coordinate "+e,t,n?Ui:Ri,a),t}function aextpoint(e){if(!(e instanceof Point))throw new Error("ExtendedPoint expected")}const c=memoized((e,t)=>{const{X:r,Y:i,Z:s}=e,a=e.is0();null==t&&(t=a?Ni:n.inv(s));const o=modP(r*t),c=modP(i*t),u=n.mul(s,t);if(a)return{x:Ri,y:Ui};if(u!==Ui)throw new Error("invZ was invalid");return{x:o,y:c}}),u=memoized(t=>{const{a:n,d:r}=e;if(t.is0())throw new Error("bad point: ZERO");const{X:i,Y:s,Z:a,T:o}=t,c=modP(i*i),u=modP(s*s),l=modP(a*a),d=modP(l*l),f=modP(c*n);if(modP(l*modP(f+u))!==modP(d+modP(r*modP(c*u))))throw new Error("bad point: equation left != right (1)");if(modP(i*s)!==modP(a*o))throw new Error("bad point: equation left != right (2)");return!0});class Point{constructor(e,t,n,r){this.X=acoord("x",e),this.Y=acoord("y",t),this.Z=acoord("z",n,!0),this.T=acoord("t",r),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(e){return normalizeZ(Point,e)}static msm(e,t){return pippenger(Point,r,e,t)}_setWindowSize(e){this.precompute(e)}static fromAffine(e){if(e instanceof Point)throw new Error("extended point not allowed");const{x:t,y:n}=e||{};return acoord("x",t),acoord("y",n),new Point(t,n,Ui,modP(t*n))}precompute(e=8,t=!0){return l.createCache(this,e),t||this.multiply($i),this}assertValidity(){u(this)}equals(e){aextpoint(e);const{X:t,Y:n,Z:r}=this,{X:i,Y:s,Z:a}=e,o=modP(t*a),c=modP(i*r),u=modP(n*a),l=modP(s*r);return o===c&&u===l}is0(){return this.equals(Point.ZERO)}negate(){return new Point(modP(-this.X),this.Y,this.Z,modP(-this.T))}double(){const{a:t}=e,{X:n,Y:r,Z:i}=this,s=modP(n*n),a=modP(r*r),o=modP($i*modP(i*i)),c=modP(t*s),u=n+r,l=modP(modP(u*u)-s-a),d=c+a,f=d-o,h=c-a,p=modP(l*f),g=modP(d*h),y=modP(l*h),m=modP(f*d);return new Point(p,g,m,y)}add(t){aextpoint(t);const{a:n,d:r}=e,{X:i,Y:s,Z:a,T:o}=this,{X:c,Y:u,Z:l,T:d}=t,f=modP(i*c),h=modP(s*u),p=modP(o*r*d),g=modP(a*l),y=modP((i+s)*(c+u)-f-h),m=g-p,b=g+p,w=modP(h-n*f),v=modP(y*m),S=modP(b*w),B=modP(y*w),T=modP(m*b);return new Point(v,S,T,B)}subtract(e){return this.add(e.negate())}multiply(e){const t=e;aInRange("scalar",t,Ui,s);const{p:n,f:r}=l.cached(this,t,e=>normalizeZ(Point,e));return normalizeZ(Point,[n,r])[0]}multiplyUnsafe(e,t=Point.ZERO){const n=e;return aInRange("scalar",n,Ri,s),n===Ri?Point.ZERO:this.is0()||n===Ui?this:l.unsafe(this,n,e=>normalizeZ(Point,e),t)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return l.unsafe(this,s).is0()}toAffine(e){return c(this,e)}clearCofactor(){return i===Ui?this:this.multiplyUnsafe(i)}static fromBytes(e,t=!1){return abytes(e),Point.fromHex(e,t)}static fromHex(t,r=!1){const{d:i,a:s}=e,c=n.BYTES;t=ensureBytes("pointHex",t,c),abool("zip215",r);const u=t.slice(),l=t[c-1];u[c-1]=-129&l;const d=bytesToNumberLE(u),f=r?a:n.ORDER;aInRange("pointHex.y",d,Ri,f);const h=modP(d*d),p=modP(h-Ui),g=modP(i*h-s);let{isValid:y,value:m}=o(p,g);if(!y)throw new Error("Point.fromHex: invalid y coordinate");const b=(m&Ui)===Ui,w=!!(128&l);if(!r&&m===Ri&&w)throw new Error("Point.fromHex: x=0 and x_0=1");return w!==b&&(m=modP(-m)),Point.fromAffine({x:m,y:d})}toBytes(){const{x:e,y:t}=this.toAffine(),r=numberToBytesLE(t,n.BYTES);return r[r.length-1]|=e&Ui?128:0,r}toRawBytes(){return this.toBytes()}toHex(){return bytesToHex(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}Point.BASE=new Point(e.Gx,e.Gy,Ui,modP(e.Gx*e.Gy)),Point.ZERO=new Point(Ri,Ui,Ui,Ri),Point.Fp=n,Point.Fn=r;const l=new wNAF(Point,8*r.BYTES);return Point}function eddsa(e,t,n){if("function"!=typeof t)throw new Error('"hash" function param is required');_validateObject(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:i,Fp:s,Fn:a}=e,o=a.ORDER,c=n.randomBytes||randomBytes,u=n.adjustScalarBytes||(e=>e),l=n.domain||((e,t,n)=>{if(abool("phflag",n),t.length||n)throw new Error("Contexts/pre-hash are not supported");return e});function modN(e){return a.create(e)}function modN_LE(e){return modN(bytesToNumberLE(e))}function getExtendedPublicKey(e){const{head:n,prefix:r,scalar:a}=function(e){const n=s.BYTES;e=ensureBytes("private key",e,n);const r=ensureBytes("hashed private key",t(e),2*n),i=u(r.slice(0,n));return{head:i,prefix:r.slice(n,2*n),scalar:modN_LE(i)}}(e),o=i.multiply(a),c=o.toBytes();return{head:n,prefix:r,scalar:a,point:o,pointBytes:c}}function getPublicKey(e){return getExtendedPublicKey(e).pointBytes}function hashDomainToScalar(e=Uint8Array.of(),...n){const i=concatBytes$1(...n);return modN_LE(t(l(i,ensureBytes("context",e),!!r)))}const d={zip215:!0};i.precompute(8);const f=s.BYTES,h={secret:f,public:f,signature:2*f,seed:f};function randomSecretKey(e=c(h.seed)){return e}const p={getExtendedPublicKey,randomSecretKey,isValidSecretKey:function(e){try{return!!a.fromBytes(e,!1)}catch(e){return!1}},isValidPublicKey:function(t,n){try{return!!e.fromBytes(t,n)}catch(e){return!1}},randomPrivateKey:randomSecretKey,toMontgomery(t){const{y:n}=e.fromBytes(t),r=32===f;if(!r&&57!==f)throw new Error("only defined for 25519 and 448");const i=r?s.div(Ui+n,Ui-n):s.div(n-Ui,n+Ui);return s.toBytes(i)},toMontgomeryPriv(e){abytes(e,f);const n=t(e.subarray(0,f));return u(n).subarray(0,f)},precompute:(t=8,n=e.BASE)=>n.precompute(t,!1)};return Object.freeze({keygen:function(e){const t=p.randomSecretKey(e);return{secretKey:t,publicKey:getPublicKey(t)}},getPublicKey,sign:function(e,t,n={}){e=ensureBytes("message",e),r&&(e=r(e));const{prefix:a,scalar:c,pointBytes:u}=getExtendedPublicKey(t),l=hashDomainToScalar(n.context,a,e),d=i.multiply(l).toBytes(),f=modN(l+hashDomainToScalar(n.context,d,u,e)*c);aInRange("signature.s",f,Ri,o);const h=s.BYTES;return ensureBytes("result",concatBytes$1(d,numberToBytesLE(f,h)),2*h)},verify:function(t,n,a,o=d){const{context:c,zip215:u}=o,l=s.BYTES;t=ensureBytes("signature",t,2*l),n=ensureBytes("message",n),a=ensureBytes("publicKey",a,l),void 0!==u&&abool("zip215",u),r&&(n=r(n));const f=bytesToNumberLE(t.slice(l,2*l));let h,p,g;try{h=e.fromHex(a,u),p=e.fromHex(t.slice(0,l),u),g=i.multiplyUnsafe(f)}catch(e){return!1}if(!u&&h.isSmallOrder())return!1;const y=hashDomainToScalar(c,p.toBytes(),h.toBytes(),n);return p.add(h.multiplyUnsafe(y)).subtract(g).clearCofactor().is0()},utils:p,Point:e,info:{type:"edwards",lengths:h}})}function twistedEdwards(e){const{CURVE:t,curveOpts:n,hash:r,eddsaOpts:i}=function(e){const t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n={Fp:e.Fp,Fn:Field(t.n,e.nBitLength,!0),uvRatio:e.uvRatio},r={randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:t,curveOpts:n,hash:e.hash,eddsaOpts:r}}(e);return function(e,t){return Object.assign({},t,{ExtendedPoint:t.Point,CURVE:e})}(e,eddsa(edwards(t,n),r,i))}BigInt(0);const Di=BigInt(1),_i=BigInt(2);BigInt(3);const zi=BigInt(5),Vi=BigInt(8),Li={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Vi,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function adjustScalarBytes(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const Fi=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function uvRatio(e,t){const n=Li.p,r=mod(t*t*t,n),i=function(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=Li.p,a=e*e%s*e%s,o=pow2(a,_i,s)*a%s,c=pow2(o,Di,s)*e%s,u=pow2(c,zi,s)*c%s,l=pow2(u,t,s)*u%s,d=pow2(l,n,s)*l%s,f=pow2(d,r,s)*d%s,h=pow2(f,i,s)*f%s,p=pow2(h,i,s)*f%s,g=pow2(p,t,s)*u%s;return{pow_p_5_8:pow2(g,_i,s)*e%s,b2:a}}(e*mod(r*r*t,n)).pow_p_5_8;let s=mod(e*r*i,n);const a=mod(t*s*s,n),o=s,c=mod(s*Fi,n),u=a===e,l=a===mod(-e,n),d=a===mod(-e*Fi,n);return u&&(s=o),(l||d)&&(s=c),((e,t)=>(mod(e,t)&vi)===vi)(s,n)&&(s=mod(-s,n)),{isValid:u||l,value:s}}const Wi=(()=>Field(Li.p,{isLE:!0}))(),qi=(()=>({...Li,Fp:Wi,hash:yi,adjustScalarBytes,uvRatio}))(),Hi=(()=>twistedEdwards(qi))();function messageWithIntent(e,t){return Bt.IntentMessage(Bt.fixedArray(t.length,Bt.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}const Gi={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5,Passkey:6},Ki={ED25519:32,Secp256k1:33,Secp256r1:33,Passkey:33},Zi={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin",6:"Passkey"};class HMAC extends Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ahash(e);const n=toBytes(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),clean(i)}update(e){return aexists(this),this.iHash.update(e),this}digestInto(e){aexists(this),abytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:a}=this;return e.finished=r,e.destroyed=i,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(e,t,n)=>new HMAC(e,t).update(n).digest();function bytesEqual$1(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}hmac.create=(e,t)=>new HMAC(e,t);class PublicKey{equals(e){return bytesEqual$1(this.toRawBytes(),e.toRawBytes())}toBase64(){return toBase64(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){return toBase64(this.toSuiBytes())}verifyWithIntent(e,t,n){const r=messageWithIntent(n,e),i=vn(r,{dkLen:32});return this.verify(i,t)}verifyPersonalMessage(e,t){return this.verifyWithIntent(Bt.vector(Bt.u8()).serialize(e).toBytes(),t,"PersonalMessage")}verifyTransaction(e,t){return this.verifyWithIntent(e,t,"TransactionData")}verifyAddress(e){return this.toSuiAddress()===e}toSuiBytes(){const e=this.toRawBytes(),t=new Uint8Array(e.length+1);return t.set([this.flag()]),t.set(e,1),t}toSuiAddress(){return normalizeSuiAddress(bytesToHex(vn(this.toSuiBytes(),{dkLen:32})).slice(0,2*ie))}}const Yi="suiprivkey";class Signer{async signWithIntent(e,t){const n=messageWithIntent(t,e),r=vn(n,{dkLen:32});return{signature:function({signature:e,signatureScheme:t,publicKey:n}){if(!n)throw new Error("`publicKey` is required");const r=n.toRawBytes(),i=new Uint8Array(1+e.length+r.length);return i.set([Gi[t]]),i.set(e,1),i.set(r,1+e.length),toBase64(i)}({signature:await this.sign(r),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:toBase64(e)}}async signTransaction(e){return this.signWithIntent(e,"TransactionData")}async signPersonalMessage(e){const{signature:t}=await this.signWithIntent(W.vector(W.u8()).serialize(e).toBytes(),"PersonalMessage");return{bytes:toBase64(e),signature:t}}async signAndExecuteTransaction({transaction:e,client:t}){const n=await e.build({client:t}),{signature:r}=await this.signTransaction(n);return(await t.core.executeTransaction({transaction:n,signatures:[r]})).transaction}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class Keypair extends Signer{}function pbkdf2Init(e,t,n,r){ahash(e);const i=function(e,t){if(void 0!==t&&"[object Object]"!=={}.toString.call(t))throw new Error("options should be object or undefined");return Object.assign(e,t)}({dkLen:32,asyncTick:10},r),{c:s,dkLen:a,asyncTick:o}=i;if(anumber(s),anumber(a),anumber(o),s<1)throw new Error("iterations (c) should be >= 1");const c=kdfInputToBytes(t),u=kdfInputToBytes(n),l=new Uint8Array(a),d=hmac.create(e,c),f=d._cloneInto().update(u);return{c:s,dkLen:a,asyncTick:o,DK:l,PRF:d,PRFSalt:f}}function pbkdf2(e,t,n,r){const{c:i,dkLen:s,DK:a,PRF:o,PRFSalt:c}=pbkdf2Init(e,t,n,r);let u;const l=new Uint8Array(4),d=createView(l),f=new Uint8Array(o.outputLen);for(let e=1,t=0;t<s;e++,t+=o.outputLen){const n=a.subarray(t,t+o.outputLen);d.setInt32(0,e,!1),(u=c._cloneInto(u)).update(l).digestInto(f),n.set(f.subarray(0,n.length));for(let e=1;e<i;e++){o._cloneInto(u).update(f).digestInto(f);for(let e=0;e<n.length;e++)n[e]^=f[e]}}return function(e,t,n,r,i){return e.destroy(),t.destroy(),r&&r.destroy(),clean(i),n}(o,c,a,u,f)}function nfkd(e){if("string"!=typeof e)throw new TypeError("invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function mnemonicToSeedSync(e,t=""){return pbkdf2(yi,function(e){const t=nfkd(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}(e).nfkd,(e=>nfkd("mnemonic"+e))(t),{c:2048,dkLen:64})}function isValidHardenedPath(e){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}function mnemonicToSeedHex(e){return toHex(function(e){return mnemonicToSeedSync(e,"")}(e))}const Ji=yi,Xi=new RegExp("^m(\\/[0-9]+')+$"),replaceDerive=e=>e.replace("'",""),derivePath=(e,t,n=2147483648)=>{if(!(e=>!!Xi.test(e)&&!e.split("/").slice(1).map(replaceDerive).some(isNaN))(e))throw new Error("Invalid derivation path");const{key:r,chainCode:i}=(e=>{const t=hmac.create(Ji,"ed25519 seed").update(fromHex(e)).digest();return{key:t.slice(0,32),chainCode:t.slice(32)}})(t);return e.split("/").slice(1).map(replaceDerive).map(e=>parseInt(e,10)).reduce((e,t)=>(({key:e,chainCode:t},n)=>{const r=new ArrayBuffer(4);new DataView(r).setUint32(0,n);const i=new Uint8Array(1+e.length+r.byteLength);i.set(new Uint8Array(1).fill(0)),i.set(e,1),i.set(new Uint8Array(r,0,r.byteLength),e.length+1);const s=hmac.create(Ji,t).update(i).digest();return{key:s.slice(0,32),chainCode:s.slice(32)}})(e,t+n),{key:r,chainCode:i})};class Ed25519PublicKey extends PublicKey{constructor(e){if(super(),"string"==typeof e?this.data=fromBase64(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),32!==this.data.length)throw new Error(`Invalid public key input. Expected 32 bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return Gi.ED25519}async verify(e,t){let n;if("string"==typeof t){const e=function(e){const t=fromBase64(e),n=Zi[t[0]];switch(n){case"ED25519":case"Secp256k1":case"Secp256r1":const r=Ki[n],i=t.slice(1,t.length-r);return{serializedSignature:e,signatureScheme:n,signature:i,publicKey:t.slice(1+i.length),bytes:t};default:throw new Error("Unsupported signature scheme")}}(t);if("ED25519"!==e.signatureScheme)throw new Error("Invalid signature scheme");if(!bytesEqual$1(this.toRawBytes(),e.publicKey))throw new Error("Signature does not match public key");n=e.signature}else n=t;return Hi.verify(n,e,this.toRawBytes())}}e("Ed25519PublicKey",Ed25519PublicKey),Ed25519PublicKey.SIZE=32;const Qi=e("DEFAULT_ED25519_DERIVATION_PATH","m/44'/784'/0'/0'/0'");class Ed25519Keypair extends Keypair{constructor(e){if(super(),e)this.keypair={publicKey:e.publicKey,secretKey:e.secretKey.slice(0,32)};else{const e=Hi.utils.randomPrivateKey();this.keypair={publicKey:Hi.getPublicKey(e),secretKey:e}}}getKeyScheme(){return"ED25519"}static generate(){const e=Hi.utils.randomPrivateKey();return new Ed25519Keypair({publicKey:Hi.getPublicKey(e),secretKey:e})}static fromSecretKey(e,t){if("string"==typeof e){const n=function(e){const{prefix:t,words:n}=C.decode(e);if(t!==Yi)throw new Error("invalid private key prefix");const r=new Uint8Array(C.fromWords(n)),i=r.slice(1),s=Zi[r[0]];return{scheme:s,schema:s,secretKey:i}}(e);if("ED25519"!==n.schema)throw new Error(`Expected a ED25519 keypair, got ${n.schema}`);return this.fromSecretKey(n.secretKey,t)}const n=e.length;if(32!==n)throw new Error(`Wrong secretKey size. Expected 32 bytes, got ${n}.`);const r={publicKey:Hi.getPublicKey(e),secretKey:e};if(!t||!t.skipValidation){const t=(new TextEncoder).encode("sui validation"),n=Hi.sign(t,e);if(!Hi.verify(n,t,r.publicKey))throw new Error("provided secretKey is invalid")}return new Ed25519Keypair(r)}getPublicKey(){return new Ed25519PublicKey(this.keypair.publicKey)}getSecretKey(){return function(e,t){if(32!==e.length)throw new Error("Invalid bytes length");const n=Gi[t],r=new Uint8Array(e.length+1);return r.set([n]),r.set(e,1),C.encode(Yi,C.toWords(r))}(this.keypair.secretKey.slice(0,32),this.getKeyScheme())}async sign(e){return Hi.sign(e,this.keypair.secretKey)}static deriveKeypair(e,t){if(null==t&&(t=Qi),!isValidHardenedPath(t))throw new Error("Invalid derivation path");const{key:n}=derivePath(t,mnemonicToSeedHex(e));return Ed25519Keypair.fromSecretKey(n)}static deriveKeypairFromSeed(e,t){if(null==t&&(t=Qi),!isValidHardenedPath(t))throw new Error("Invalid derivation path");const{key:n}=derivePath(t,e);return Ed25519Keypair.fromSecretKey(n)}}e("Ed25519Keypair",Ed25519Keypair);class FaucetRateLimitError extends Error{}async function faucetRequest({host:e,path:t,body:n,headers:r,method:i}){const s=new URL(t,e).toString(),a=await fetch(s,{method:i,body:n?JSON.stringify(n):void 0,headers:{"Content-Type":"application/json",...r}});if(429===a.status)throw new FaucetRateLimitError("Too many requests from this client have been sent to the faucet. Please retry later");try{return await a.json()}catch(e){throw new Error(`Encountered error when parsing response from faucet, error: ${e}, status ${a.status}, response ${a}`)}}e("FaucetRateLimitError",FaucetRateLimitError);var es,__classPrivateFieldGet$2=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},__classPrivateFieldSet$2=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};let ts;const ns=new Set;const rs={};function getWallets(){if(ts)return ts;if(ts=Object.freeze({register,get,on}),"undefined"==typeof window)return ts;const e=Object.freeze({register});try{window.addEventListener("wallet-standard:register-wallet",({detail:t})=>t(e))}catch(e){console.error("wallet-standard:register-wallet event listener could not be added\n",e)}try{window.dispatchEvent(new AppReadyEvent(e))}catch(e){console.error("wallet-standard:app-ready event could not be dispatched\n",e)}return ts}function register(...e){return(e=e.filter(e=>!ns.has(e))).length?(e.forEach(e=>function(e){ss=void 0,ns.add(e)}(e)),rs.register?.forEach(t=>guard$1(()=>t(...e))),function(){e.forEach(e=>function(e){ss=void 0,ns.delete(e)}(e)),rs.unregister?.forEach(t=>guard$1(()=>t(...e)))}):()=>{}}let ss;function get(){return ss||(ss=[...ns]),ss}function on(e,t){return rs[e]?.push(t)||(rs[e]=[t]),function(){rs[e]=rs[e]?.filter(e=>t!==e)}}function guard$1(e){try{e()}catch(e){console.error(e)}}class AppReadyEvent extends Event{get detail(){return __classPrivateFieldGet$2(this,es,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),es.set(this,void 0),__classPrivateFieldSet$2(this,es,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}es=new WeakMap;e("WALLET_STANDARD_ERROR__REGISTRY__WALLET_NOT_FOUND",3834e3),e("WALLET_STANDARD_ERROR__REGISTRY__WALLET_ACCOUNT_NOT_FOUND",3834001),e("WALLET_STANDARD_ERROR__USER__REQUEST_REJECTED",4001e3),e("WALLET_STANDARD_ERROR__FEATURES__WALLET_ACCOUNT_CHAIN_UNSUPPORTED",616e4),e("WALLET_STANDARD_ERROR__FEATURES__WALLET_ACCOUNT_FEATURE_UNIMPLEMENTED",6160001),e("WALLET_STANDARD_ERROR__FEATURES__WALLET_FEATURE_UNIMPLEMENTED",6160002);function encodeValue(e){if(Array.isArray(e)){return"%5B"+e.map(encodeValue).join("%2C%20")+"%5D"}return"bigint"==typeof e?`${e}n`:encodeURIComponent(String(null!=e&&null===Object.getPrototypeOf(e)?{...e}:e))}function encodeObjectContextEntry([e,t]){return`${e}=${encodeValue(t)}`}var as;function getErrorMessage(e,t={}){{let n=`Wallet Standard error #${e}; Decode this error by running \`npx @wallet-standard/errors decode -- ${e}`;return Object.keys(t).length&&(n+=` '${function(e){const t=Object.entries(e).map(encodeObjectContextEntry).join("&");return btoa(t)}(t)}'`),`${n}\``}}!function(e){e[e.EscapeSequence=0]="EscapeSequence",e[e.Text=1]="Text",e[e.Variable=2]="Variable"}(as||(as={}));class WalletStandardError extends Error{constructor(...[e,t]){let n,r;if(t){const{cause:e,...i}=t;e&&(r={cause:e}),Object.keys(i).length>0&&(n=i)}super(getErrorMessage(e,n),r),this.context={__code:e,...n},this.name="WalletStandardError"}}e("WalletStandardError",WalletStandardError);const os=e("StandardConnect","standard:connect"),cs=(e("Connect",os),e("StandardDisconnect","standard:disconnect")),us=(e("Disconnect",cs),e("StandardEvents","standard:events"));e("Events",us);var ls,__classPrivateFieldGet$1=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},__classPrivateFieldSet$1=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};function registerWallet(e){const callback=({register:t})=>t(e);try{window.dispatchEvent(new RegisterWalletEvent(callback))}catch(e){console.error("wallet-standard:register-wallet event could not be dispatched\n",e)}try{window.addEventListener("wallet-standard:app-ready",({detail:e})=>callback(e))}catch(e){console.error("wallet-standard:app-ready event listener could not be added\n",e)}}class RegisterWalletEvent extends Event{get detail(){return __classPrivateFieldGet$1(this,ls,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),ls.set(this,void 0),__classPrivateFieldSet$1(this,ls,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}ls=new WeakMap;var ds,fs,hs,ps,gs,ys,__classPrivateFieldGet=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},__classPrivateFieldSet=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};class ReadonlyWalletAccount{get address(){return __classPrivateFieldGet(this,ds,"f")}get publicKey(){return __classPrivateFieldGet(this,fs,"f").slice()}get chains(){return __classPrivateFieldGet(this,hs,"f").slice()}get features(){return __classPrivateFieldGet(this,ps,"f").slice()}get label(){return __classPrivateFieldGet(this,gs,"f")}get icon(){return __classPrivateFieldGet(this,ys,"f")}constructor(e){ds.set(this,void 0),fs.set(this,void 0),hs.set(this,void 0),ps.set(this,void 0),gs.set(this,void 0),ys.set(this,void 0),new.target===ReadonlyWalletAccount&&Object.freeze(this),__classPrivateFieldSet(this,ds,e.address,"f"),__classPrivateFieldSet(this,fs,e.publicKey.slice(),"f"),__classPrivateFieldSet(this,hs,e.chains.slice(),"f"),__classPrivateFieldSet(this,ps,e.features.slice(),"f"),__classPrivateFieldSet(this,gs,e.label,"f"),__classPrivateFieldSet(this,ys,e.icon,"f")}}function arraysEqual(e,t){if(e===t)return!0;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}e("ReadonlyWalletAccount",ReadonlyWalletAccount),ds=new WeakMap,fs=new WeakMap,hs=new WeakMap,ps=new WeakMap,gs=new WeakMap,ys=new WeakMap;e("SuiSignMessage","sui:signMessage"),e("SuiSignTransactionBlock","sui:signTransactionBlock"),e("SuiSignTransaction","sui:signTransaction"),e("SuiSignAndExecuteTransactionBlock","sui:signAndExecuteTransactionBlock"),e("SuiSignAndExecuteTransaction","sui:signAndExecuteTransaction"),e("SuiSignPersonalMessage","sui:signPersonalMessage"),e("SuiReportTransactionEffects","sui:reportTransactionEffects"),e("SuiGetCapabilities","sui:getCapabilities");const ms=[os,us];const bs=e("SUI_DEVNET_CHAIN","sui:devnet"),ws=e("SUI_TESTNET_CHAIN","sui:testnet"),vs=e("SUI_LOCALNET_CHAIN","sui:localnet"),Es=e("SUI_MAINNET_CHAIN","sui:mainnet"),Ss=e("SUI_CHAINS",[bs,ws,vs,Es]);void 0===globalThis.Buffer&&(globalThis.Buffer=o.Buffer);e("SDK_VERSION","1.42.0"),e("BUNDLER_VERSION","1.0.0")}}});
